{"version":3,"file":"zerxzLib.js","mappings":"mdAAO,MAAMA,EAAa,4BAIbC,EAAQ,CACjBC,YAJmE,SAAnDC,aAAaC,QAAQ,0BAKrCC,sBAJyE,SAA/CF,aAAaC,QAAQ,uBCW5CE,eAAeC,IAClB,MAAMC,QAAiBC,MAAM,oBAAqB,CAC9CC,OAAQ,OACRC,QAASC,MAGb,GAAwB,MAApBJ,EAASK,OAKT,YAJAC,EACI,+GACAC,EAAWC,MAKnB,IAAKR,EAASS,GACV,OAMJ,aAFoBT,EAASU,MAGjC,CAEOZ,eAAea,IAAyB,IAAAC,EAC3C,MAAMC,QAAgBd,IACtB,IAAKc,EACD,OAEJ,IAAKpB,EAAMC,YACP,OAEJ,MACMoB,GAD6B,QAAtBF,EAAGC,EAAQrB,UAAW,IAAAoB,EAAAA,EAAI,IAElCG,MAAM,SACNC,IAAKC,GAAMA,EAAEC,QACbC,OAAQF,GAAMA,EAAEG,WAAW,WAChC,GAAIN,EAASO,QAAU,EACnB,OAEJ,MAAMC,EAAaT,EAAQU,mBAC3B,IAAIC,EAAc,GACdV,EAASW,SAASH,KAClBR,EAASY,OAAOZ,EAASa,QAAQL,GAAa,GAC9CR,EAASc,KAAKN,IAElBE,EAAcV,EAAS,GACvBe,EAAY,qBAAsBL,GAClCM,EAAQtC,EAAYsB,EAASiB,KAAK,OAClC,MAAMC,EAAWC,EAAE,8BAA8B,GAE3CC,EAAoBD,EAAE,4BAA4B,GAClDE,EAAiBF,EAAE,yBAAyB,GAClDG,QAAQC,IAAI,WAAYL,GACxBI,QAAQC,IAAI,WAAYvB,GACnBkB,IAGLE,EAAkBI,YAAc,SAAHC,OAAYf,GACzCW,EAAeG,YAAc,WAAHC,OAAcjB,GAExCU,EAASQ,MAAQ1B,EAASiB,KAAK,MACnC,CAGOjC,eAAegC,EAAQW,EAAaD,GAA6C,IAA9BE,IAAqBC,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,KAAAA,UAAA,SAErEd,EAAYY,EAAKD,GAEnBE,GACAG,IAEJA,IAEAC,GACJ,CCrCO,MAAMC,EAAiB,CAAC,aAAc,YAEhCC,EAAiBA,IAC7BD,EAAetB,SAASwB,EAAaC,wBAE/B,SAASC,IAEf7C,EAAiB,aAADiC,OAFoBI,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAG9B,ogFAuEJpC,EAAWC,KAAM,GAAI,CACzB4C,OAAO,EACPC,MAAM,EACNC,wBAAwB,GAE1B,CAEOxD,eAAeyD,IAAuD,IAAAC,EAAAC,EAAA,IAAtC5C,EAA+B8B,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzE,IAAK9B,EACJ,OAED,MAAM6C,EAAWC,KAAKC,MAA+B,QAA1BJ,EAAC3C,EAAQgD,yBAAiB,IAAAL,EAAAA,EAAI,MACnDM,EAAoC,QAA7BL,EAAG5C,EAAQU,0BAAkB,IAAAkC,EAAAA,EAAI,GAC9CrB,QAAQC,IAAI,iBACZ,MAAM0B,EAAW9B,EAAE,mCACnBG,QAAQC,IAAI,WAAY0B,GACxB,MAAMC,EAAkBD,EAAS,GAC3BE,EAAcF,EAAS,GAC7B3B,QAAQC,IAAI,cAAe4B,GAC3B,MAAMC,EAAmBC,MAAMC,KAC9BH,EAAYI,UAEPC,EAAuBH,MAAMC,KAClCJ,EAAgBK,UAEjBjC,QAAQC,IAAI,mBAAoB6B,GAChC,MAAMK,EAAoBL,EAAiBlD,IAAKwD,GAAOA,EAAGhC,OAEpDiC,EAAmB,IADKH,EAAqBtD,IAAKwD,GAAOA,EAAGhC,UAG9D+B,GACFG,OACIC,EAAiBjB,EAAS1C,IAAK4D,GAAUA,EAAMA,OAErD,GAAIlB,EAASrC,OAAS,EACrB,IAAK,MAAMuD,KAASlB,EAAU,CAC7B,GAAIe,EAAiBhD,SAASmD,EAAMA,OACnC,SAED,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOrC,MAAQoC,EAAMA,MACrBC,EAAOG,KAAO,GAAHzC,OAAMqC,EAAMK,KAAI,KAAA1C,OAAIqC,EAAMA,MAAK,KAC1CX,EAAYiB,YAAYL,EACzB,CAED,MAAMM,QAvJArF,eAA8B2C,GACpC,IACC,MAAM2C,QAAenF,MAAM,gEAADsC,OACuCE,IAE3D4C,QAAcD,EAAO1E,OAC3B,OAAK2E,SAAAA,EAAMC,QAGXlD,QAAQC,IAAIgD,GACLA,EAAKC,OACVnE,OAAQyD,GAAUA,EAAMK,KAAKxD,SAAS,WACtCT,IAAKuE,IACL,MAAMX,EAAQW,EAAUN,KAAKO,QAAQ,UAAW,IAGhD,MAAO,CACNP,KAHYM,EAAUE,YAItBb,YAXK,EAcT,CAAE,MAAOc,GAER,OADAtD,QAAQuD,MAAMD,GACP,EACR,CACD,CA8H4BE,CAAe9B,GAC1C1B,QAAQC,IAAI,eAAgB8C,GAC5B,MAAMU,EAAqBV,EAAahE,OACtCyD,IACCH,EAAiBhD,SAASmD,EAAMA,SAChCD,EAAelD,SAASmD,EAAMA,QAGjC,GAAkC,IAA9BiB,EAAmBxE,OACtBe,QAAQC,IAAI,cACN,CACND,QAAQC,IAAI,qBAAsBwD,GAClC,IAAK,MAAMjB,KAASiB,EAAoB,CACvC,MAAMhB,EAASC,SAASC,cAAc,UACtCF,EAAOrC,MAAQoC,EAAMA,MACrBC,EAAOG,KAAO,GAAHzC,OAAMqC,EAAMK,KAAI,KAAA1C,OAAIqC,EAAMA,MAAK,KAC1CX,EAAYiB,YAAYL,EACzB,CACA/C,EAAQ,oBAAqB6B,KAAKmC,UAAUD,GAC7C,CACA,MAAME,EAAe,IAAIC,IAAI,IAAIvB,KAAqBE,KAAmBkB,EAAmB7E,IAAK4D,GAAUA,EAAMA,SACjH,GAAI5B,KAAsBnC,EAAQoF,yBAA0B,CAC3D,IAAKF,EAAaG,IAAIrF,EAAQoF,0BAC7B,OAEDhD,EAAakD,aAAetF,EAAQoF,yBACpChE,EAAE,wBAAwBmE,IAAInD,EAAakD,cAC3ClE,EAAE,sCAADM,OAAuCU,EAAakD,aAAY,MAE/DE,KAAK,YAAY,EACpB,CAED,CC3MA,MAAMC,EAAWC,OAAOZ;;;;;;ACCxB,MAAM,EAAEa,WAAWd,EAAE,EAAEe,kBAAa,IAAS,EAAEC,UAAU,EAAEA,SAASC,eAAe,uBAAuBC,SAASC,WAAW,YAAYC,cAAcD,UAAUE,EAAEC,SAASC,EAAE,IAAIC,QAAQ,MAAMC,EAAE,WAAAC,CAAYC,EAAE3B,EAAEuB,GAAG,GAAGK,KAAKC,cAAa,EAAGN,IAAIF,EAAE,MAAMS,MAAM,qEAAqEF,KAAKG,QAAQJ,EAAEC,KAAKD,EAAE3B,CAAC,CAAC,cAAIgC,GAAa,IAAIL,EAAEC,KAAKL,EAAE,MAAMF,EAAEO,KAAKD,EAAE,GAAG3B,QAAG,IAAS2B,EAAE,CAAC,MAAM3B,OAAE,IAASqB,GAAG,IAAIA,EAAE1F,OAAOqE,IAAI2B,EAAEJ,EAAEU,IAAIZ,SAAI,IAASM,KAAKC,KAAKL,EAAEI,EAAE,IAAIP,eAAec,YAAYN,KAAKG,SAAS/B,GAAGuB,EAAEY,IAAId,EAAEM,GAAG,CAAC,OAAOA,CAAC,CAAC,QAAAS,GAAW,OAAOR,KAAKG,OAAO,EAAE,MAAqoBM,EAAErC,EAAE2B,GAAGA,EAAEA,GAAGA,aAAaP,cAAc,CAACO,IAAI,IAAI3B,EAAE,GAAG,IAAI,MAAMqB,KAAKM,EAAEW,SAAStC,GAAGqB,EAAEU,QAAQ,MAAztBJ,IAAG,IAAIF,EAAE,iBAAiBE,EAAEA,EAAEA,EAAE,QAAG,EAAON,GAAsrBkB,CAAEvC,EAAG,EAAjE,CAAmE2B,GAAGA,GCAlzCa,GAAG,EAAEC,eAAe,EAAEC,yBAAyBC,EAAEC,oBAAoB,EAAEC,sBAAsB,EAAEC,eAAe,GAAGC,OAAOC,EAAElC,WAAW,EAAEkC,EAAEC,aAAaC,EAAE,EAAE,EAAEC,YAAY,GAAGC,EAAEJ,EAAEK,+BAA+BC,EAAE,CAAC3B,EAAEN,IAAIM,EAAE4B,EAAE,CAAC,WAAAC,CAAY7B,EAAEN,GAAG,OAAOA,GAAG,KAAKoC,QAAQ9B,EAAEA,EAAEuB,EAAE,KAAK,MAAM,KAAKH,OAAO,KAAKtE,MAAMkD,EAAE,MAAMA,EAAEA,EAAE1D,KAAKmC,UAAUuB,GAAG,OAAOA,CAAC,EAAE,aAAA+B,CAAc/B,EAAEN,GAAG,IAAIsC,EAAEhC,EAAE,OAAON,GAAG,KAAKoC,QAAQE,EAAE,OAAOhC,EAAE,MAAM,KAAKiC,OAAOD,EAAE,OAAOhC,EAAE,KAAKiC,OAAOjC,GAAG,MAAM,KAAKoB,OAAO,KAAKtE,MAAM,IAAIkF,EAAE1F,KAAKC,MAAMyD,EAAE,CAAC,MAAMA,GAAGgC,EAAE,IAAI,EAAE,OAAOA,CAAC,GAAGE,EAAE,CAAClC,EAAEN,KAAK,EAAEM,EAAEN,GAAGyC,EAAE,CAACC,WAAU,EAAGC,KAAKC,OAAOC,UAAUX,EAAEY,SAAQ,EAAGC,YAAW,EAAGC,WAAWR,GAAGvC,OAAOgD,WAAWhD,OAAO,YAAY0B,EAAEuB,sBAAsB,IAAI/C,QAAQ,MAAMgD,UAAUC,YAAY,qBAAOC,CAAe/C,GAAGC,KAAK+C,QAAQ/C,KAAKsB,IAAI,IAAIhH,KAAKyF,EAAE,CAAC,6BAAWiD,GAAqB,OAAOhD,KAAKiD,WAAWjD,KAAKkD,MAAM,IAAIlD,KAAKkD,KAAKC,OAAO,CAAC,qBAAOC,CAAerD,EAAEN,EAAEyC,GAAG,GAAGzC,EAAE4D,QAAQ5D,EAAE0C,WAAU,GAAInC,KAAK+C,OAAO/C,KAAKT,UAAU+D,eAAevD,MAAMN,EAAE0B,OAAOoC,OAAO9D,IAAI+D,SAAQ,GAAIxD,KAAKyD,kBAAkBlD,IAAIR,EAAEN,IAAIA,EAAEiE,WAAW,CAAC,MAAM3B,EAAErC,SAASqB,EAAEf,KAAK2D,sBAAsB5D,EAAEgC,EAAEtC,QAAG,IAASsB,GAAG,EAAEf,KAAKT,UAAUQ,EAAEgB,EAAE,CAAC,CAAC,4BAAO4C,CAAsB5D,EAAEN,EAAEsC,GAAG,MAAM1B,IAAIjC,EAAEmC,IAAII,GAAGI,EAAEf,KAAKT,UAAUQ,IAAI,CAAC,GAAAM,GAAM,OAAOL,KAAKP,EAAE,EAAE,GAAAc,CAAIR,GAAGC,KAAKP,GAAGM,CAAC,GAAG,MAAM,CAACM,IAAIjC,EAAE,GAAAmC,CAAId,GAAG,MAAMsB,EAAE3C,GAAGwF,KAAK5D,MAAMW,GAAGiD,KAAK5D,KAAKP,GAAGO,KAAK6D,cAAc9D,EAAEgB,EAAEgB,EAAE,EAAE+B,cAAa,EAAGC,YAAW,EAAG,CAAC,yBAAOC,CAAmBjE,GAAG,OAAOC,KAAKyD,kBAAkBpD,IAAIN,IAAImC,CAAC,CAAC,WAAOa,GAAO,GAAG/C,KAAKsD,eAAe5B,EAAE,sBAAsB,OAAO,MAAM3B,EAAE,EAAEC,MAAMD,EAAEkD,gBAAW,IAASlD,EAAEuB,IAAItB,KAAKsB,EAAE,IAAIvB,EAAEuB,IAAItB,KAAKyD,kBAAkB,IAAIQ,IAAIlE,EAAE0D,kBAAkB,CAAC,eAAOR,GAAW,GAAGjD,KAAKsD,eAAe5B,EAAE,cAAc,OAAO,GAAG1B,KAAKkE,WAAU,EAAGlE,KAAK+C,OAAO/C,KAAKsD,eAAe5B,EAAE,eAAe,CAAC,MAAM3B,EAAEC,KAAKmE,WAAW1E,EAAE,IAAI,EAAEM,MAAM,EAAEA,IAAI,IAAI,MAAMgC,KAAKtC,EAAEO,KAAKoD,eAAerB,EAAEhC,EAAEgC,GAAG,CAAC,MAAMhC,EAAEC,KAAKN,OAAOgD,UAAU,GAAG,OAAO3C,EAAE,CAAC,MAAMN,EAAEkD,oBAAoBtC,IAAIN,GAAG,QAAG,IAASN,EAAE,IAAI,MAAMM,EAAEgC,KAAKtC,EAAEO,KAAKyD,kBAAkBlD,IAAIR,EAAEgC,EAAE,CAAC/B,KAAKkD,KAAK,IAAIe,IAAI,IAAI,MAAMlE,EAAEN,KAAKO,KAAKyD,kBAAkB,CAAC,MAAM1B,EAAE/B,KAAKoE,KAAKrE,EAAEN,QAAG,IAASsC,GAAG/B,KAAKkD,KAAK3C,IAAIwB,EAAEhC,EAAE,CAACC,KAAKqE,cAAcrE,KAAKsE,eAAetE,KAAKuE,OAAO,CAAC,qBAAOD,CAAe7E,GAAG,MAAMsC,EAAE,GAAG,GAAGlF,MAAM2H,QAAQ/E,GAAG,CAAC,MAAMrB,EAAE,IAAIM,IAAIe,EAAErC,KAAK,KAAKqH,WAAW,IAAI,MAAMhF,KAAKrB,EAAE2D,EAAE2C,QAAQ,EAAEjF,GAAG,WAAM,IAASA,GAAGsC,EAAEzH,KAAK,EAAEmF,IAAI,OAAOsC,CAAC,CAAC,WAAOqC,CAAKrE,EAAEN,GAAG,MAAMsC,EAAEtC,EAAE0C,UAAU,OAAM,IAAKJ,OAAE,EAAO,iBAAiBA,EAAEA,EAAE,iBAAiBhC,EAAEA,EAAE4E,mBAAc,CAAM,CAAC,WAAA7E,GAAc8E,QAAQ5E,KAAK6E,UAAK,EAAO7E,KAAK8E,iBAAgB,EAAG9E,KAAK+E,YAAW,EAAG/E,KAAKgF,KAAK,KAAKhF,KAAKiF,MAAM,CAAC,IAAAA,GAAOjF,KAAKkF,KAAK,IAAIC,QAASpF,GAAGC,KAAKoF,eAAerF,GAAIC,KAAKqF,KAAK,IAAIpB,IAAIjE,KAAKsF,OAAOtF,KAAK6D,gBAAgB7D,KAAKF,YAAYwB,GAAGiE,QAASxF,GAAGA,EAAEC,MAAO,CAAC,aAAAwF,CAAczF,IAAIC,KAAKyF,OAAO,IAAI/G,KAAKgH,IAAI3F,QAAG,IAASC,KAAK2F,YAAY3F,KAAK4F,aAAa7F,EAAE8F,iBAAiB,CAAC,gBAAAC,CAAiB/F,GAAGC,KAAKyF,MAAMM,OAAOhG,EAAE,CAAC,IAAAuF,GAAO,MAAMvF,EAAE,IAAIkE,IAAIxE,EAAEO,KAAKF,YAAY2D,kBAAkB,IAAI,MAAM1B,KAAKtC,EAAE0D,OAAOnD,KAAKsD,eAAevB,KAAKhC,EAAEQ,IAAIwB,EAAE/B,KAAK+B,WAAW/B,KAAK+B,IAAIhC,EAAEiG,KAAK,IAAIhG,KAAK6E,KAAK9E,EAAE,CAAC,gBAAAkG,GAAmB,MAAMlG,EAAEC,KAAKkG,YAAYlG,KAAKmG,aAAanG,KAAKF,YAAYsG,mBAAmB,MDA7lE,EAAC3G,EAAEE,KAAK,GAAGvB,EAAEqB,EAAE4G,mBAAmB1G,EAAEjG,IAAKqG,GAAGA,aAAaP,cAAcO,EAAEA,EAAEK,iBAAkB,IAAI,MAAMhC,KAAKuB,EAAE,CAAC,MAAMA,EAAEnC,SAASC,cAAc,SAASoC,EAAE,EAAEyG,cAAS,IAASzG,GAAGF,EAAE4G,aAAa,QAAQ1G,GAAGF,EAAE3E,YAAYoD,EAAE+B,QAAQV,EAAE7B,YAAY+B,EAAE,GCAk3D,CAAEI,EAAEC,KAAKF,YAAYuE,eAAetE,CAAC,CAAC,iBAAAyG,GAAoBxG,KAAK2F,aAAa3F,KAAKiG,mBAAmBjG,KAAKoF,gBAAe,GAAIpF,KAAKyF,MAAMF,QAASxF,GAAGA,EAAE8F,kBAAmB,CAAC,cAAAT,CAAerF,GAAG,CAAC,oBAAA0G,GAAuBzG,KAAKyF,MAAMF,QAASxF,GAAGA,EAAE2G,qBAAsB,CAAC,wBAAAC,CAAyB5G,EAAEN,EAAEsC,GAAG/B,KAAK4G,KAAK7G,EAAEgC,EAAE,CAAC,IAAA8E,CAAK9G,EAAEN,GAAG,MAAMsC,EAAE/B,KAAKF,YAAY2D,kBAAkBpD,IAAIN,GAAG3B,EAAE4B,KAAKF,YAAYsE,KAAKrE,EAAEgC,GAAG,QAAG,IAAS3D,IAAG,IAAK2D,EAAEQ,QAAQ,CAAC,MAAMxB,QAAG,IAASgB,EAAEO,WAAWV,YAAYG,EAAEO,UAAUX,GAAGC,YAAYnC,EAAEsC,EAAEK,MAAMpC,KAAKgF,KAAKjF,EAAE,MAAMgB,EAAEf,KAAK8G,gBAAgB1I,GAAG4B,KAAKuG,aAAanI,EAAE2C,GAAGf,KAAKgF,KAAK,IAAI,CAAC,CAAC,IAAA4B,CAAK7G,EAAEN,GAAG,MAAMsC,EAAE/B,KAAKF,YAAY1B,EAAE2D,EAAEmB,KAAK7C,IAAIN,GAAG,QAAG,IAAS3B,GAAG4B,KAAKgF,OAAO5G,EAAE,CAAC,MAAM2B,EAAEgC,EAAEiC,mBAAmB5F,GAAG2C,EAAE,mBAAmBhB,EAAEuC,UAAU,CAACR,cAAc/B,EAAEuC,gBAAW,IAASvC,EAAEuC,WAAWR,cAAc/B,EAAEuC,UAAUX,EAAE3B,KAAKgF,KAAK5G,EAAE,MAAMuC,EAAEI,EAAEe,cAAcrC,EAAEM,EAAEqC,MAAMpC,KAAK5B,GAAGuC,GAAGX,KAAK+G,MAAM1G,IAAIjC,IAAIuC,EAAEX,KAAKgF,KAAK,IAAI,CAAC,CAAC,aAAAnB,CAAc9D,EAAEN,EAAEsC,GAAG,QAAG,IAAShC,EAAE,CAAC,MAAM3B,EAAE4B,KAAKF,YAAYiB,EAAEf,KAAKD,GAAG,GAAGgC,IAAI3D,EAAE4F,mBAAmBjE,MAAMgC,EAAEU,YAAYR,GAAGlB,EAAEtB,IAAIsC,EAAES,YAAYT,EAAEQ,SAASxB,IAAIf,KAAK+G,MAAM1G,IAAIN,KAAKC,KAAKgH,aAAa5I,EAAEgG,KAAKrE,EAAEgC,KAAK,OAAO/B,KAAKiH,EAAElH,EAAEN,EAAEsC,EAAE,EAAC,IAAK/B,KAAK8E,kBAAkB9E,KAAKkF,KAAKlF,KAAKkH,OAAO,CAAC,CAAAD,CAAElH,EAAEN,GAAG+C,WAAWT,EAAEQ,QAAQnE,EAAEoF,QAAQzC,GAAGJ,GAAGoB,KAAK/B,KAAK+G,OAAO,IAAI9C,KAAKrF,IAAImB,KAAKC,KAAK+G,KAAKxG,IAAIR,EAAEY,GAAGlB,GAAGO,KAAKD,KAAI,IAAKgB,QAAG,IAASJ,KAAKX,KAAKqF,KAAKzG,IAAImB,KAAKC,KAAK+E,YAAYhD,IAAItC,OAAE,GAAQO,KAAKqF,KAAK9E,IAAIR,EAAEN,KAAI,IAAKrB,GAAG4B,KAAKgF,OAAOjF,IAAIC,KAAKmH,OAAO,IAAIzI,KAAKgH,IAAI3F,GAAG,CAAC,UAAMmH,GAAOlH,KAAK8E,iBAAgB,EAAG,UAAU9E,KAAKkF,IAAI,CAAC,MAAMnF,GAAGoF,QAAQiC,OAAOrH,EAAE,CAAC,MAAMA,EAAEC,KAAKqH,iBAAiB,OAAO,MAAMtH,SAASA,GAAGC,KAAK8E,eAAe,CAAC,cAAAuC,GAAiB,OAAOrH,KAAKsH,eAAe,CAAC,aAAAA,GAAgB,IAAItH,KAAK8E,gBAAgB,OAAO,IAAI9E,KAAK+E,WAAW,CAAC,GAAG/E,KAAK2F,aAAa3F,KAAKiG,mBAAmBjG,KAAK6E,KAAK,CAAC,IAAI,MAAM9E,EAAEN,KAAKO,KAAK6E,KAAK7E,KAAKD,GAAGN,EAAEO,KAAK6E,UAAK,CAAM,CAAC,MAAM9E,EAAEC,KAAKF,YAAY2D,kBAAkB,GAAG1D,EAAEiG,KAAK,EAAE,IAAI,MAAMvG,EAAEsC,KAAKhC,EAAE,CAAC,MAAMyD,QAAQzD,GAAGgC,EAAE3D,EAAE4B,KAAKP,IAAG,IAAKM,GAAGC,KAAKqF,KAAKzG,IAAIa,SAAI,IAASrB,GAAG4B,KAAKiH,EAAExH,OAAE,EAAOsC,EAAE3D,EAAE,CAAC,CAAC,IAAI2B,GAAE,EAAG,MAAMN,EAAEO,KAAKqF,KAAK,IAAItF,EAAEC,KAAKuH,aAAa9H,GAAGM,GAAGC,KAAKwH,WAAW/H,GAAGO,KAAKyF,MAAMF,QAASxF,GAAGA,EAAE0H,gBAAiBzH,KAAK0H,OAAOjI,IAAIO,KAAK2H,MAAM,CAAC,MAAMlI,GAAG,MAAMM,GAAE,EAAGC,KAAK2H,OAAOlI,CAAC,CAACM,GAAGC,KAAK4H,KAAKnI,EAAE,CAAC,UAAA+H,CAAWzH,GAAG,CAAC,IAAA6H,CAAK7H,GAAGC,KAAKyF,MAAMF,QAASxF,GAAGA,EAAE8H,iBAAkB7H,KAAK+E,aAAa/E,KAAK+E,YAAW,EAAG/E,KAAK8H,aAAa/H,IAAIC,KAAK+H,QAAQhI,EAAE,CAAC,IAAA4H,GAAO3H,KAAKqF,KAAK,IAAIpB,IAAIjE,KAAK8E,iBAAgB,CAAE,CAAC,kBAAIkD,GAAiB,OAAOhI,KAAKiI,mBAAmB,CAAC,iBAAAA,GAAoB,OAAOjI,KAAKkF,IAAI,CAAC,YAAAqC,CAAaxH,GAAG,OAAM,CAAE,CAAC,MAAA2H,CAAO3H,GAAGC,KAAKmH,OAAOnH,KAAKmH,KAAK5B,QAASxF,GAAGC,KAAK6G,KAAK9G,EAAEC,KAAKD,KAAMC,KAAK2H,MAAM,CAAC,OAAAI,CAAQhI,GAAG,CAAC,YAAA+H,CAAa/H,GAAG,EAAE6C,EAAEyB,cAAc,GAAGzB,EAAEwD,kBAAkB,CAAC8B,KAAK,QAAQtF,EAAElB,EAAE,sBAAsB,IAAIuC,IAAIrB,EAAElB,EAAE,cAAc,IAAIuC,IAAIzC,IAAI,CAAC2G,gBAAgBvF,KAAKxB,EAAEgH,0BAA0B,IAAI9N,KAAK;;;;;;ACAtxL,MAAM,EAAE4E,WAAW,EAAE,EAAEmC,aAAa,EAAE,EAAE,EAAEgH,aAAa,WAAW,CAACC,WAAWvI,GAAGA,SAAI,EAAO,EAAE,QAAQ,EAAE,OAAOwI,KAAKC,SAASC,QAAQ,GAAGC,MAAM,MAAM,EAAE,IAAI,EAAE,EAAE,IAAI,KAAK,EAAElL,SAAS,EAAE,IAAI,EAAEmL,cAAc,IAAI,EAAE5I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,mBAAmBA,EAAE,EAAElD,MAAM2H,QAAQ,EAAEzE,GAAG,EAAEA,IAAI,mBAAmBA,IAAIL,OAAOkJ,UAAU,GAAE,cAAc,GAAE,sDAAsDjP,GAAE,OAAOkP,GAAE,KAAKC,GAAEC,OAAO,KAAK,uBAAsB,OAAM,wCAAuC,KAAK,GAAE,KAAKC,GAAE,KAAK,GAAE,qCAAqC,GAAEjJ,GAAG,CAACgC,KAAKtC,KAAI,CAAEwJ,WAAWlJ,EAAEmJ,QAAQnH,EAAEoH,OAAO1J,IAAI2J,GAAE,GAAE,GAAG,GAAE,GAAE,GAAUC,IAAL,GAAE,GAAK3J,OAAO4J,IAAI,iBAAgBC,GAAE7J,OAAO4J,IAAI,eAAeE,GAAE,IAAI5J,QAAQqH,GAAE,EAAEwC,iBAAiB,EAAE,KAAK,SAASC,GAAE3J,EAAEgC,GAAG,IAAI,EAAEhC,KAAKA,EAAEuD,eAAe,OAAO,MAAMpD,MAAM,kCAAkC,YAAO,IAAS,EAAE,EAAEoI,WAAWvG,GAAGA,CAAC,CAAC,MAAM4H,GAAE,CAAC5J,EAAEgC,KAAK,MAAMtC,EAAEM,EAAEhG,OAAO,EAAE4F,EAAE,GAAG,IAAIgB,EAAEW,EAAE,IAAIS,EAAE,QAAQ,IAAIA,EAAE,SAAS,GAAGtB,EAAE,GAAE,IAAI,IAAIsB,EAAE,EAAEA,EAAEtC,EAAEsC,IAAI,CAAC,MAAMtC,EAAEM,EAAEgC,GAAG,IAAIX,EAAEO,EAAED,GAAG,EAAEkB,EAAE,EAAE,KAAKA,EAAEnD,EAAE1F,SAAS0G,EAAEmJ,UAAUhH,EAAEjB,EAAElB,EAAEoJ,KAAKpK,GAAG,OAAOkC,IAAIiB,EAAEnC,EAAEmJ,UAAUnJ,IAAI,GAAE,QAAQkB,EAAE,GAAGlB,EAAE9G,QAAE,IAASgI,EAAE,GAAGlB,EAAEoI,QAAE,IAASlH,EAAE,IAAI,GAAEmI,KAAKnI,EAAE,MAAMhB,EAAEoI,OAAO,KAAKpH,EAAE,GAAG,MAAMlB,EAAEqI,SAAG,IAASnH,EAAE,KAAKlB,EAAEqI,IAAGrI,IAAIqI,GAAE,MAAMnH,EAAE,IAAIlB,EAAEE,GAAG,GAAEe,GAAG,QAAG,IAASC,EAAE,GAAGD,GAAG,GAAGA,EAAEjB,EAAEmJ,UAAUjI,EAAE,GAAG5H,OAAOqH,EAAEO,EAAE,GAAGlB,OAAE,IAASkB,EAAE,GAAGmH,GAAE,MAAMnH,EAAE,GAAGqH,GAAE,IAAGvI,IAAIuI,IAAGvI,IAAI,GAAEA,EAAEqI,GAAErI,IAAI9G,IAAG8G,IAAIoI,GAAEpI,EAAE,IAAGA,EAAEqI,GAAEnI,OAAE,GAAQ,MAAMyI,EAAE3I,IAAIqI,IAAG/I,EAAEgC,EAAE,GAAGjI,WAAW,MAAM,IAAI,GAAGwH,GAAGb,IAAI,GAAEhB,EAAE,EAAEiC,GAAG,GAAG/B,EAAErF,KAAK8G,GAAG3B,EAAEiJ,MAAM,EAAEhH,GAAG,EAAEjC,EAAEiJ,MAAMhH,GAAG,EAAE0H,GAAG3J,EAAE,IAAI,IAAIiC,EAAEK,EAAEqH,EAAE,CAAC,MAAM,CAACM,GAAE3J,EAAEuB,GAAGvB,EAAEN,IAAI,QAAQ,IAAIsC,EAAE,SAAS,IAAIA,EAAE,UAAU,KAAKpC,IAAI,MAAMoK,GAAE,WAAAjK,EAAaoJ,QAAQnJ,EAAEkJ,WAAWxJ,GAAGI,GAAG,IAAIc,EAAEX,KAAKgK,MAAM,GAAG,IAAIvJ,EAAE,EAAEW,EAAE,EAAE,MAAMO,EAAE5B,EAAEhG,OAAO,EAAE2H,EAAE1B,KAAKgK,OAAO/H,EAAEtI,GAAGgQ,GAAE5J,EAAEN,GAAG,GAAGO,KAAK9C,GAAG6M,GAAEtM,cAAcwE,EAAEpC,GAAGoH,GAAEgD,YAAYjK,KAAK9C,GAAGgN,QAAQ,IAAIzK,GAAG,IAAIA,EAAE,CAAC,MAAMM,EAAEC,KAAK9C,GAAGgN,QAAQC,WAAWpK,EAAEqK,eAAerK,EAAEsK,WAAW,CAAC,KAAK,QAAQ1J,EAAEsG,GAAEqD,aAAa5I,EAAE3H,OAAO4H,GAAG,CAAC,GAAG,IAAIhB,EAAE4J,SAAS,CAAC,GAAG5J,EAAE6J,gBAAgB,IAAI,MAAMzK,KAAKY,EAAE8J,oBAAoB,GAAG1K,EAAE2K,SAAS,GAAG,CAAC,MAAM3I,EAAEpI,EAAEyH,KAAK3B,EAAEkB,EAAEgK,aAAa5K,GAAGtG,MAAM,GAAG2E,EAAE,eAAeyL,KAAK9H,GAAGL,EAAEpH,KAAK,CAAC8H,KAAK,EAAEwI,MAAMnK,EAAE9C,KAAKS,EAAE,GAAG8K,QAAQzJ,EAAEoL,KAAK,MAAMzM,EAAE,GAAG0M,GAAE,MAAM1M,EAAE,GAAG2M,GAAE,MAAM3M,EAAE,GAAG4M,GAAEC,KAAItK,EAAEmG,gBAAgB/G,EAAE,MAAMA,EAAEjG,WAAW,KAAK4H,EAAEpH,KAAK,CAAC8H,KAAK,EAAEwI,MAAMnK,IAAIE,EAAEmG,gBAAgB/G,IAAI,GAAG,GAAE+J,KAAKnJ,EAAEuK,SAAS,CAAC,MAAMnL,EAAEY,EAAE3F,YAAYvB,MAAM,GAAGgG,EAAEM,EAAEhG,OAAO,EAAE,GAAG0F,EAAE,EAAE,CAACkB,EAAE3F,YAAY,EAAE,EAAEuG,YAAY,GAAG,IAAI,IAAIQ,EAAE,EAAEA,EAAEtC,EAAEsC,IAAIpB,EAAEwK,OAAOpL,EAAEgC,GAAG,KAAKkF,GAAEqD,WAAW5I,EAAEpH,KAAK,CAAC8H,KAAK,EAAEwI,QAAQnK,IAAIE,EAAEwK,OAAOpL,EAAEN,GAAG,IAAI,CAAC,CAAC,MAAM,GAAG,IAAIkB,EAAE4J,SAAS,GAAG5J,EAAE5C,OAAO,EAAE2D,EAAEpH,KAAK,CAAC8H,KAAK,EAAEwI,MAAMnK,QAAQ,CAAC,IAAIV,GAAG,EAAE,MAAM,KAAKA,EAAEY,EAAE5C,KAAK1D,QAAQ,EAAE0F,EAAE,KAAK2B,EAAEpH,KAAK,CAAC8H,KAAK,EAAEwI,MAAMnK,IAAIV,GAAG,EAAEhG,OAAO,CAAC,CAAC0G,GAAG,CAAC,CAAC,oBAAOhD,CAAcsC,EAAEgC,GAAG,MAAMtC,EAAE,EAAEhC,cAAc,YAAY,OAAOgC,EAAE2L,UAAUrL,EAAEN,CAAC,EAAE,SAAS,GAAEM,EAAEgC,EAAEtC,EAAEM,EAAE3B,GAAG,GAAG2D,IAAIsH,GAAE,OAAOtH,EAAE,IAAIhB,OAAE,IAAS3C,EAAEqB,EAAE4L,OAAOjN,GAAGqB,EAAE6L,KAAK,MAAM3L,EAAE,EAAEoC,QAAG,EAAOA,EAAEwJ,gBAAgB,OAAOxK,GAAGjB,cAAcH,IAAIoB,GAAGyK,QAAO,QAAI,IAAS7L,EAAEoB,OAAE,GAAQA,EAAE,IAAIpB,EAAEI,GAAGgB,EAAE0K,KAAK1L,EAAEN,EAAErB,SAAI,IAASA,GAAGqB,EAAE4L,OAAO,IAAIjN,GAAG2C,EAAEtB,EAAE6L,KAAKvK,QAAG,IAASA,IAAIgB,EAAE,GAAEhC,EAAEgB,EAAE2K,KAAK3L,EAAEgC,EAAEoH,QAAQpI,EAAE3C,IAAI2D,CAAC,CAAC,MAAM4J,GAAE,WAAA7L,CAAYC,EAAEgC,GAAG/B,KAAK4L,KAAK,GAAG5L,KAAK6L,UAAK,EAAO7L,KAAK8L,KAAK/L,EAAEC,KAAK+L,KAAKhK,CAAC,CAAC,cAAIiK,GAAa,OAAOhM,KAAK+L,KAAKC,UAAU,CAAC,QAAIC,GAAO,OAAOjM,KAAK+L,KAAKE,IAAI,CAAC,CAAAtK,CAAE5B,GAAG,MAAM7C,IAAIgN,QAAQnI,GAAGiI,MAAMvK,GAAGO,KAAK8L,KAAK1N,GAAG2B,GAAGmM,eAAe,GAAGC,WAAWpK,GAAE,GAAIkF,GAAEgD,YAAY7L,EAAE,IAAI2C,EAAEkG,GAAEqD,WAAW3K,EAAE,EAAEE,EAAE,EAAEyB,EAAE7B,EAAE,GAAG,UAAK,IAAS6B,GAAG,CAAC,GAAG3B,IAAI2B,EAAEsJ,MAAM,CAAC,IAAI7I,EAAE,IAAIT,EAAEc,KAAKL,EAAE,IAAIqK,GAAErL,EAAEA,EAAEsL,YAAYrM,KAAKD,GAAG,IAAIuB,EAAEc,KAAKL,EAAE,IAAIT,EAAEuJ,KAAK9J,EAAEO,EAAE3D,KAAK2D,EAAE4H,QAAQlJ,KAAKD,GAAG,IAAIuB,EAAEc,OAAOL,EAAE,IAAIuK,GAAEvL,EAAEf,KAAKD,IAAIC,KAAK4L,KAAKtR,KAAKyH,GAAGT,EAAE7B,IAAII,EAAE,CAACF,IAAI2B,GAAGsJ,QAAQ7J,EAAEkG,GAAEqD,WAAW3K,IAAI,CAAC,OAAOsH,GAAEgD,YAAY,EAAE7L,CAAC,CAAC,CAAAoD,CAAEzB,GAAG,IAAIgC,EAAE,EAAE,IAAI,MAAMtC,KAAKO,KAAK4L,UAAK,IAASnM,SAAI,IAASA,EAAEyJ,SAASzJ,EAAE8M,KAAKxM,EAAEN,EAAEsC,GAAGA,GAAGtC,EAAEyJ,QAAQnP,OAAO,GAAG0F,EAAE8M,KAAKxM,EAAEgC,KAAKA,GAAG,EAAE,MAAMqK,GAAE,QAAIH,GAAO,OAAOjM,KAAK+L,MAAME,MAAMjM,KAAKwM,IAAI,CAAC,WAAA1M,CAAYC,EAAEgC,EAAEtC,EAAErB,GAAG4B,KAAKoC,KAAK,EAAEpC,KAAKyM,KAAKlD,GAAEvJ,KAAK6L,UAAK,EAAO7L,KAAK0M,KAAK3M,EAAEC,KAAK2M,KAAK5K,EAAE/B,KAAK+L,KAAKtM,EAAEO,KAAK4M,QAAQxO,EAAE4B,KAAKwM,KAAKpO,GAAGwH,cAAa,CAAE,CAAC,cAAIoG,GAAa,IAAIjM,EAAEC,KAAK0M,KAAKV,WAAW,MAAMjK,EAAE/B,KAAK+L,KAAK,YAAO,IAAShK,GAAG,KAAKhC,GAAGwK,WAAWxK,EAAEgC,EAAEiK,YAAYjM,CAAC,CAAC,aAAI8M,GAAY,OAAO7M,KAAK0M,IAAI,CAAC,WAAII,GAAU,OAAO9M,KAAK2M,IAAI,CAAC,IAAAJ,CAAKxM,EAAEgC,EAAE/B,MAAMD,EAAE,GAAEC,KAAKD,EAAEgC,GAAG,EAAEhC,GAAGA,IAAIwJ,IAAG,MAAMxJ,GAAG,KAAKA,GAAGC,KAAKyM,OAAOlD,IAAGvJ,KAAK+M,OAAO/M,KAAKyM,KAAKlD,IAAGxJ,IAAIC,KAAKyM,MAAM1M,IAAIsJ,IAAGrJ,KAAK6I,EAAE9I,QAAG,IAASA,EAAEkJ,WAAWjJ,KAAKrF,EAAEoF,QAAG,IAASA,EAAEwK,SAASvK,KAAKqJ,EAAEtJ,GAAG,EAAEA,GAAGC,KAAKiL,EAAElL,GAAGC,KAAK6I,EAAE9I,EAAE,CAAC,CAAAiN,CAAEjN,GAAG,OAAOC,KAAK0M,KAAKV,WAAWiB,aAAalN,EAAEC,KAAK2M,KAAK,CAAC,CAAAtD,CAAEtJ,GAAGC,KAAKyM,OAAO1M,IAAIC,KAAK+M,OAAO/M,KAAKyM,KAAKzM,KAAKgN,EAAEjN,GAAG,CAAC,CAAA8I,CAAE9I,GAAGC,KAAKyM,OAAOlD,IAAG,EAAEvJ,KAAKyM,MAAMzM,KAAK0M,KAAKL,YAAYtO,KAAKgC,EAAEC,KAAKqJ,EAAE,EAAE6D,eAAenN,IAAIC,KAAKyM,KAAK1M,CAAC,CAAC,CAAApF,CAAEoF,GAAG,MAAMoJ,OAAOpH,EAAEkH,WAAWxJ,GAAGM,EAAE3B,EAAE,iBAAiBqB,EAAEO,KAAKmN,KAAKpN,SAAI,IAASN,EAAEvC,KAAKuC,EAAEvC,GAAG6M,GAAEtM,cAAciM,GAAEjK,EAAEsB,EAAEtB,EAAEsB,EAAE,IAAIf,KAAK4M,UAAUnN,GAAG,GAAGO,KAAKyM,MAAMX,OAAO1N,EAAE4B,KAAKyM,KAAKjL,EAAEO,OAAO,CAAC,MAAMhC,EAAE,IAAI4L,GAAEvN,EAAE4B,MAAMP,EAAEM,EAAE4B,EAAE3B,KAAK4M,SAAS7M,EAAEyB,EAAEO,GAAG/B,KAAKqJ,EAAE5J,GAAGO,KAAKyM,KAAK1M,CAAC,CAAC,CAAC,IAAAoN,CAAKpN,GAAG,IAAIgC,EAAEyH,GAAEnJ,IAAIN,EAAEmJ,SAAS,YAAO,IAASnH,GAAGyH,GAAEjJ,IAAIR,EAAEmJ,QAAQnH,EAAE,IAAIgI,GAAEhK,IAAIgC,CAAC,CAAC,CAAAkJ,CAAElL,GAAG,EAAEC,KAAKyM,QAAQzM,KAAKyM,KAAK,GAAGzM,KAAK+M,QAAQ,MAAMhL,EAAE/B,KAAKyM,KAAK,IAAIhN,EAAErB,EAAE,EAAE,IAAI,MAAM2C,KAAKhB,EAAE3B,IAAI2D,EAAEhI,OAAOgI,EAAEzH,KAAKmF,EAAE,IAAI2M,GAAEpM,KAAKgN,EAAE,KAAKhN,KAAKgN,EAAE,KAAKhN,KAAKA,KAAK4M,UAAUnN,EAAEsC,EAAE3D,GAAGqB,EAAE8M,KAAKxL,GAAG3C,IAAIA,EAAE2D,EAAEhI,SAASiG,KAAK+M,KAAKtN,GAAGA,EAAEkN,KAAKN,YAAYjO,GAAG2D,EAAEhI,OAAOqE,EAAE,CAAC,IAAA2O,CAAKhN,EAAEC,KAAK0M,KAAKL,YAAYtK,GAAG,IAAI/B,KAAKoN,QAAO,GAAG,EAAGrL,GAAGhC,IAAIC,KAAK2M,MAAM,CAAC,MAAM5K,EAAEhC,EAAEsM,YAAYtM,EAAEsN,SAAStN,EAAEgC,CAAC,CAAC,CAAC,YAAAuL,CAAavN,QAAG,IAASC,KAAK+L,OAAO/L,KAAKwM,KAAKzM,EAAEC,KAAKoN,OAAOrN,GAAG,EAAE,MAAMkL,GAAE,WAAIC,GAAU,OAAOlL,KAAKuN,QAAQrC,OAAO,CAAC,QAAIe,GAAO,OAAOjM,KAAK+L,KAAKE,IAAI,CAAC,WAAAnM,CAAYC,EAAEgC,EAAEtC,EAAErB,EAAE2C,GAAGf,KAAKoC,KAAK,EAAEpC,KAAKyM,KAAKlD,GAAEvJ,KAAK6L,UAAK,EAAO7L,KAAKuN,QAAQxN,EAAEC,KAAKrC,KAAKoE,EAAE/B,KAAK+L,KAAK3N,EAAE4B,KAAK4M,QAAQ7L,EAAEtB,EAAE1F,OAAO,GAAG,KAAK0F,EAAE,IAAI,KAAKA,EAAE,IAAIO,KAAKyM,KAAK5P,MAAM4C,EAAE1F,OAAO,GAAGyT,KAAK,IAAInL,QAAQrC,KAAKkJ,QAAQzJ,GAAGO,KAAKyM,KAAKlD,EAAC,CAAC,IAAAgD,CAAKxM,EAAEgC,EAAE/B,KAAKP,EAAErB,GAAG,MAAM2C,EAAEf,KAAKkJ,QAAQ,IAAIvJ,GAAE,EAAG,QAAG,IAASoB,EAAEhB,EAAE,GAAEC,KAAKD,EAAEgC,EAAE,GAAGpC,GAAG,EAAEI,IAAIA,IAAIC,KAAKyM,MAAM1M,IAAIsJ,GAAE1J,IAAIK,KAAKyM,KAAK1M,OAAO,CAAC,MAAM3B,EAAE2B,EAAE,IAAIF,EAAEc,EAAE,IAAIZ,EAAEgB,EAAE,GAAGlB,EAAE,EAAEA,EAAEkB,EAAEhH,OAAO,EAAE8F,IAAIc,EAAE,GAAEX,KAAK5B,EAAEqB,EAAEI,GAAGkC,EAAElC,GAAGc,IAAI0I,KAAI1I,EAAEX,KAAKyM,KAAK5M,IAAIF,KAAK,EAAEgB,IAAIA,IAAIX,KAAKyM,KAAK5M,GAAGc,IAAI4I,GAAExJ,EAAEwJ,GAAExJ,IAAIwJ,KAAIxJ,IAAIY,GAAG,IAAII,EAAElB,EAAE,IAAIG,KAAKyM,KAAK5M,GAAGc,CAAC,CAAChB,IAAIvB,GAAG4B,KAAKyN,EAAE1N,EAAE,CAAC,CAAA0N,CAAE1N,GAAGA,IAAIwJ,GAAEvJ,KAAKuN,QAAQzG,gBAAgB9G,KAAKrC,MAAMqC,KAAKuN,QAAQhH,aAAavG,KAAKrC,KAAKoC,GAAG,GAAG,EAAE,MAAM+K,WAAUG,GAAE,WAAAnL,GAAc8E,SAASvJ,WAAW2E,KAAKoC,KAAK,CAAC,CAAC,CAAAqL,CAAE1N,GAAGC,KAAKuN,QAAQvN,KAAKrC,MAAMoC,IAAIwJ,QAAE,EAAOxJ,CAAC,EAAE,MAAMgL,WAAUE,GAAE,WAAAnL,GAAc8E,SAASvJ,WAAW2E,KAAKoC,KAAK,CAAC,CAAC,CAAAqL,CAAE1N,GAAGC,KAAKuN,QAAQG,gBAAgB1N,KAAKrC,OAAOoC,GAAGA,IAAIwJ,GAAE,EAAE,MAAMyB,WAAUC,GAAE,WAAAnL,CAAYC,EAAEgC,EAAEtC,EAAErB,EAAE2C,GAAG6D,MAAM7E,EAAEgC,EAAEtC,EAAErB,EAAE2C,GAAGf,KAAKoC,KAAK,CAAC,CAAC,IAAAmK,CAAKxM,EAAEgC,EAAE/B,MAAM,IAAID,EAAE,GAAEC,KAAKD,EAAEgC,EAAE,IAAIwH,MAAKF,GAAE,OAAO,MAAM5J,EAAEO,KAAKyM,KAAKrO,EAAE2B,IAAIwJ,IAAG9J,IAAI8J,IAAGxJ,EAAE4N,UAAUlO,EAAEkO,SAAS5N,EAAE6N,OAAOnO,EAAEmO,MAAM7N,EAAE8N,UAAUpO,EAAEoO,QAAQ9M,EAAEhB,IAAIwJ,KAAI9J,IAAI8J,IAAGnL,GAAGA,GAAG4B,KAAKuN,QAAQO,oBAAoB9N,KAAKrC,KAAKqC,KAAKP,GAAGsB,GAAGf,KAAKuN,QAAQQ,iBAAiB/N,KAAKrC,KAAKqC,KAAKD,GAAGC,KAAKyM,KAAK1M,CAAC,CAAC,WAAAiO,CAAYjO,GAAG,mBAAmBC,KAAKyM,KAAKzM,KAAKyM,KAAK7I,KAAK5D,KAAK4M,SAASqB,MAAMjO,KAAKuN,QAAQxN,GAAGC,KAAKyM,KAAKuB,YAAYjO,EAAE,EAAE,MAAMuM,GAAE,WAAAxM,CAAYC,EAAEgC,EAAEtC,GAAGO,KAAKuN,QAAQxN,EAAEC,KAAKoC,KAAK,EAAEpC,KAAK6L,UAAK,EAAO7L,KAAK+L,KAAKhK,EAAE/B,KAAK4M,QAAQnN,CAAC,CAAC,QAAIwM,GAAO,OAAOjM,KAAK+L,KAAKE,IAAI,CAAC,IAAAM,CAAKxM,GAAG,GAAEC,KAAKD,EAAE,EAAE,MAAMmO,GAAE,CAACvC,EAAE,EAAEjC,EAAE,EAAEF,EAAE,EAAEvC,EAAE,EAAE+D,EAAErB,GAAEyC,EAAET,GAAEwC,EAAE,EAAExE,EAAE,GAAEoB,EAAEqB,GAAEtB,EAAEG,GAAElB,EAAEgB,GAAEqD,EAAEpD,GAAEqD,EAAEvD,GAAEwD,EAAEhC,IAAGmB,GAAE,EAAEc,uBAAuBd,KAAI1D,GAAEqC,KAAI,EAAEoC,kBAAkB,IAAIlU,KAAK,SAAS,MCAvuN,GAAE4E,WAAW,MAAM,WAAU,EAAE,WAAAY,GAAc8E,SAASvJ,WAAW2E,KAAKyO,cAAc,CAACR,KAAKjO,MAAMA,KAAK0O,UAAK,CAAM,CAAC,gBAAAzI,GAAmB,MAAMlG,EAAE6E,MAAMqB,mBAAmB,OAAOjG,KAAKyO,cAAcE,eAAe5O,EAAEoK,WAAWpK,CAAC,CAAC,MAAA2H,CAAO3H,GAAG,MAAMY,EAAEX,KAAK4O,SAAS5O,KAAK+E,aAAa/E,KAAKyO,cAAc7I,YAAY5F,KAAK4F,aAAahB,MAAM8C,OAAO3H,GAAGC,KAAK0O,KDA05M,EAAC3O,EAAEgC,EAAEtC,KAAK,MAAMrB,EAAEqB,GAAGkP,cAAc5M,EAAE,IAAIhB,EAAE3C,EAAEyQ,WAAW,QAAG,IAAS9N,EAAE,CAAC,MAAMhB,EAAEN,GAAGkP,cAAc,KAAKvQ,EAAEyQ,WAAW9N,EAAE,IAAIqL,GAAErK,EAAEkL,aAAa,IAAIlN,GAAGA,OAAE,EAAON,GAAG,CAAC,EAAE,CAAC,OAAOsB,EAAEwL,KAAKxM,GAAGgB,GCAtkN,CAAEJ,EAAEX,KAAK2F,WAAW3F,KAAKyO,cAAc,CAAC,iBAAAjI,GAAoB5B,MAAM4B,oBAAoBxG,KAAK0O,MAAMpB,cAAa,EAAG,CAAC,oBAAA7G,GAAuB7B,MAAM6B,uBAAuBzG,KAAK0O,MAAMpB,cAAa,EAAG,CAAC,MAAAsB,GAAS,OAAO,EAAC,EAAE,GAAEE,eAAc,EAAG,GAAa,WAAE,EAAG,GAAEC,2BAA2B,CAACC,WAAW,KAAI,MAAM,GAAE,GAAEC,0BAA0B,KAAI,CAACD,WAAW,MAA0D,GAAEE,qBAAqB,IAAI5U,KAAK;;;;;;ACAxxB,MAAM,GAAa,EAAb,GAAqB,EAAoD,GAAEyF,GAAG,IAAI3B,KAAI,CAAEmN,gBAAgBxL,EAAEoJ,OAAO/K,IAAI,MAAM,GAAE,WAAA0B,CAAYC,GAAG,CAAC,QAAIkM,GAAO,OAAOjM,KAAK+L,KAAKE,IAAI,CAAC,IAAAR,CAAK1L,EAAE3B,EAAE2D,GAAG/B,KAAKmP,KAAKpP,EAAEC,KAAK+L,KAAK3N,EAAE4B,KAAKoP,KAAKrN,CAAC,CAAC,IAAA2J,CAAK3L,EAAE3B,GAAG,OAAO4B,KAAK0H,OAAO3H,EAAE3B,EAAE,CAAC,MAAAsJ,CAAO3H,EAAE3B,GAAG,OAAO4B,KAAK4O,UAAUxQ,EAAE;;;;;;ACAvS,MAAM2M,EAAE,IAAG,GAA8P,GAAE,IAAIvN,SAASmL,cAAc,IAAI,GAAE,CAAChJ,EAAEoC,EAAElC,KAAK,MAAMzB,EAAEuB,EAAE+M,KAAKV,WAAW1K,OAAE,IAASS,EAAEpC,EAAEgN,KAAK5K,EAAE2K,KAAK,QAAG,IAAS7M,EAAE,CAAC,MAAMkC,EAAE3D,EAAE6O,aAAa,KAAI3L,GAAGI,EAAEtD,EAAE6O,aAAa,KAAI3L,GAAGzB,EAAE,IAAI,GAAEkC,EAAEL,EAAE/B,EAAEA,EAAEiN,QAAQ,KAAK,CAAC,MAAM7M,EAAEF,EAAE8M,KAAKN,YAAYtK,EAAElC,EAAEkM,KAAKrK,EAAEK,IAAIpC,EAAE,GAAG+B,EAAE,CAAC,IAAI3B,EAAEF,EAAEwP,OAAO1P,GAAGE,EAAEkM,KAAKpM,OAAE,IAASE,EAAEuN,OAAOrN,EAAEJ,EAAEsM,QAAQlK,EAAEkK,MAAMpM,EAAEuN,KAAKrN,EAAE,CAAC,GAAGA,IAAIuB,GAAGI,EAAE,CAAC,IAAI/B,EAAEE,EAAE6M,KAAK,KAAK/M,IAAII,GAAG,CAAC,MAAMA,EAAEJ,EAAE0M,YAAYjO,EAAE6O,aAAatN,EAAE2B,GAAG3B,EAAEI,CAAC,CAAC,CAAC,CAAC,OAAOF,GAAG,GAAE,CAACF,EAAEI,EAAEgC,EAAEpC,KAAKA,EAAE4M,KAAKxM,EAAEgC,GAAGpC,GAAG,GAAE,CAAC,EAAkC,GAAEA,IAAIA,EAAEoN,OAAOpN,EAAE+M,KAAKW,UCCjwB,GAAE,CAACjP,EAAEqB,EAAEM,KAAK,MAAMY,EAAE,IAAIsD,IAAI,IAAI,IAAI3C,EAAE7B,EAAE6B,GAAGvB,EAAEuB,IAAIX,EAAEJ,IAAInC,EAAEkD,GAAGA,GAAG,OAAOX,GAAG,GAAE,GAAE,cAAc,GAAE,WAAAb,CAAY1B,GAAG,GAAGwG,MAAMxG,GAAGA,EAAEgE,OAAO,GAAQ,MAAMlC,MAAM,gDAAgD,CAAC,EAAAoP,CAAGlR,EAAEqB,EAAEM,GAAG,IAAIY,OAAE,IAASZ,EAAEA,EAAEN,OAAE,IAASA,IAAIkB,EAAElB,GAAG,MAAM6B,EAAE,GAAG3B,EAAE,GAAG,IAAIoC,EAAE,EAAE,IAAI,MAAMtC,KAAKrB,EAAEkD,EAAES,GAAGpB,EAAEA,EAAElB,EAAEsC,GAAGA,EAAEpC,EAAEoC,GAAGhC,EAAEN,EAAEsC,GAAGA,IAAI,MAAM,CAACoH,OAAOxJ,EAAEwD,KAAK7B,EAAE,CAAC,MAAAsN,CAAOxQ,EAAEqB,EAAEM,GAAG,OAAOC,KAAKsP,GAAGlR,EAAEqB,EAAEM,GAAGoJ,MAAM,CAAC,MAAAzB,CAAOjI,GAAGM,EAAEY,EAAEF,IAAI,MAAMiB,EDDsU/B,IAAGA,EAAE8M,KCCzU,CAAEhN,IAAI0J,OAAO3H,EAAE2B,KAAK/B,GAAGpB,KAAKsP,GAAGvP,EAAEY,EAAEF,GAAG,IAAI5D,MAAM2H,QAAQ9C,GAAG,OAAO1B,KAAKuP,GAAGnO,EAAEI,EAAE,MAAMT,EAAEf,KAAKuP,KAAK,GAAG5V,EAAE,GAAG,IAAImP,EAAElG,EAAEwG,EAAE,EAAEqE,EAAE/L,EAAE3H,OAAO,EAAEkR,EAAE,EAAEuE,EAAEhO,EAAEzH,OAAO,EAAE,KAAKqP,GAAGqE,GAAGxC,GAAGuE,GAAG,GAAG,OAAO9N,EAAE0H,GAAGA,SAAS,GAAG,OAAO1H,EAAE+L,GAAGA,SAAS,GAAG1M,EAAEqI,KAAKhI,EAAE6J,GAAGtR,EAAEsR,GAAG,GAAEvJ,EAAE0H,GAAG5H,EAAEyJ,IAAI7B,IAAI6B,SAAS,GAAGlK,EAAE0M,KAAKrM,EAAEoO,GAAG7V,EAAE6V,GAAG,GAAE9N,EAAE+L,GAAGjM,EAAEgO,IAAI/B,IAAI+B,SAAS,GAAGzO,EAAEqI,KAAKhI,EAAEoO,GAAG7V,EAAE6V,GAAG,GAAE9N,EAAE0H,GAAG5H,EAAEgO,IAAI,GAAE/P,EAAE9F,EAAE6V,EAAE,GAAG9N,EAAE0H,IAAIA,IAAIoG,SAAS,GAAGzO,EAAE0M,KAAKrM,EAAE6J,GAAGtR,EAAEsR,GAAG,GAAEvJ,EAAE+L,GAAGjM,EAAEyJ,IAAI,GAAExL,EAAEiC,EAAE0H,GAAG1H,EAAE+L,IAAIA,IAAIxC,SAAS,QAAG,IAASnC,IAAIA,EAAE,GAAE1H,EAAE6J,EAAEuE,GAAG5M,EAAE,GAAE7B,EAAEqI,EAAEqE,IAAI3E,EAAElK,IAAImC,EAAEqI,IAAI,GAAGN,EAAElK,IAAImC,EAAE0M,IAAI,CAAC,MAAMrP,EAAEwE,EAAEvC,IAAIe,EAAE6J,IAAIlL,OAAE,IAAS3B,EAAEsD,EAAEtD,GAAG,KAAK,GAAG,OAAO2B,EAAE,CAAC,MAAM3B,EAAE,GAAEqB,EAAEiC,EAAE0H,IAAI,GAAEhL,EAAEoD,EAAEyJ,IAAItR,EAAEsR,GAAG7M,CAAC,MAAMzE,EAAEsR,GAAG,GAAElL,EAAEyB,EAAEyJ,IAAI,GAAExL,EAAEiC,EAAE0H,GAAGrJ,GAAG2B,EAAEtD,GAAG,KAAK6M,GAAG,MAAM,GAAEvJ,EAAE+L,IAAIA,SAAS,GAAE/L,EAAE0H,IAAIA,IAAI,KAAK6B,GAAGuE,GAAG,CAAC,MAAMpR,EAAE,GAAEqB,EAAE9F,EAAE6V,EAAE,IAAI,GAAEpR,EAAEoD,EAAEyJ,IAAItR,EAAEsR,KAAK7M,CAAC,CAAC,KAAKgL,GAAGqE,GAAG,CAAC,MAAMrP,EAAEsD,EAAE0H,KAAK,OAAOhL,GAAG,GAAEA,EAAE,CAAC,OAAO4B,KAAKuP,GAAGnO,EDDrd,EAACzB,EAAEI,EAAE,MAAIJ,EAAE8M,KAAK1M,GCCuc,CAAEN,EAAE9F,GAAG,EAAC,I,6HCclrC,MAAM8V,WAAsBT,GAexBlP,WAAAA,GACI8E,QACA5E,KAAKhG,WAAa,GAClBgG,KAAK0P,QAAU,GACf1P,KAAKzH,uBAAwB,EAC7ByH,KAAK2P,qBAAsB,EAC3B3P,KAAK4P,QAAU,GACf5P,KAAK6P,aAAe7N,OAAO3J,aAAaC,QAAQ,0BAA4B,EAChF,CACAkO,iBAAAA,GACI5B,MAAM4B,oBACNsJ,OAAO/B,iBAAiB,0BAA2B/N,KAAK+P,eAAeC,KAAKhQ,MAChF,CAEAyG,oBAAAA,GACI7B,MAAM6B,uBACNqJ,OAAOhC,oBAAoB,0BAA2B9N,KAAK+P,eAAeC,KAAKhQ,MACnF,CAEA+P,cAAAA,GACI/P,KAAK6P,aAAe7N,OAAO3J,aAAaC,QAAQ,0BAA4B,EAChF,CACU2N,gBAAAA,GACN,OAAOjG,IACX,CACA4O,MAAAA,GACI9T,QAAQC,IAAI,wBACZD,QAAQC,IAAI,OAAQiF,MACpB,MAAMiQ,EAAU,CACZ,CACItS,KAAM,OACNuS,OAAQlQ,KAAKmQ,eAEjB,CACIxS,KAAM,SACNuS,OAAQlQ,KAAKoQ,mBAEjB,CACIzS,KAAM,SACNuS,OAAQlQ,KAAKqQ,2BAEjB,CACI1S,KAAM,SACNuS,OAAQlQ,KAAKsQ,wBAEjB,CACI3S,KAAM,OACNuS,OAAQlQ,KAAKuQ,yBAEjB,CACI5S,KAAM,OACNuS,OAAQlQ,KAAKwQ,mBAGrB,OAAOC,GAAIC,KAAAA,GAAAC,GAAA,8vBAGiC3Q,KAAKhG,WACRgG,KAAK0P,QACF1P,KAAK2P,oBAAsB,IAAM,IACrC3P,KAAKzH,sBAAwB,IAAM,IAC5ByH,KAAK6P,aAKgB7P,KAAK4Q,oBAA8B5Q,KAAK4P,QAG1GiB,GACEZ,EACAa,IAAA,IAAC,KAAEnT,GAAMmT,EAAA,OAAKnT,GACdoT,IAAA,IAAC,KAAEpT,EAAI,OAAEuS,GAAQa,EAAA,OAAKN,GAAIO,KAAAA,GAAAL,GAAA,mJAC8DhT,EAAiBuS,EAAiBvS,KAKlI,CACAiT,mBAAAA,CAAoBK,GAChBnW,QAAQC,IAAI,sBAAuBkW,GACnC,MAAMvW,EAAWuW,EAAMC,OAEjBhW,EAAQR,EAASQ,MAClBzB,MAAM,SACNC,IAAKC,GAAMA,EAAEC,QACbC,OAAQF,GAAMA,EAAEI,OAAS,GAAKJ,EAAEG,WAAW,WAIhD,GAFAkG,KAAK4P,QAAU1U,EAAMT,KAAK,MAC1BC,EAASQ,MAAQ8E,KAAK4P,QACD,IAAjB1U,EAAMnB,OAEN,YADAS,EAAQtC,EAAY8H,KAAK4P,SAG7B,MAAMuB,EAAYjW,EAAM,GACxBX,EAAY,qBAAsB4W,GAClC3W,EAAQtC,EAAY8H,KAAK4P,QAE7B,CACAU,sBAAAA,GACIxV,QAAQC,IAAI,0BACZc,GACJ,CAEA,uBAAMuU,GACFtV,QAAQC,IAAI,qBACZ,MAAMxB,QAAgBd,UAChBwD,EAAiB1C,EAC3B,CACA4W,aAAAA,GACIrV,QAAQC,IAAI,iBACZ,MAAMG,EAAQ8E,KAAK4P,QACnB,GAAqB,IAAjB1U,EAAMnB,OAEN,YADAS,EAAQtC,EAAYgD,GAGxB,MAAMiW,EAAYjW,EAAM,GACxBX,EAAY,qBAAsB4W,GAClC3W,EAAQtC,EAAY8H,KAAK4P,QAE7B,CACAS,yBAAAA,GACIvV,QAAQC,IAAI,6BACZ5C,EAAMC,aAAeD,EAAMC,YAC3BC,aAAa+Y,QAAQ,yBAA0BjZ,EAAMC,YAAYoI,YACjER,KAAK2P,oBAAsBxX,EAAMC,WACrC,CACAmY,uBAAAA,GACIzV,QAAQC,IAAI,2BACZ5C,EAAMI,uBAAyBJ,EAAMI,sBACrCF,aAAa+Y,QAAQ,qBAAsBjZ,EAAMI,sBAAsBiI,YACvER,KAAKzH,sBAAwBJ,EAAMI,qBACvC,CACAiY,gBAAAA,GACIxQ,KAAK6P,aAAe,EACpBxX,aAAa+Y,QAAQ,wBAAyB,IAClD,G,mbACHC,CAxJK5B,GAAa,aACK,CAChBzV,WAAY,CAAEoI,KAAMC,OAAQE,SAAS,GACrCmN,QAAS,CAAEtN,KAAMC,OAAQE,SAAS,GAClChK,sBAAuB,CAAE6J,KAAMP,QAASU,SAAS,GACjDoN,oBAAqB,CAAEvN,KAAMP,QAASU,SAAS,GAC/CqN,QAAS,CAAExN,KAAMC,OAAQE,SAAS,GAClCsN,aAAc,CAAEzN,KAAMJ,OAAQO,SAAS,KAmJ/C+O,eAAeC,OAAO,iBAAkB9B;;;;;;ACzKrC,MAAM,GAAE,CAAC1N,EAAEhC,KAAK,MAAM3B,EAAE2D,EAAE8J,KAAK,QAAG,IAASzN,EAAE,OAAM,EAAG,IAAI,MAAM2D,KAAK3D,EAAE2D,EAAEyJ,OAAOzL,GAAE,GAAI,GAAEgC,EAAEhC,GAAG,OAAM,GAAI,GAAEgC,IAAI,IAAIhC,EAAE3B,EAAE,EAAE,CAAC,QAAG,KAAU2B,EAAEgC,EAAEgK,MAAM,MAAM3N,EAAE2B,EAAE8L,KAAKzN,EAAE2H,OAAOhE,GAAGA,EAAEhC,CAAC,OAAO,IAAI3B,GAAG4H,OAAO,GAAEjE,IAAI,IAAI,IAAIhC,EAAEA,EAAEgC,EAAEgK,KAAKhK,EAAEhC,EAAE,CAAC,IAAI3B,EAAE2B,EAAE8L,KAAK,QAAG,IAASzN,EAAE2B,EAAE8L,KAAKzN,EAAE,IAAIM,SAAS,GAAGN,EAAEQ,IAAImD,GAAG,MAAM3D,EAAEsH,IAAI3D,GAAG,GAAEhC,EAAE,GAAG,SAAS,GAAEgC,QAAG,IAAS/B,KAAK6L,MAAM,GAAE7L,MAAMA,KAAK+L,KAAKhK,EAAE,GAAE/B,OAAOA,KAAK+L,KAAKhK,CAAC,CAAC,SAAS,GAAEA,EAAEhC,GAAE,EAAG3B,EAAE,GAAG,MAAMuC,EAAEX,KAAKyM,KAAK1L,EAAEf,KAAK6L,KAAK,QAAG,IAAS9K,GAAG,IAAIA,EAAEiF,KAAK,GAAGjG,EAAE,GAAGlD,MAAM2H,QAAQ7D,GAAG,IAAI,IAAIoB,EAAE3D,EAAE2D,EAAEpB,EAAE5G,OAAOgI,IAAI,GAAEpB,EAAEoB,IAAG,GAAI,GAAEpB,EAAEoB,SAAS,MAAMpB,IAAI,GAAEA,GAAE,GAAI,GAAEA,SAAS,GAAEX,KAAK+B,EAAE,CAAC,MAAM,GAAEA,IAAIA,EAAEK,MAAM,KAAUL,EAAEqL,OAAO,GAAErL,EAAEsN,OAAO,KAAI,MAAM,WAAU,GAAE,WAAAvP,GAAc8E,SAASvJ,WAAW2E,KAAK6L,UAAK,CAAM,CAAC,IAAAJ,CAAK1J,EAAEhC,EAAE3B,GAAGwG,MAAM6G,KAAK1J,EAAEhC,EAAE3B,GAAG,GAAE4B,MAAMA,KAAK4F,YAAY7D,EAAEkK,IAAI,CAAC,IAAAT,CAAKzJ,EAAEhC,GAAE,GAAIgC,IAAI/B,KAAK4F,cAAc5F,KAAK4F,YAAY7D,EAAEA,EAAE/B,KAAKwR,gBAAgBxR,KAAKyR,kBAAkB1R,IAAI,GAAEC,KAAK+B,GAAG,GAAE/B,MAAM,CAAC,QAAA0R,CAAS3R,GAAG,GHA9oBJ,SAAG,IAASA,EAAEuJ,QGAmoB,CAAElJ,KAAKmP,MAAMnP,KAAKmP,KAAK5C,KAAKxM,EAAEC,UAAU,CAAC,MAAM+B,EAAE,IAAI/B,KAAKmP,KAAK1C,MAAM1K,EAAE/B,KAAKoP,MAAMrP,EAAEC,KAAKmP,KAAK5C,KAAKxK,EAAE/B,KAAK,EAAE,CAAC,CAAC,YAAAyR,GAAe,CAAC,WAAAD,GAAc;;;;;;ACAhhC,MAAM,GAAE,IAAI,IAAI,GAAE,MAAM,IAAG,MAAM,GAAE,IAAI5R,QAAQ,GAAE,GAAE,cAAc,GAAE,MAAAgP,CAAO7M,GAAG,OAAO,EAAC,CAAC,MAAA2F,CAAO3F,GAAGtC,IAAI,MAAMrB,EAAEqB,IAAIO,KAAK2R,EAAE,OAAOvT,QAAG,IAAS4B,KAAK2R,GAAG3R,KAAK4R,QAAG,IAASxT,GAAG4B,KAAK6R,KAAK7R,KAAK8R,MAAM9R,KAAK2R,EAAElS,EAAEO,KAAK+R,GAAGhQ,EAAE6K,SAASqB,KAAKjO,KAAK4R,GAAG5R,KAAK8R,GAAG/P,EAAEwL,UAAU,EAAC,CAAC,EAAAqE,CAAG7R,GAAG,GAAGC,KAAK4F,cAAc7F,OAAE,GAAQ,mBAAmBC,KAAK2R,EAAE,CAAC,MAAM5P,EAAE/B,KAAK+R,IAAI7S,WAAW,IAAIO,EAAE,GAAEY,IAAI0B,QAAG,IAAStC,IAAIA,EAAE,IAAIG,QAAQ,GAAEW,IAAIwB,EAAEtC,SAAI,IAASA,EAAEY,IAAIL,KAAK2R,IAAI3R,KAAK2R,EAAE/N,KAAK5D,KAAK+R,QAAG,GAAQtS,EAAEc,IAAIP,KAAK2R,EAAE5R,QAAG,IAASA,GAAGC,KAAK2R,EAAE/N,KAAK5D,KAAK+R,GAAGhS,EAAE,MAAMC,KAAK2R,EAAEzW,MAAM6E,CAAC,CAAC,MAAI8R,GAAK,MAAM,mBAAmB7R,KAAK2R,EAAE,GAAEtR,IAAIL,KAAK+R,IAAI7S,aAAamB,IAAIL,KAAK2R,GAAG3R,KAAK2R,GAAGzW,KAAK,CAAC,YAAAuW,GAAezR,KAAK6R,KAAK7R,KAAK8R,IAAI9R,KAAK4R,QAAG,EAAO,CAAC,WAAAJ,GAAcxR,KAAK4R,GAAG5R,KAAK8R,GAAG,ICL1rB,IAAIE,GAAY7Q,OAAON,eAEnBoR,GAAgB,CAACC,EAAK/W,EAAKD,KADT,EAACgX,EAAK/W,EAAKD,KAAUC,KAAO+W,EAAMF,GAAUE,EAAK/W,EAAK,CAAE4I,YAAY,EAAMD,cAAc,EAAMqO,UAAU,EAAMjX,UAAWgX,EAAI/W,GAAOD,GAExJkX,CAAgBF,EAAoB,iBAAR/W,EAAmBA,EAAM,GAAKA,EAAKD,GACxDA,GAMLmX,GAAc,CAACC,EAAQJ,KACzB,GAAI/Q,OAAO+Q,KAASA,EAClB,MAAMK,UAAU,8CAClB,OAAOD,EAAO1T,IAAIsT,IAEhBM,GAAe,CAACN,EAAKI,EAAQpX,KAC/B,GAAIoX,EAAO1T,IAAIsT,GACb,MAAMK,UAAU,qDAClBD,aAAkBG,QAAUH,EAAO5M,IAAIwM,GAAOI,EAAO/R,IAAI2R,EAAKhX,IAE5DwX,GAAkB,CAACR,EAAKI,EAAQ1Z,KAdhB,EAACsZ,EAAKI,EAAQK,KAChC,IAAKL,EAAO1T,IAAIsT,GACd,MAAMK,UAAU,UAAYI,IAa9BC,CAAcV,EAAKI,EAAQ,yBACpB1Z;;;;;;;;AAST,SAASia,GAAczR,EAAGc,GACxB,OAAOf,OAAOP,GAAGQ,EAAGc,EACtB;;;;;;;GAQA,IAAI4Q,GAAiB,KACjBC,IAAsB,EACtBC,GAAQ,EACZ,MAAMC,GAAyBvT,OAAO,UACtC,SAASwT,GAAkBC,GACzB,MAAMC,EAAON,GAEb,OADAA,GAAiBK,EACVC,CACT,CAOA,MAAMC,GAAgB,CACpBC,QAAS,EACTC,eAAgB,EAChBC,OAAO,EACPC,kBAAc,EACdC,6BAAyB,EACzBC,yBAAqB,EACrBC,kBAAmB,EACnBC,sBAAkB,EAClBC,6BAAyB,EACzBC,2BAA2B,EAC3BC,sBAAsB,EACtBC,sBAAuB,KAAM,EAC7BC,uBAAwB,OAExBC,oBAAqB,OAErBC,qBAAsB,QAGxB,SAASC,GAAiBC,GACxB,GAAIvB,GACF,MAAM,IAAI7S,MACa,oBAAdqU,WAA6BA,UAAY,yDAA2D,IAG/G,GAAuB,OAAnBzB,GACF,OAEFA,GAAesB,qBAAqBE,GACpC,MAAME,EAAM1B,GAAec,oBAE3B,GADAa,GAAmB3B,IACf0B,EAAM1B,GAAeW,aAAa1Z,QAAU+Y,GAAeW,aAAae,KAASF,GAC/EI,GAAe5B,IAAiB,CAElC6B,GADsB7B,GAAeW,aAAae,GACD1B,GAAea,oBAAoBa,GACtF,CAEE1B,GAAeW,aAAae,KAASF,IACvCxB,GAAeW,aAAae,GAAOF,EACnCxB,GAAea,oBAAoBa,GAAOE,GAAe5B,IAAkB8B,GAAwBN,EAAMxB,GAAgB0B,GAAO,GAElI1B,GAAeY,wBAAwBc,GAAOF,EAAKhB,OACrD,CAIA,SAASuB,GAA2BP,GAClC,GAAKA,EAAKd,OAASc,EAAKf,iBAAmBP,GAA3C,CAGA,IAAKsB,EAAKL,sBAAsBK,KAsDlC,SAAwCA,GACtCG,GAAmBH,GACnB,IAAK,IAAIvS,EAAI,EAAGA,EAAIuS,EAAKb,aAAa1Z,OAAQgI,IAAK,CACjD,MAAM+S,EAAWR,EAAKb,aAAa1R,GAC7BgT,EAAcT,EAAKZ,wBAAwB3R,GACjD,GAAIgT,IAAgBD,EAASxB,QAC3B,OAAO,EAGT,GADAuB,GAA2BC,GACvBC,IAAgBD,EAASxB,QAC3B,OAAO,CAEX,CACA,OAAO,CACT,CApE4C0B,CAA+BV,GAGvE,OAFAA,EAAKd,OAAQ,OACbc,EAAKf,eAAiBP,IAGxBsB,EAAKJ,uBAAuBI,GAC5BA,EAAKd,OAAQ,EACbc,EAAKf,eAAiBP,EARtB,CASF,CACA,SAASiC,GAAwBX,GAC/B,QAA8B,IAA1BA,EAAKT,iBACP,OAEF,MAAMT,EAAOL,GACbA,IAAsB,EACtB,IACE,IAAK,MAAMI,KAAYmB,EAAKT,iBACrBV,EAASK,OACZ0B,GAAkB/B,EAGxB,CAAE,QACAJ,GAAsBK,CACxB,CACF,CAIA,SAAS8B,GAAkBZ,GACzB,IAAIa,EACJb,EAAKd,OAAQ,EACbyB,GAAwBX,GACW,OAAlCa,EAAKb,EAAKH,sBAAwCgB,EAAGvR,KAAK0Q,EAAKc,SAAWd,EAC7E,CAoCA,SAASM,GAAwBN,EAAMnB,EAAUkC,GAC/C,IAAIF,EAGJ,GAFAG,GAAmBhB,GACnBG,GAAmBH,GACkB,IAAjCA,EAAKT,iBAAiB9Z,OAAc,CACf,OAAtBob,EAAKb,EAAKiB,UAA4BJ,EAAGvR,KAAK0Q,EAAKc,SACpD,IAAK,IAAIrT,EAAI,EAAGA,EAAIuS,EAAKb,aAAa1Z,OAAQgI,IAC5CuS,EAAKX,oBAAoB5R,GAAK6S,GAAwBN,EAAKb,aAAa1R,GAAIuS,EAAMvS,EAEtF,CAEA,OADAuS,EAAKR,wBAAwBxZ,KAAK+a,GAC3Bf,EAAKT,iBAAiBvZ,KAAK6Y,GAAY,CAChD,CACA,SAASwB,GAAkCL,EAAME,GAC/C,IAAIW,EAGJ,GAFAG,GAAmBhB,GACnBG,GAAmBH,GACM,oBAAdC,WAA6BA,WAAaC,GAAOF,EAAKT,iBAAiB9Z,OAChF,MAAM,IAAImG,MACR,0CAA0CsU,yBAA2BF,EAAKT,iBAAiB9Z,qBAG/F,GAAqC,IAAjCua,EAAKT,iBAAiB9Z,OAAc,CACb,OAAxBob,EAAKb,EAAKkB,YAA8BL,EAAGvR,KAAK0Q,EAAKc,SACtD,IAAK,IAAIrT,EAAI,EAAGA,EAAIuS,EAAKb,aAAa1Z,OAAQgI,IAC5C4S,GAAkCL,EAAKb,aAAa1R,GAAIuS,EAAKX,oBAAoB5R,GAErF,CACA,MAAM0T,EAAUnB,EAAKT,iBAAiB9Z,OAAS,EAK/C,GAJAua,EAAKT,iBAAiBW,GAAOF,EAAKT,iBAAiB4B,GACnDnB,EAAKR,wBAAwBU,GAAOF,EAAKR,wBAAwB2B,GACjEnB,EAAKT,iBAAiB9Z,SACtBua,EAAKR,wBAAwB/Z,SACzBya,EAAMF,EAAKT,iBAAiB9Z,OAAQ,CACtC,MAAM2b,EAAcpB,EAAKR,wBAAwBU,GAC3CrB,EAAWmB,EAAKT,iBAAiBW,GACvCC,GAAmBtB,GACnBA,EAASQ,oBAAoB+B,GAAelB,CAC9C,CACF,CACA,SAASE,GAAeJ,GACtB,IAAIa,EACJ,OAAOb,EAAKN,wBAAkF,OAAvDmB,EAAa,MAARb,OAAe,EAASA,EAAKT,uBAA4B,EAASsB,EAAGpb,SAAW,GAAK,CACnI,CACA,SAAS0a,GAAmBH,GAC1BA,EAAKb,eAAiBa,EAAKb,aAAe,IAC1Ca,EAAKX,sBAAwBW,EAAKX,oBAAsB,IACxDW,EAAKZ,0BAA4BY,EAAKZ,wBAA0B,GAClE,CACA,SAAS4B,GAAmBhB,GAC1BA,EAAKT,mBAAqBS,EAAKT,iBAAmB,IAClDS,EAAKR,0BAA4BQ,EAAKR,wBAA0B,GAClE;;;;;;;GAQA,SAAS6B,GAAYrB,GAGnB,GAFAO,GAA2BP,GAC3BD,GAAiBC,GACbA,EAAKpZ,QAAU0a,GACjB,MAAMtB,EAAKjW,MAEb,OAAOiW,EAAKpZ,KACd,CAQA,MAAM2a,GAAwBnW,OAAO,SAC/BoW,GAA4BpW,OAAO,aACnCkW,GAA0BlW,OAAO,WACjCqW,GAAgC,MAC7B,IACF1C,GACHnY,MAAO2a,GACPrC,OAAO,EACPnV,MAAO,KACP2X,MAAOnD,GACPoB,sBAAsBK,GACbA,EAAKpZ,QAAU2a,IAASvB,EAAKpZ,QAAU4a,GAEhD,sBAAA5B,CAAuBI,GACrB,GAAIA,EAAKpZ,QAAU4a,GACjB,MAAM,IAAI5V,MAAM,mCAElB,MAAM+V,EAAW3B,EAAKpZ,MACtBoZ,EAAKpZ,MAAQ4a,GACb,MAAMI,EAjIZ,SAAmC5B,GAEjC,OADAA,IAASA,EAAKV,kBAAoB,GAC3BV,GAAkBoB,EAC3B,CA8H2B6B,CAA0B7B,GAC/C,IAAI8B,EACAC,GAAW,EACf,IACED,EAAW9B,EAAKgC,YAAY1S,KAAK0Q,EAAKc,SAEtCiB,EADcJ,IAAaJ,IAASI,IAAaL,IAC7BtB,EAAK0B,MAAMpS,KAAK0Q,EAAKc,QAASa,EAAUG,EAC9D,CAAE,MAAOG,GACPH,EAAWR,GACXtB,EAAKjW,MAAQkY,CACf,CAAE,SAvIR,SAAkCjC,EAAM4B,GAEtC,GADAhD,GAAkBgD,GACb5B,QAA8B,IAAtBA,EAAKb,mBAAwD,IAA7Ba,EAAKX,0BAAmE,IAAjCW,EAAKZ,wBAAzF,CAGA,GAAIgB,GAAeJ,GACjB,IAAK,IAAIvS,EAAIuS,EAAKV,kBAAmB7R,EAAIuS,EAAKb,aAAa1Z,OAAQgI,IACjE4S,GAAkCL,EAAKb,aAAa1R,GAAIuS,EAAKX,oBAAoB5R,IAGrF,KAAOuS,EAAKb,aAAa1Z,OAASua,EAAKV,mBACrCU,EAAKb,aAAa+C,MAClBlC,EAAKZ,wBAAwB8C,MAC7BlC,EAAKX,oBAAoB6C,KAT3B,CAWF,CAyHQC,CAAyBnC,EAAM4B,EACjC,CACIG,EACF/B,EAAKpZ,MAAQ+a,GAGf3B,EAAKpZ,MAAQkb,EACb9B,EAAKhB,UACP,IAnCkC,GAgDtC,IAAIoD;;;;;;;;AAHJ,WACE,MAAM,IAAIxW,KACZ,EAsBA,SAASyW,KAEP,OADAtC,GAAiBrU,MACVA,KAAK9E,KACd,CACA,SAAS0b,GAAYtC,EAAM8B,IAlM+D,KAA9D,MAAlBtD,QAAyB,EAASA,GAAeiB,4BA2KzD2C,KA2BKpC,EAAK0B,MAAMpS,KAAK0Q,EAAKc,QAASd,EAAKpZ,MAAOkb,KAC7C9B,EAAKpZ,MAAQkb,EAWjB,SAA4B9B,GAC1BA,EAAKhB,UAnPLN,KAqPAiC,GAAwBX,EAC1B;;;;;;;;;;;;;;;;GAdIuC,CAAmBvC,GAEvB,CACA,MAAMwC,GAA8B,MAC3B,IACFzD,GACH2C,MAAOnD,GACP3X,WAAO,IAJyB,GA4BpC,MAAM6b,GAAOrX,OAAO,QACpB,IAAIsX,GACJ,CAAEC,IACA,IAAI9B,EAAI+B,EAAkBC,EAAIC,EAiC9BjC,EAAK4B,GACLG,EAAS,IAAIzE,QAGbwE,EAAQI,QAAW5X,GAAmB,iBAANA,GAAkB4S,GAAY6E,EAAQzX,GACtEwX,EAAQK,MArCR,MACE,WAAAxX,CAAYyX,EAAc3K,EAAU,CAAC,GACnC4F,GAAaxS,KAAMkX,GACnBjF,GAAcjS,KAAMmV,GACpB,MAAMqC;;;;;;;;AA3DZ,SAAsBD,GACpB,MAAMjD,EAAOnT,OAAOoC,OAAOuT,IAC3BxC,EAAKpZ,MAAQqc,EACb,MAAME,EAAS,KACbpD,GAAiBC,GACVA,EAAKpZ,OAGd,OADAuc,EAAOxE,IAAUqB,EACVmD,CACT,CAkDkBC,CAAaH,GACnBjD,EAAOkD,EAAIvE,IAGjB,GAFAjT,KAAK+W,IAAQzC,EACbA,EAAKc,QAAUpV,KACX4M,EAAS,CACX,MAAM+K,EAAS/K,EAAQ+K,OACnBA,IACFrD,EAAK0B,MAAQ2B,GAEfrD,EAAKiB,QAAU3I,EAAQqK,EAAQW,OAAOrC,SACtCjB,EAAKkB,UAAY5I,EAAQqK,EAAQW,OAAOpC,UAC1C,CACF,CACA,GAAAnV,GACE,KAAK,EAAI4W,EAAQI,SAASrX,MACxB,MAAM,IAAIuS,UAAU,sDACtB,OAAOoE,GAAY/S,KAAK5D,KAAK+W,IAC/B,CACA,GAAAxW,CAAI6V,GACF,KAAK,EAAIa,EAAQI,SAASrX,MACxB,MAAM,IAAIuS,UAAU,sDACtB,GAnVGQ,GAoVD,MAAM,IAAI7S,MAAM,2DAGlB0W,GADY5W,KAAK+W,IACAX,EACnB,GAkCFe,EAAKJ,GACLK,EAAU,IAAI3E,QAGdwE,EAAQY,WAAcpX,GAAmB,iBAANA,GAAkB4R,GAAY+E,EAAS3W,GAC1EwW,EAAQa,SA/BR,MAGE,WAAAhY,CAAYwW,EAAa1J,GACvB4F,GAAaxS,KAAMoX,GACnBnF,GAAcjS,KAAMmX,GACpB,MAAMK,EAxKZ,SAAwBlB,GACtB,MAAMhC,EAAOnT,OAAOoC,OAAOwS,IAC3BzB,EAAKgC,YAAcA,EACnB,MAAMyB,EAAW,IAAMpC,GAAYrB,GAEnC,OADAyD,EAAS9E,IAAUqB,EACZyD,CACT,CAkKkBC,CAAe1B,GACrBhC,EAAOkD,EAAIvE,IAIjB,GAHAqB,EAAKP,2BAA4B,EACjC/T,KAAK+W,IAAQzC,EACbA,EAAKc,QAAUpV,KACX4M,EAAS,CACX,MAAM+K,EAAS/K,EAAQ+K,OACnBA,IACFrD,EAAK0B,MAAQ2B,GAEfrD,EAAKiB,QAAU3I,EAAQqK,EAAQW,OAAOrC,SACtCjB,EAAKkB,UAAY5I,EAAQqK,EAAQW,OAAOpC,UAC1C,CACF,CACA,GAAAnV,GACE,KAAK,EAAI4W,EAAQY,YAAY7X,MAC3B,MAAM,IAAIuS,UAAU,yDACtB,OAAOoD,GAAY3V,KAAK+W,IAC1B,GAQF,CAAEkB,IACA,IAAIC,EAAKC,EAAoBC,EAAgBC,EAY7CJ,EAAQK,QAXR,SAAiBC,GACf,IAAIC,EACAC,EAAqB,KACzB,IACEA,EAAqBvF,GAAkB,MACvCsF,EAASD,GACX,CAAE,QACArF,GAAkBuF,EACpB,CACA,OAAOD,CACT,EASAP,EAAQS,kBAPR,SAA2BC,GACzB,IAAIC,EACJ,KAAK,EAAI3B,EAAQY,YAAYc,MAAU,EAAI1B,EAAQ4B,WAAWF,GAC5D,MAAM,IAAIpG,UAAU,mEAEtB,OAA2C,OAAlCqG,EAAMD,EAAK5B,IAAMtD,mBAAwB,EAASmF,EAAIlf,IAAKmG,GAAMA,EAAEuV,WAAa,EAC3F,EASA6C,EAAQa,gBAPR,SAAyBC,GACvB,IAAIH,EACJ,KAAK,EAAI3B,EAAQY,YAAYkB,MAAY,EAAI9B,EAAQI,SAAS0B,GAC5D,MAAM,IAAIxG,UAAU,oDAEtB,OAAiD,OAAxCqG,EAAMG,EAAOhC,IAAMlD,uBAA4B,EAAS+E,EAAIlf,IAAKmG,GAAMA,EAAEuV,WAAa,EACjG,EAWA6C,EAAQe,SATR,SAAkBD,GAChB,KAAK,EAAI9B,EAAQY,YAAYkB,MAAY,EAAI9B,EAAQI,SAAS0B,GAC5D,MAAM,IAAIxG,UAAU,6CAEtB,MAAMsB,EAAmBkF,EAAOhC,IAAMlD,iBACtC,QAAKA,GAEEA,EAAiB9Z,OAAS,CACnC,EAWAke,EAAQgB,WATR,SAAoBF,GAClB,KAAK,EAAI9B,EAAQY,YAAYkB,MAAY,EAAI9B,EAAQ4B,WAAWE,GAC9D,MAAM,IAAIxG,UAAU,4DAEtB,MAAMkB,EAAesF,EAAOhC,IAAMtD,aAClC,QAAKA,GAEEA,EAAa1Z,OAAS,CAC/B,EAuEAme,EAAMnB,GACNoB,EAAU,IAAI1F,QAGd2F,EAAiB,IAAI3F,QACrB4F,EAAmB,SAASa,GAC1B,IAAK,MAAMH,KAAUG,EACnB,KAAK,EAAIjC,EAAQY,YAAYkB,MAAY,EAAI9B,EAAQI,SAAS0B,GAC5D,MAAM,IAAIxG,UAAU,4DAG1B,EACA0E,EAAQ4B,UAAarJ,GAAM6C,GAAY8F,EAAS3I,GAChDyI,EAAQkB,QAlFR,MAIE,WAAArZ,CAAYsZ,GACV5G,GAAaxS,KAAMmY,GACnB3F,GAAaxS,KAAMoY,GACnBnG,GAAcjS,KAAMkY,GACpB,IAAI5D,EAAOnT,OAAOoC,OAAO8P,IACzBiB,EAAKc,QAAUpV,KACfsU,EAAKH,oBAAsBiF,EAC3B9E,EAAKN,sBAAuB,EAC5BM,EAAKP,2BAA4B,EACjCO,EAAKb,aAAe,GACpBzT,KAAK+W,IAAQzC,CACf,CAKA,KAAA+E,IAASH,GACP,KAAK,EAAIjC,EAAQ4B,WAAW7Y,MAC1B,MAAM,IAAIuS,UAAU,2CAEtBG,GAAgB1S,KAAMoY,EAAgBC,GAAkBzU,KAAK5D,KAAMkZ,GACnE,MAAM5E,EAAOtU,KAAK+W,IAClBzC,EAAKd,OAAQ,EACb,MAAMJ,EAAOF,GAAkBoB,GAC/B,IAAK,MAAMyE,KAAUG,EACnB7E,GAAiB0E,EAAOhC,KAE1B7D,GAAkBE,EACpB,CAEA,OAAAkG,IAAWJ,GACT,KAAK,EAAIjC,EAAQ4B,WAAW7Y,MAC1B,MAAM,IAAIuS,UAAU,2CAEtBG,GAAgB1S,KAAMoY,EAAgBC,GAAkBzU,KAAK5D,KAAMkZ,GACnE,MAAM5E,EAAOtU,KAAK+W,IAClBtC,GAAmBH,GACnB,IAAK,IAAIvS,EAAIuS,EAAKb,aAAa1Z,OAAS,EAAGgI,GAAK,EAAGA,IACjD,GAAImX,EAAQ/e,SAASma,EAAKb,aAAa1R,GAAGqT,SAAU,CAClDT,GAAkCL,EAAKb,aAAa1R,GAAIuS,EAAKX,oBAAoB5R,IACjF,MAAM0T,EAAUnB,EAAKb,aAAa1Z,OAAS,EAM3C,GALAua,EAAKb,aAAa1R,GAAKuS,EAAKb,aAAagC,GACzCnB,EAAKX,oBAAoB5R,GAAKuS,EAAKX,oBAAoB8B,GACvDnB,EAAKb,aAAa1Z,SAClBua,EAAKX,oBAAoB5Z,SACzBua,EAAKV,oBACD7R,EAAIuS,EAAKb,aAAa1Z,OAAQ,CAChC,MAAMwf,EAAcjF,EAAKX,oBAAoB5R,GACvC+S,EAAWR,EAAKb,aAAa1R,GACnCuT,GAAmBR,GACnBA,EAAShB,wBAAwByF,GAAexX,CAClD,CACF,CAEJ,CAGA,UAAAyX,GACE,KAAK,EAAIvC,EAAQ4B,WAAW7Y,MAC1B,MAAM,IAAIuS,UAAU,8CAGtB,OADavS,KAAK+W,IACNtD,aAAa5Z,OAAQgG,GAAMA,EAAE2T,OAAO9Z,IAAKmG,GAAMA,EAAEuV,QAC/D,GAoBF6C,EAAQwB,gBAJR,WACE,IAAIb,EACJ,OAAsC,OAA9BA,EA1gBL9F,SA0gB0C,EAAS8F,EAAIxD,OAC5D,EAEA6C,EAAQ1C,QAAU7V,OAAO,WACzBuY,EAAQzC,UAAY9V,OAAO,YAC5B,EA5ID,CA4IGuX,EAAQW,SAAWX,EAAQW,OAAS,CAAC,GACzC,EArND,CAqNGZ,KAAWA,GAAS,CAAC;;;;;;AC9jBrB,MAAM,GAAEtX,OAAO,sBAAsB,GAAE,IAAIga,qBAAqB,EAAGC,QAAQ5Z,EAAEgZ,OAAOhX,MAAMhC,EAAEuZ,QAAQvX,EAAG,GAAG,GAAE,IAAInC,QAAQ,SAAS,GAAExB,GAAG,OAAM,IAAKA,EAAE,KAAItD,QAAQ8e,KAAK,yEAAyExb,GAAG,cAAcA,EAAE,WAAA0B,GAAc8E,SAASvJ,WAAW2E,KAAK6Z,KAAK,IAAI,GAAEvC,MAAM,GAAGtX,KAAK8Z,MAAK,EAAG9Z,KAAK+Z,MAAK,EAAG/Z,KAAKga,KAAK,IAAItb,GAAG,CAAC,IAAAub,GAAO,QAAG,IAASja,KAAKka,KAAK,OAAOla,KAAKma,KAAK,IAAI,GAAErC,SAAS,KAAM9X,KAAK6Z,KAAKxZ,MAAMuE,MAAM0C,eAAgB,GAAG,MAAMvF,EAAE/B,KAAKka,KAAK,IAAI,GAAEtC,OAAOuB,QAAQ,WAAY,MAAMpZ,EAAE,GAAEM,IAAIL,WAAM,IAASD,KAAI,IAAKA,EAAE+Z,MAAM/Z,EAAE8D,gBAAgB7D,KAAKqZ,QAAS,GAAG,GAAE9Y,IAAIwB,EAAE/B,MAAM,GAAEoa,SAASpa,KAAK,CAAC2Z,QAAQ5X,EAAEgX,OAAO/Y,KAAKma,OAAOpY,EAAEsX,MAAMrZ,KAAKma,KAAK,CAAC,IAAAE,QAAO,IAASra,KAAKka,OAAOla,KAAKka,KAAKZ,QAAQtZ,KAAKma,MAAMna,KAAKma,UAAK,EAAOna,KAAKka,UAAK,EAAO,CAAC,aAAA5S,GAAgBtH,KAAK8E,kBAAkB9E,KAAKia,OAAOja,KAAK8Z,MAAK,EAAG9Z,KAAK6Z,KAAKtZ,IAAIP,KAAK6Z,KAAKxZ,MAAM,GAAGL,KAAK8Z,MAAK,EAAG9Z,KAAKma,KAAK9Z,MAAM,CAAC,MAAAqH,CAAO3H,GAAG,IAAIC,KAAK+Z,MAAM/Z,KAAK+Z,MAAK,EAAGnV,MAAM8C,OAAO3H,IAAIC,KAAKga,KAAKzU,QAASxF,GAAGA,EAAEua,SAAU,CAAC,QAAQta,KAAK8E,iBAAgB,EAAG9E,KAAKga,KAAKO,OAAO,CAAC,CAAC,aAAA1W,CAAc9D,EAAEgC,EAAEtC,GAAGO,KAAK+Z,MAAK,EAAGnV,MAAMf,cAAc9D,EAAEgC,EAAEtC,EAAE,CAAC,iBAAA+G,GAAoB5B,MAAM4B,oBAAoBxG,KAAK6D,eAAe,CAAC,oBAAA4C,GAAuB7B,MAAM6B,uBAAuB+T,eAAe,MAAM,IAAKxa,KAAK4F,aAAa5F,KAAKqa,MAAO,EAAE,CAAC,CAAAxR,CAAE9I,GAAGC,KAAKga,KAAKtU,IAAI3F,GAAG,MAAMgC,EAAE/B,KAAK+Z,KAAK/Z,KAAK6D,gBAAgB7D,KAAK+Z,KAAKhY,CAAC,CAAC,CAAA+G,CAAE/I,GAAGC,KAAKga,KAAKjU,OAAOhG,EAAE,EAAE,CCA/f,MAAM,GAAE;;;;;;AAAz2B,cAAgB,GAAE,IAAAka,GAAO,QAAG,IAASja,KAAKka,KAAK,OAAOla,KAAKya,KAAK,IAAI,GAAE3C,SAAS,KAAM,IAAI/V,EAAE,OAAO,QAAQA,EAAE/B,KAAK0a,YAAO,IAAS3Y,OAAE,EAAOA,EAAE1B,KAAM,GAAG,MAAM0B,EAAE/B,KAAKka,KAAK,IAAI,GAAEtC,OAAOuB,QAAQ,KAAM,IAAIpZ,EAAE,QAAQA,EAAEC,KAAK2a,YAAO,IAAS5a,GAAGA,EAAE8I,EAAE7I,MAAM+B,EAAEsX,OAAQ,GAAGtX,EAAEsX,MAAMrZ,KAAKya,KAAK,CAAC,IAAAJ,GAAO,IAAItY,OAAE,IAAS/B,KAAKka,OAAOla,KAAKka,KAAKZ,QAAQtZ,KAAKya,MAAMza,KAAKya,UAAK,EAAOza,KAAKka,UAAK,EAAO,QAAQnY,EAAE/B,KAAK2a,YAAO,IAAS5Y,GAAGA,EAAE+G,EAAE9I,MAAM,CAAC,MAAAsa,GAASta,KAAK0R,SAAS,GAAEkG,OAAOU,QAAQ,KAAM,IAAIvW,EAAE,OAAO,QAAQA,EAAE/B,KAAKya,YAAO,IAAS1Y,OAAE,EAAOA,EAAE1B,KAAM,GAAG,CAAC,MAAAuO,CAAO7M,GAAG,OAAO,GAAE6V,OAAOU,QAAQ,IAAKvW,EAAE1B,MAAO,CAAC,MAAAqH,CAAO3F,GAAGhC,IAAI,IAAIgB,EAAEpB,EAAE,OAAO,QAAQoB,EAAEf,KAAK2a,YAAO,IAAS5Z,IAAIf,KAAK2a,KAAK,QAAQhb,EAAEoC,EAAE6K,eAAU,IAASjN,OAAE,EAAOA,EAAEsO,MAAMlO,IAAIC,KAAK0a,WAAM,IAAS1a,KAAK0a,MAAM1a,KAAKqa,OAAOra,KAAK0a,KAAK3a,EAAEC,KAAKia,OAAO,GAAErC,OAAOU,QAAQ,IAAKtY,KAAKya,KAAKpa,MAAO,CAAC,YAAAoR,GAAezR,KAAKqa,MAAM,CAAC,WAAA7I,GAAcxR,KAAKia,MAAM,ICAz1B,GAAEta,GAAG,CAACI,KAAK+I,IAAInJ,EAAEI,KAAK+I,EAAEpP,IAAKiG,GAAGA,aAAa,GAAE2X,OAAO3X,aAAa,GAAEmY,SAAS,GAAEnY,GAAGA,ICA5D,IDAmE,GAAE,IAAK,GAAE,ICAjG,GAAE2X,MAAQ,GAAEQ,SAAW,CAACxW,EAAE3B,IAAI,IAAI,GAAE2X,MAAMhW,EAAE3B,ICA9C,GAAE,YAAY,GAAE,KAAK,GAAE,GAAE,GAAE,cAAc,GAAE,WAAAG,CAAYC,GAAG,GAAG6E,MAAM7E,GAAGA,EAAEqC,OAAO,IAAa,UAAUrC,EAAEpC,MAAMoC,EAAEmJ,SAASnP,OAAO,EAAE,MAAMmG,MAAM,6GAA6G,CAAC,MAAA0O,CAAO7O,GAAG,OAAOoB,OAAOgC,KAAKpD,GAAG6a,OAAO,CAAExc,EAAEuC,KAAK,MAAMlB,EAAEM,EAAEY,GAAG,OAAO,MAAMlB,EAAErB,EAAEA,EAAE,GAAGuC,EAAEA,EAAExG,SAAS,KAAKwG,EAAEA,EAAEzC,QAAQ,oCAAoC,OAAOyG,iBAAiBlF,IAAK,EAAE,GAAG,CAAC,MAAAiI,CAAOtJ,GAAGuC,IAAI,MAAMka,MAAMpb,GAAGrB,EAAEmP,QAAQ,QAAG,IAASvN,KAAK8a,GAAG,OAAO9a,KAAK8a,GAAG,IAAIpc,IAAIyC,OAAOgC,KAAKxC,IAAIX,KAAK4O,OAAOjO,GAAG,IAAI,MAAMZ,KAAKC,KAAK8a,GAAG,MAAMna,EAAEZ,KAAKC,KAAK8a,GAAG/U,OAAOhG,GAAGA,EAAE5F,SAAS,KAAKsF,EAAEsb,eAAehb,GAAGN,EAAEM,GAAG,MAAM,IAAI,MAAMA,KAAKY,EAAE,CAAC,MAAMvC,EAAEuC,EAAEZ,GAAG,GAAG,MAAM3B,EAAE,CAAC4B,KAAK8a,GAAGpV,IAAI3F,GAAG,MAAMY,EAAE,iBAAiBvC,GAAGA,EAAEsM,SAAS,IAAG3K,EAAE5F,SAAS,MAAMwG,EAAElB,EAAEub,YAAYjb,EAAEY,EAAEvC,EAAEsK,MAAM,GAAG,IAAItK,EAAEuC,EAAE,GAAE,IAAIlB,EAAEM,GAAG3B,CAAC,CAAC,CAAC,OAAO,EAAC,I,OCQr0B,MAAM6c,GAAgB,sBAChBC,GAAsB,kCAAHjgB,OAAqCggB,IAE7B,QAAjCE,GAAAC,EAAmBH,WAAc,IAAAE,KAAjCC,EAAmBH,IAAmB,CAAC,GACvC,MAAM/B,GAA4D,CAAC,EAG7DmC,GAAyCD,EAAmBH,IAC5DK,GAAuBA,IAAMF,ECnB5B,MAAMG,GDoBN,WAA+I,IAAnFC,EAAYngB,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,GAAAA,UAAA,GAAG,UAAWogB,EAA2CpgB,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,GAAAA,UAAA,QAAGC,EAC7H,IAAAogB,EAAAC,EAANH,IACuB,QAAvBE,EAAAL,GAAkBG,UAAK,IAAAE,IAAvBL,GAAkBG,GAAU,CAAC,GAChB,QAAbG,EAAAzC,GAAQsC,UAAK,IAAAG,IAAbzC,GAAQsC,GAAU,CAAC,IAEvB,MAAMI,EAAqBJ,EAAOH,GAAkBG,GAAQH,GAC5D,GAAII,EAAkB,CAClB,MAAMI,EAAuC,mBAArBJ,EAAkCA,IAAqBA,EAC/E,IAAK,MAAMtgB,KAAO0gB,EAAU,KAAAC,EACD,QAAvBA,EAAAF,EAAmBzgB,UAAI,IAAA2gB,IAAvBF,EAAmBzgB,GAAS0gB,EAAS1gB,GACzC,CACAK,GACJ,CACA,MAAMugB,EAAYP,EAAOtC,GAAQsC,GAAQtC,GACzC,IAAK,MAAM/d,KAAOygB,EAAoB,KAAAI,EACrB,QAAbA,EAAAD,EAAS5gB,UAAI,IAAA6gB,IAAbD,EAAS5gB,GAASuc,EAAavc,EAAKygB,EAAmBzgB,IAC3D,CAIA,SAAS8gB,EAAWT,EAActgB,GAC9B0gB,EAAmBJ,GAAQtgB,EAC3BM,GACJ,CAeA,SAASkc,EAAgB8D,EAActgB,EAAU0R,GAC7C,MAAO,CACHsP,UAAWnD,GAAO7d,EAAO0R,GACzBvM,GAAAA,GACI,OAAOL,KAAKkc,UAAU7b,KAC1B,EACAE,GAAAA,CAAIrF,GACA8E,KAAKkc,UAAU3b,IAAIrF,GACnB+gB,EAAWT,EAAMtgB,EACrB,EAER,CAMA,OArCAM,IAqCO,CACH8f,wBACAD,kBAAmBO,EACnBK,aACAE,WA5BJ,SAAoBX,GAChB,OAAOI,EAAmBJ,EAC9B,EA2BIY,YApCJ,SAAqBP,GACjB1a,OAAOkb,OAAOT,EAAoBC,GAClCrgB,GACJ,EAkCI8gB,YAjCJ,WACI,OAAOV,CACX,EAgCIpgB,sBAAqB,EACrB0f,uBACAqB,UA9BJ,SAAsCf,GAA4B,IAAA1K,EAAA0L,EAE9D,OADwB,QAAxBA,EAAAT,EAAQjL,EAAC0K,UAAe,IAAAgB,IAAxBT,EAAQjL,GAAqB4G,EAAa8D,EAAgBI,EAAmBJ,KACtEO,EAASP,EACpB,EA4BIiB,WAdJ,WACI,OAAOV,CACX,EAcJ,CCvFoCW,CAAoB,eAAgB,KAC7D,CACHC,mBAAqBtkB,aAAaC,QAAQ,uBAAyB,GACnEskB,mBAAoBvgB,KAAKC,MAAMjE,aAAaC,QAAQ,uBAAyB,QAC7EukB,YAAa7a,OAAO8a,SAASzkB,aAAaC,QAAQ,gBAAkB,KACpEykB,eAAiB1kB,aAAaC,QAAQ,mBAAqB,MAC3D0kB,iBAAkBhb,OAAO8a,SAASzkB,aAAaC,QAAQ,qBAAuB,KAC9E2kB,eAAgBjb,OAAO8a,SAASzkB,aAAaC,QAAQ,mBAAqB,MAC1E4kB,cAAgB7kB,aAAaC,QAAQ,yBAA2B,YAChE6kB,wBAA0B9gB,KAAKC,MAAMjE,aAAaC,QAAQ,4BAA8B,QACxF8kB,uBAAwB/gB,KAAKC,MAAMjE,aAAaC,QAAQ,2BAA6B,QACrF+kB,gBAAkBhlB,aAAaC,QAAQ,oBAAsB,GAC7DglB,oBAAoB,K,+nCCR5B,MAAQ9hB,sBAAqB,GAAE6f,kBAAiB,cAAEY,GAAU,YAAEK,GAAW,WAAEG,IAAelB,GAO1F,MAAM,mBACFoB,GAAkB,mBAClBC,GAAkB,YAClBC,GAAW,eACXE,GAAc,iBACdC,GAAgB,eAChBC,GAAc,cACdC,GAAa,wBACbC,GAAuB,uBACvBC,GAAsB,gBACtBC,GAAe,mBACfC,IACAb,KAEEc,GAAc5iB,EAAkB,SAChC6iB,GAAW,IAAIC,iBAAkBC,IACnC,IAAIC,GAAY,EAChB,IAAK,MAAMC,KAAYF,EAAW,CAC9B,GAAsB,cAAlBE,EAASxb,KACT,SASJ,GAPsBvF,MAAMC,KAAK8gB,EAASC,YAAYC,KAAKxJ,GACnDA,EAAK/J,WAAawT,KAAKC,cAAkB1J,aAAgBzR,cAGtDyR,EAAK2J,UAAUC,SAAS,aAAe5J,EAAK6J,cAAc,eAGlD,CAEXvB,GAAmBvc,QACnBsd,GAAY,GAGhB,KACJ,CACJ,CACIA,IACAS,KACAC,QAIR,MAAMC,GAIMxe,WAAAA,GAAcuR,GAAA,uBAF4C,IAAIpN,IAE9C,CAExB,kBAAcsa,GAIV,OAHKD,GAAcE,WACfF,GAAcE,SAAW,IAAIF,IAE1BA,GAAcE,QACzB,CAEOC,YAAAA,CAAaC,GAChB,MAAMC,EAASnhB,SAASC,cAAc,UAKtC,OAJAuC,KAAK4e,sBAAsBD,GAC3BA,EAAOE,OAAS7e,KAAK8e,oBAAoBJ,GAEzC1e,KAAK+e,0BAA0BJ,GACxBA,CACX,CAEQC,qBAAAA,CAAsBD,GAC1Bxd,OAAOkb,OAAOsC,EAAO9D,MAAO,CACxBmE,MAAO,OACPC,OAAQ,OACRC,UAAW,OACXC,WAAY,oBAEpB,CAEQJ,yBAAAA,CAA0BJ,GAW9B,GAVAA,EAAOS,OAAS,KACZpf,KAAKqf,mBAAmBV,GAExBW,WAAW,IAAMtf,KAAKqf,mBAAmBV,GAAS,KAGlD3e,KAAKuf,kBAAkBZ,EAAQa,OAI/Bb,EAAOc,cAAe,CACtB,MAAMC,EAAiB,IAAIC,eAAe,IAAM3f,KAAKqf,mBAAmBV,IACxE3e,KAAK4f,gBAAgBrf,IAAIoe,EAAQe,GAEjCf,EAAO5Q,iBAAiB,OAAQ,KAAM,IAAA8R,EACV,QAAxBA,EAAIlB,EAAOc,qBAAa,IAAAI,GAApBA,EAAsBriB,SAASsiB,MAC/BJ,EAAeK,QAAQpB,EAAOc,cAAcjiB,SAASsiB,OAGjE,CACJ,CAEOT,kBAAAA,CAAmBV,GACtB,IAAI,IAAAqB,EACA,GAAwB,QAAxBA,EAAIrB,EAAOc,qBAAa,IAAAO,GAApBA,EAAsBxiB,SAASsiB,KAAM,CACrC,MAAMG,EAAS1X,KAAK2X,IAChBvB,EAAOc,cAAcjiB,SAAS2iB,gBAAgBC,aAC9CzB,EAAOc,cAAcjiB,SAASsiB,KAAKM,cAEvCzB,EAAO9D,MAAMoF,OAAS,GAAHhlB,OAAMglB,EAAS,EAAC,KACvC,CACJ,CAAE,MAAO5hB,GACLvD,QAAQuD,MAAM,gBAAiBA,EACnC,CACJ,CAEOkhB,iBAAAA,CAAkBZ,EAA2B0B,GAChD,IAAI,IAAAC,EACoB,QAApBA,EAAA3B,EAAOc,qBAAa,IAAAa,GAApBA,EAAsBC,YAAY,CAAEne,KAAM,cAAeie,SAAS,IACtE,CAAE,MAAOhiB,GACLvD,QAAQuD,MAAM,gBAAiBA,EACnC,CACJ,CAEOmiB,YAAAA,CAAa7B,GAEhB,MAAMnB,EAAWxd,KAAK4f,gBAAgBvf,IAAIse,GACtCnB,IACAA,EAASiD,aACTzgB,KAAK4f,gBAAgB7Z,OAAO4Y,IAEhCA,EAAOtR,QACX,CAEQyR,mBAAAA,CAAoBJ,GACxB,MAAO,27DAAPzjB,OAuDMyjB,EAAW,0gFAiDrB,EAMJ,SAASN,KACL,MAAMsC,EAAgBpC,GAAcC,cAC9BoC,EAAUnjB,SAASojB,iBAAoC,oBAC7D,IAAK,MAAMjC,KAAU9hB,MAAMC,KAAK6jB,GAC5BD,EAAcF,aAAa7B,GAE/B,MAAMkC,EAAerjB,SAASojB,iBAAiC,kBAC/D,IAAK,MAAME,KAAQjkB,MAAMC,KAAK+jB,GAAe,CACzCC,EAAKjG,MAAMkG,QAAU,GACrB,MAAMC,EAAUF,EAAKG,QAAQ,WAChB,IAAAC,EAAb,GAAIF,EACkB,QAAlBE,EAAAF,EAAQhV,kBAAU,IAAAkV,GAAlBA,EAAoBjU,aAAa6T,EAAME,GACvCA,EAAQ3T,QAEhB,CACJ,CACA,SAASgR,KAAyD,IAA1C8C,EAAe9lB,UAAAtB,OAAA,QAAAuB,IAAAD,UAAA,GAAAA,UAAA,GAAG,KACtCP,QAAQC,IAAI,kBACZ,IACI,MAAMqmB,EAAkBD,EAAkB,CAACA,GAAmBtkB,MAAMC,KAAKygB,GAAY8D,KAAK,cAC1F,IAAIC,EACJ,MAAMZ,EAAgBpC,GAAcC,cACpC,OAAQxB,GAAe1c,OACnB,IAAK,QACDihB,EAAiBF,EAAgB1Y,MAAM,EAAG,GAC1C,MACJ,IAAK,OACD4Y,EAAiBF,EAAgB1Y,OAAO,GACxC,MACJ,IAAK,QACD4Y,EAAiBF,EAAgB1Y,OAAOuU,IACxC,MACJ,IAAK,SAAU,CACX,MAAMsE,EAAQvE,GAAiB3c,MAAQ,EACjCmhB,GAAgC,IAA1BvE,GAAe5c,WAAe/E,EAAY2hB,GAAe5c,MACrEihB,EAAiBF,EAAgB1Y,MAAM6Y,EAAOC,GAC9C,KACJ,CACA,QACIF,EAAiBF,EAEzB,IAAK,IAAIrf,EAAI,EAAGA,EAAIuf,EAAevnB,OAAQgI,IAAK,KAAA0f,EAC5C,MAAMC,EAAUJ,EAAevf,GACzB4f,EAAcD,EAAQvD,cAAc,QAC1C,IAAKwD,EACD,SAEJ,MAAMjD,EAAciD,EAAYC,UAAUhoB,OAC1C,IAAK8kB,EAAY5kB,WAAW,OAAS4kB,EAAYhU,SAAS,KACtD,SAEJ,MAAMiU,EAAS+B,EAAcjC,aAAaC,GAC1C,GAA0B,IAAtB7B,GAAYxc,MAAa,KAAAwhB,EACzB,MAAMb,EAAUxjB,SAASC,cAAc,WACjCqkB,EAAUtkB,SAASC,cAAc,WACvCqkB,EAAQ9mB,YAAc,QACtBgmB,EAAQpjB,YAAYkkB,GACE,QAAtBD,EAAAF,EAAY3V,kBAAU,IAAA6V,GAAtBA,EAAwB5U,aAAa+T,EAASW,GAC9CX,EAAQpjB,YAAY+jB,EACxB,MAAiC,IAAtB9E,GAAYxc,QACnBshB,EAAY9G,MAAMkG,QAAU,QAEV,QAAtBU,EAAAE,EAAY3V,kBAAU,IAAAyV,GAAtBA,EAAwBxU,aAAa0R,EAAQgD,EAAYtV,aAEzDqV,EAAQ9jB,YAAY+gB,EACxB,CACJ,CAAE,MAAOtgB,GACLvD,QAAQuD,MAAM,YAAaA,EAC/B,CACJ,CAaA,SAASmhB,KACL,OAAO1P,OAAOiS,WAAW,gCAAgCC,QAAU,OAAS,OAChF,CACA,SAASC,KACWzkB,SAASojB,iBAAiB,oBAElCrb,QAAQoZ,IACZ,IAEQA,EAAOc,eAEPd,EAAOc,cAAcc,YAAY,CAAEne,KAAM,cAAeie,MAAOb,MAAoB,IAE3F,CAAE,MAAOnhB,GACLvD,QAAQuD,MAAM,gBAAiBA,EACnC,GAER,CAEA,SAAS6jB,GAAcjR,GACnB,IACI,GAAmB,WAAfA,EAAMlT,KAAmB,CACTP,SAASojB,iBAAoC,oBAErDrb,QAAQoZ,IAERA,EAAOc,gBAAkBxO,EAAMkR,QApCnD,SAA4BxD,GACxB,IAAI,IAAAyD,EACA,GAAwB,QAAxBA,EAAIzD,EAAOc,qBAAa,IAAA2C,GAApBA,EAAsB5kB,SAASsiB,KAAM,CACrC,MAAMG,EAAStB,EAAOc,cAAcjiB,SAAS2iB,gBAAgBC,aAC7DzB,EAAO9D,MAAMoF,OAAS,GAAHhlB,OAAMglB,EAAS,EAAC,KACvC,CACJ,CAAE,MAAO5hB,GACLvD,QAAQuD,MAAM,gBAAiBA,EACnC,CACJ,CA4BoBghB,CAAmBV,IAG/B,MAAO,GAAwB,gBAApB1N,EAAMlT,KAAKqE,KAAwB,CAC1C,MAAMigB,EAAapR,EAAMlT,KAAKJ,KAC9B2kB,OAAO,2BAA2BC,KAAK,WACnC,GAAID,OAAOtiB,MAAMqhB,KAAK,qBAAqB3jB,OAAO9D,SAAWyoB,EAEzD,OADAC,OAAOtiB,MAAMwiB,QAAQ,UACd,CAEf,EACJ,MAAO,GAAwB,cAApBvR,EAAMlT,KAAKqE,KAAsB,CACxC,MAAMqgB,EAAejlB,SAASklB,eAAe,iBACzCD,IAEAA,EAAavnB,MAAQ+V,EAAMlT,KAAKL,KAChC+kB,EAAaE,cAAc,IAAIC,MAAM,QAAS,CAAEC,SAAS,KACzDJ,EAAaE,cAAc,IAAIC,MAAM,SAAU,CAAEC,SAAS,KAElE,MAAO,GAAwB,cAApB5R,EAAMlT,KAAKqE,KAAsB,CACxC,MAAM0gB,EAAatlB,SAASklB,eAAe,YACvCI,GACAA,EAAWC,OAEnB,CACJ,CAAE,MAAO1kB,GACLvD,QAAQuD,MAAM,UAAWA,EAC7B,CACJ,CA1IAgT,GApMMiN,GAAa,mBA+UnB,MAAM0E,WAAsBC,GAAcjU,KAAYlP,WAAAA,GAAA,SAAAzE,WAAAgW,GAAA,8BAIlB6R,MAA2B7R,GAAA,uBAClC6R,KAA2B,CAJ1Cjd,gBAAAA,GACN,OAAOjG,IACX,CAIA4O,MAAAA,GAGI,OAFA5O,KAAK6a,MAAMkG,QAAU3D,GAAuB/c,MAAQ,OAAS,QAC7DL,KAAKie,UAAUvY,IAAI,UACZ+K,GAAIC,KAAAA,GAAAC,GAAA,0sQAGiG3Q,KAAKmjB,oBAKrBnjB,KAAKojB,yBACZ,cAAxBlG,GAAc7c,MACU,yBAAxB6c,GAAc7c,MACU,iBAAxB6c,GAAc7c,MACU,aAAxB6c,GAAc7c,MACU,wBAAxB6c,GAAc7c,MACU,gBAAxB6c,GAAc7c,MACU,WAAxB6c,GAAc7c,MACU,WAAxB6c,GAAc7c,MAM+C,IAAtBwc,GAAYxc,MAAuBL,KAAKqjB,wBAClB,IAAtBxG,GAAYxc,MAAuBL,KAAKqjB,wBAClB,IAAtBxG,GAAYxc,MAAuBL,KAAKqjB,wBAInDrjB,KAAKsjB,2BAClB,QAAzBvG,GAAe1c,MACU,UAAzB0c,GAAe1c,MACU,SAAzB0c,GAAe1c,MACU,UAAzB0c,GAAe1c,MACU,WAAzB0c,GAAe1c,MAEckjB,GAAS,CACrFxC,QAAkC,WAAzBhE,GAAe1c,MAAqB,QAAU,SACrDmX,GAAIxX,KAAKwjB,wBACoGxG,GAAiB3c,MAAMG,WAAsBR,KAAKyjB,6BACnDxG,GAAe5c,MAAMG,WAAsBR,KAAK0jB,2BAGxFH,GAAS,CAC/ExC,QAAkC,UAAzBhE,GAAe1c,MAAoB,QAAU,SACpDmX,GAAIxX,KAAK2jB,iBAC4F1G,GAAe5c,MAAMG,WAAuBR,KAAK4jB,wBAyBhK,CACAN,0BAAAA,CAA2BrS,GACvB,MACM/V,EADS+V,EAAMC,OACAhW,MACrB6hB,GAAexc,IAAIrF,GACnB8E,KAAK6jB,iBACT,CACAT,wBAAAA,CAAyBnS,GACrB,MACM/V,EADS+V,EAAMC,OACAhW,MACrBgiB,GAAc3c,IAAIrF,GAClBiiB,GAAwB5c,KAAI,GAC5BP,KAAK8jB,aAAaC,2BAA2B7oB,EACjD,CACAuoB,4BAAAA,CAA6BxS,GACzB,MAAMC,EAASD,EAAMC,OACfhW,EAAQ8G,OAAO8a,SAAS5L,EAAOhW,OACrC8hB,GAAiBzc,IAAIrF,GACrB8E,KAAK6jB,iBACT,CAEAH,0BAAAA,CAA2BzS,GACvB,MAAMC,EAASD,EAAMC,OACfhW,EAAQ8G,OAAO8a,SAAS5L,EAAOhW,OACrC+hB,GAAe1c,IAAIrF,GACnB8E,KAAK6jB,iBACT,CACAD,uBAAAA,CAAwB3S,GACpB,MAAMC,EAASD,EAAMC,OACfhW,EAAQ8G,OAAO8a,SAAS5L,EAAOhW,OACrC+hB,GAAe1c,IAAIrF,GACnB8E,KAAK6jB,iBACT,CACAR,uBAAAA,CAAwBpS,GACpB,MAAMC,EAASD,EAAMC,OACfhW,EAAQ8G,OAAO8a,SAAS5L,EAAOhW,OACrC2hB,GAAYtc,IAAIrF,GAChB8E,KAAK6jB,iBACT,CACAV,mBAAAA,CAAoBlS,GAChB,MAAM+S,EAAmC,UAAvBhkB,KAAK6a,MAAMkG,QAC7B/gB,KAAK6a,MAAMkG,QAAUiD,EAAY,QAAU,OAC3C5G,GAAuB7c,IAAIyjB,EAC/B,CACAH,eAAAA,GACSjH,GAAmBvc,QAGxB+d,KACAC,KACJ,EAEJ,MAAM4F,WAAqBhB,GAAcjU,KAerClP,WAAAA,GACI8E,QAAQyM,GAAA,sBACR,MACM6S,EADWhH,GAAc7c,MACPlG,SAAS,QACjC6F,KAAKmkB,sBAAqBC,GAAA,CACtBC,SAAU,WACVC,IAAK,MACLC,UAAW,mBACXC,gBAAiB,yDACjBC,MAAO,qDACPxF,OAAQ,kEACRyF,OAAQ,UACRC,QAAS,MACTC,WAAY,OACZC,SAAU,OACV5E,OAAQ,OACRjB,MAAO,OACP8F,UAAW,UACPZ,EAAS,CACTa,MAAO,QACPC,KAAM,OACNC,aAAc,eACd,CACAD,KAAM,QACND,MAAO,OACPE,aAAc,gBAGtBjlB,KAAKklB,YAAa,EAClBllB,KAAKmlB,OAAS,EACdnlB,KAAKolB,SAAW,EAChBplB,KAAKqlB,OAAS,CAGlB,CACUpf,gBAAAA,GACN,OAAOjG,IACX,CACAwG,iBAAAA,GACI5B,MAAM4B,oBACNhJ,SAASuQ,iBAAiB,YAAa/N,KAAKslB,eAAetV,KAAKhQ,OAEhExC,SAASuQ,iBAAiB,UAAW/N,KAAKulB,cAAcvV,KAAKhQ,OAC7DxC,SAASuQ,iBAAiB,YAAa/N,KAAKslB,eAAetV,KAAKhQ,OAEhExC,SAASuQ,iBAAiB,WAAY/N,KAAKulB,cAAcvV,KAAKhQ,MAClE,CACAyG,oBAAAA,GACI7B,MAAM6B,uBACNjJ,SAASsQ,oBAAoB,YAAa9N,KAAKslB,eAAetV,KAAKhQ,OAEnExC,SAASsQ,oBAAoB,UAAW9N,KAAKulB,cAAcvV,KAAKhQ,OAChExC,SAASsQ,oBAAoB,YAAa9N,KAAKslB,eAAetV,KAAKhQ,OAEnExC,SAASsQ,oBAAoB,WAAY9N,KAAKulB,cAAcvV,KAAKhQ,MACrE,CACU4O,MAAAA,GACN9T,QAAQC,IAAI,wBACZD,QAAQC,IAAI,qBAAsB6hB,GAAmBvc,OACrDvF,QAAQC,IAAI,yBAA0BqiB,GAAuB/c,OAW7D,OAViB6c,GAAc7c,MACPlG,SAAS,SAE7B6F,KAAK6a,MAAMmK,KAAO7H,GAAwB9c,MAAQ,SAAW,IAC7DL,KAAK6a,MAAMkK,MAAQ,SAEnB/kB,KAAK6a,MAAMkK,MAAQ5H,GAAwB9c,MAAQ,SAAW,IAC9DL,KAAK6a,MAAMmK,KAAO,QAEtBhlB,KAAK6a,MAAMkG,QAAUzD,GAAmBjd,MAAQ,OAAS,QAClDoQ,GAAIO,KAAAA,GAAAL,GAAA,mqBAC0C3Q,KAAKwlB,gBAA+BxlB,KAAKwlB,gBAEpF3oB,MAAMC,KAAK,CAAE/C,OAAQ,IAAKL,IAAI,IAAM+W,GAAIgV,KAAAA,GAAA9U,GAAA,0MAEhC9T,MAAMC,KAAK,CAAE/C,OAAQ,IAAKL,IAAI,IAAM+W,GAAIiV,KAAAA,GAAA/U,GAAA,oLAQU3Q,KAAK2lB,mBAA+B/I,GAAmBvc,MAG7BL,KAAKmjB,oBAAuB/F,GAAuB/c,MAAQ,OAAS,OACpHkjB,GAASvjB,KAAKmkB,uBAC/CnkB,KAAK4lB,yBAEZzI,GAAwB9c,MAAQ,KAAO,KAGjD,CACAmlB,eAAAA,CAAgBpnB,GACZ4B,KAAKklB,YAAa,EAClBllB,KAAKmlB,OAAS/mB,EAAEgE,KAAKjI,SAAS,SAAYiE,EAAiBynB,QAAWznB,EAA4B0nB,QAAQ,GAAGD,QAC7G7lB,KAAKolB,SAAWplB,KAAK+lB,wBAAwBzB,IAC7ClmB,EAAE4nB,gBACN,CACAV,cAAAA,CAAerU,GACX,IAAKjR,KAAKklB,WACN,OAEJ,MAAMW,EAAU5U,EAAM7O,KAAKjI,SAAS,SAAY8W,EAAqB4U,QAAW5U,EAAgC6U,QAAQ,GAAGD,QAC3H,IAAIR,EAASrlB,KAAKolB,UAAYS,EAAU7lB,KAAKmlB,QAC7CE,EAAS9c,KAAK2X,IAAI,EAAG3X,KAAK0d,IAAIZ,EAAQvV,OAAOoW,YAAclmB,KAAKmmB,eAChEnmB,KAAKqlB,OAASA,EACdrlB,KAAK6a,MAAMyJ,IAAM,GAAHrpB,OAAMoqB,EAAM,KAE9B,CACAE,aAAAA,CAActU,GACVjR,KAAKklB,YAAa,EACW,WAAzBnI,GAAe1c,OACfgd,GAAgB9c,IAAIP,KAAKqlB,OAAO7kB,WAExC,CAIAolB,wBAAAA,CAAyB3U,GACrBkM,GAAwB5c,KAAK4c,GAAwB9c,OACrD,MAAMnF,EAAQiiB,GAAwB9c,MAEhC6jB,EADWhH,GAAc7c,MACPlG,SAAS,QAE3BisB,EAAenV,EAAMC,OACvBgT,GACAlkB,KAAK6a,MAAMmK,KAAO9pB,EAAQ,SAAW,IACrC8E,KAAK6a,MAAMkK,MAAQ,OACnBqB,EAAaprB,YAAcE,EAAQ,KAAO,OAE1C8E,KAAK6a,MAAMkK,MAAQ7pB,EAAQ,SAAW,IACtC8E,KAAK6a,MAAMmK,KAAO,OAClBoB,EAAaprB,YAAcE,EAAQ,KAAO,MAG9C8E,KAAKmkB,sBAAqBC,GAAAA,GAAA,GACnBpkB,KAAKmkB,uBACJD,EAAS,CACTa,MAAO,QACPC,KAAM,OACNC,aAAc,eACd,CACAD,KAAM,QACND,MAAO,OACPE,aAAc,eAG1B,CACAU,kBAAAA,CAAmB1U,GACf,MACMoV,EADSpV,EAAMC,OACIoV,QACzBxrB,QAAQC,IAAI,YAAasrB,GACzBzJ,GAAmBrc,IAAI8lB,GACnBA,EACAhI,KAEAD,IAGR,CACA+E,mBAAAA,CAAoBlS,GAChBjR,KAAKumB,cAAcpD,oBAAoBlS,EAC3C,CACAuV,cAAAA,GACIxmB,KAAK+jB,2BAA2B7G,GAAc7c,MAClD,CACA0jB,0BAAAA,CAA2BM,GAEvB,MAAMH,EAASG,EAASlqB,SAAS,QAQjC,OANI+pB,EACAlkB,KAAKie,UAAUvY,IAAI,aAEnB1F,KAAKie,UAAU5Q,OAAO,aAGlBgX,GACJ,IAAK,YACL,IAAK,WACDrkB,KAAK6a,MAAMyJ,IAAM,OACjBtkB,KAAK6a,MAAM0J,UAAY,OACvB,MACJ,IAAK,uBACL,IAAK,sBACDvkB,KAAK6a,MAAMyJ,IAAM,OACjBtkB,KAAK6a,MAAM0J,UAAY,OACvB,MACJ,IAAK,eACL,IAAK,cACDvkB,KAAK6a,MAAMyJ,IAAM,MACjBtkB,KAAK6a,MAAM0J,UAAY,mBACvB,MACJ,IAAK,SACDvkB,KAAK6a,MAAMyJ,IAAMjH,GAAgBhd,MAAQ,GAAHpF,OAAMoiB,GAAgBhd,MAAK,MAAO,OACxEL,KAAK6a,MAAM0J,UAAY,OAK3BL,GACAlkB,KAAK6a,MAAMmK,KAAO7H,GAAwB9c,MAAQ,SAAW,IAC7DL,KAAK6a,MAAMkK,MAAQ,SAEnB/kB,KAAK6a,MAAMkK,MAAQ5H,GAAwB9c,MAAQ,SAAW,IAC9DL,KAAK6a,MAAMmK,KAAO,QAGtBhlB,KAAKmkB,sBAAqBC,GAAAA,GAAA,GACnBpkB,KAAKmkB,uBACJD,EAAS,CACTa,MAAO,QACPC,KAAM,OACNC,aAAc,eACd,CACAD,KAAM,QACND,MAAO,OACPE,aAAc,gBAGtBjlB,KAAK6D,eACT,EACHwN,GA9OK4S,GAAY,aAC4B,CACtCsC,cAAe,CAAEnkB,KAAMjB,QACvBgjB,sBAAuB,CAAE/hB,KAAMjB,QAC/B+jB,WAAY,CAAE9iB,KAAMP,SACpBsjB,OAAQ,CAAE/iB,KAAMJ,QAChBojB,SAAU,CAAEhjB,KAAMJ,QAClBqjB,OAAQ,CAAEjjB,KAAMJ,UA0OxBsP,eAAeC,OAAO,iBAAkByR,IACxC1R,eAAeC,OAAO,gBAAiB0S;;;;;;ACxvBpC,MAAM,GAAE,GAAE,cAAc,GAAE,WAAAnkB,CAAYC,GAAG,GAAG6E,MAAM7E,GAAGA,EAAEqC,OAAO,IAAa,UAAUrC,EAAEpC,MAAMoC,EAAEmJ,SAASnP,OAAO,EAAE,MAAMmG,MAAM,qGAAqG,CAAC,MAAA0O,CAAO7O,GAAG,MAAM,IAAIoB,OAAOgC,KAAKpD,GAAGlG,OAAQ4F,GAAGM,EAAEN,IAAKhF,KAAK,KAAK,GAAG,CAAC,MAAAiN,CAAOjI,GAAGsC,IAAI,QAAG,IAAS/B,KAAKymB,GAAG,CAACzmB,KAAKymB,GAAG,IAAI/nB,SAAI,IAASe,EAAEyJ,UAAUlJ,KAAK0mB,GAAG,IAAIhoB,IAAIe,EAAEyJ,QAAQzO,KAAK,KAAKhB,MAAM,MAAMI,OAAQkG,GAAG,KAAKA,KAAM,IAAI,MAAMA,KAAKgC,EAAEA,EAAEhC,KAAKC,KAAK0mB,IAAI9nB,IAAImB,IAAIC,KAAKymB,GAAG/gB,IAAI3F,GAAG,OAAOC,KAAK4O,OAAO7M,EAAE,CAAC,MAAMpB,EAAElB,EAAE8N,QAAQ0Q,UAAU,IAAI,MAAMle,KAAKC,KAAKymB,GAAG1mB,KAAKgC,IAAIpB,EAAE0M,OAAOtN,GAAGC,KAAKymB,GAAG1gB,OAAOhG,IAAI,IAAI,MAAMA,KAAKgC,EAAE,CAAC,MAAMtC,IAAIsC,EAAEhC,GAAGN,IAAIO,KAAKymB,GAAG7nB,IAAImB,IAAIC,KAAK0mB,IAAI9nB,IAAImB,KAAKN,GAAGkB,EAAE+E,IAAI3F,GAAGC,KAAKymB,GAAG/gB,IAAI3F,KAAKY,EAAE0M,OAAOtN,GAAGC,KAAKymB,GAAG1gB,OAAOhG,IAAI,CAAC,OAAO,EAAC,I,OCF5uB,MAAQud,mBAAkBA,IAAK/B,GAAqBkB,aAsCpDnL,eAAeC,OAAO,sBArCtB,cAAgCvC,GAClB/I,gBAAAA,GACN,OAAOjG,IACX,CACA4O,MAAAA,GACI,OAAO6B,GAAIC,KAAAA,G,gHAAAC,CAAA,+lBASqD3Q,KAAK2mB,yBACtDC,GAAS,CACpB,YAAY,EACZ,SAAUtJ,GAAmBjd,MAC7B,gBAAiBid,GAAmBjd,QAEzBid,GAAmBjd,MAAe,KAAP,KAQ9C,CACAsmB,wBAAAA,GACIrJ,GAAmB/c,KAAK+c,GAAmBjd,OAC3CL,KAAK6D,eACT,ICzBF,OAACgjB,EAAAvtB,KtBJC2F,OAAOZ,MAAQ,WAAmC,QAAAyoB,EAAAzrB,UAAAtB,OAATgtB,EAAI,IAAAlqB,MAAAiqB,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJD,EAAIC,GAAA3rB,UAAA2rB,GAIzC,GAHAhoB,KAAY+nB,GACZjsB,QAAQC,IAAIgsB,GACZjsB,QAAQuD,SAAS0oB,IACZrrB,MAAqBvD,EAAMI,sBAC5B,OAEJ,MAAO0uB,EAAS7kB,GAAQ2kB,EAExB,GAAK3kB,GAGQ,wBAATA,EAAgC,CAChC,MAAMvH,EAAiBF,EAAE,yBAAyB,GAClDkB,EAAiB,+CAADZ,OACnBgsB,EAAO,sBAAAhsB,OACNJ,EAAeG,YAAW,QAC5B,CACJ,EmBquBG,WACH,MAAMurB,EAAgB/oB,SAASC,cAAc,kBACvCqmB,EAAetmB,SAASC,cAAc,iBAC5C8oB,EAAcW,GAAK,yBACnBpD,EAAaoD,GAAK,8BAClBX,EAAczC,aAAeA,EAC7BA,EAAayC,cAAgBA,EAC7B,MAAMlC,EAAWnH,GAAc7c,MAC3BgkB,EAASlqB,SAAS,SAClB2pB,EAAa7F,UAAUvY,IAAI,aAE/BlI,SAASsiB,KAAKliB,YAAY2oB,GAC1B/oB,SAASsiB,KAAKliB,YAAYkmB,GAE1BA,EAAaC,2BAA2BM,GACxCvU,OAAO/B,iBAAiB,SAAU,KAC9B+V,EAAa0C,mBAEjB1W,OAAO/B,iBAAiB,UAAWmU,IACnCpS,OAAOiS,WAAW,gCAAgChU,iBAAiB,SAAUkU,IAC7EzE,GAASuC,QAAQviB,SAASsiB,KAAM,CAC5BqH,WAAW,EACXC,SAAS,GAEjB,CGzwBCC,GD6BM,WACH,MAAMC,EAAY9pB,SAASC,cAAc,uBACzC6pB,EAAUC,UAAY,sBACtBD,EAAUJ,GAAK,qBACf,MAAMM,EAAOhqB,SAASklB,eAAe,wBAChC8E,GAGLA,EAAK5pB,YAAY0pB,EACrB,CCrCCG,GAEA,MAAMluB,EAA6B,QAAtBstB,QAAUpuB,WAAY,IAAAouB,EAAAA,EAAK,CAAC,QACnC5qB,EAAiB1C,GACvB,MAAMmuB,EAAO/sB,EAAE,oBAAoB,GACnCG,QAAQC,IAAI,UAAWxB,GACvB,MAAMouB,EAAenqB,SAASC,cAAc,kBAC5CkqB,EAAa3tB,WAAaT,EAAQU,mBAClC0tB,EAAajY,SAA6B,QAAnBpW,EAAAC,EAAQrB,UAAW,IAAAoB,OAAA,EAAnBA,EAAqBG,MAAM,MAAM+c,QAAS,GACjEmR,EAAapvB,sBAAwBJ,EAAMI,sBAC3CovB,EAAahY,oBAAsBxX,EAAMC,YACzCuvB,EAAa/X,QAAUrW,EAAQrB,IAAe,GAE9CwvB,EAAK9pB,YAAY+pB,GAEjBC,EAAYC,GACXC,EAAYC,+BACZ1uB,GAEDuuB,EAAYC,GAAGC,EAAYE,6BAA8BxvB,UACpDkD,WAAwBlB,EAAQ,2BAA4B8C,KAEjEsqB,EAAYC,GAAGC,EAAYG,aAAc,KACxC,GAAIvsB,IAAkB,CACrB,MAAMwsB,EAAelmB,OAAO3J,aAAaC,QAAQ,0BAA4B,GAC7ED,aAAa+Y,QAAQ,yBAA0B8W,EAAe,GAAG1nB,YACjEsP,OAAO6S,cAAc,IAAIwF,YAAY,2BACtC,GAED,EAhCC","sources":["webpack://extension-zerxz-lib/./src/utils/constants.ts","webpack://extension-zerxz-lib/./src/utils/utils.ts","webpack://extension-zerxz-lib/./src/utils/gemini.ts","webpack://extension-zerxz-lib/./src/utils/toastr.ts","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/css-tag.js","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/reactive-element.js","webpack://extension-zerxz-lib/./node_modules/lit-html/lit-html.js","webpack://extension-zerxz-lib/./node_modules/lit-element/lit-element.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directive.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directive-helpers.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/repeat.js","webpack://extension-zerxz-lib/./src/layouts/GeminiLayouts.ts","webpack://extension-zerxz-lib/./node_modules/lit-html/async-directive.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/ref.js","webpack://extension-zerxz-lib/./node_modules/signal-polyfill/dist/index.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/signal-watcher.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/watch.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/html-tag.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/index.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/style-map.js","webpack://extension-zerxz-lib/./src/utils/extension.ts","webpack://extension-zerxz-lib/./src/utils/setting.ts","webpack://extension-zerxz-lib/./src/layouts/HtmlInjector.ts","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/class-map.js","webpack://extension-zerxz-lib/./src/layouts/ExtensionContainer.ts","webpack://extension-zerxz-lib/./src/index.ts"],"sourcesContent":["export const CUSTOM_KEY = \"api_key_makersuite_custom\";\r\nconst switchState = localStorage.getItem(\"switch_key_maker_suite\") === \"true\";\r\nconst throwGeminiErrorState = localStorage.getItem(\"throw_gemini_error\") !== \"true\";\r\n\r\nexport const STATE = {\r\n    switchState,\r\n    throwGeminiErrorState\r\n}\r\n","\r\nimport { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup.js\";\r\nimport {\r\n    saveSettingsDebounced,\r\n    getRequestHeaders,\r\n} from \"@silly-tavern/script.js\";\r\nimport { STATE, CUSTOM_KEY } from \"./constants\";\r\nimport {\r\n    updateSecretDisplay,\r\n    writeSecret,\r\n} from \"@silly-tavern/scripts/secrets.js\";\r\n\r\n\r\nexport async function getSecrets() {\r\n    const response = await fetch(\"/api/secrets/view\", {\r\n        method: \"POST\",\r\n        headers: getRequestHeaders(),\r\n    });\r\n\r\n    if (response.status === 403) {\r\n        callGenericPopup(\r\n            \"<h3></h3><p> API  config.yaml  allowKeysExposure  true SillyTavern </p>\",\r\n            POPUP_TYPE.TEXT\r\n        );\r\n        return;\r\n    }\r\n\r\n    if (!response.ok) {\r\n        return;\r\n    }\r\n\r\n    // $(\"#dialogue_popup\").addClass(\"wide_dialogue_popup\");\r\n    const data = (await response.json()) as Record<string, string>;\r\n    // console.log(\"data\", data);\r\n    return data;\r\n}\r\n\r\nexport async function switchSecretsFromArray() {\r\n    const secrets = await getSecrets();\r\n    if (!secrets) {\r\n        return;\r\n    }\r\n    if (!STATE.switchState) {\r\n        return;\r\n    }\r\n    const api_key = secrets[CUSTOM_KEY] ?? \"\";\r\n    const api_keys = api_key\r\n        .split(/[\\n;]/)\r\n        .map((v) => v.trim())\r\n        .filter((v) => v.startsWith(\"AIzaSy\"));\r\n    if (api_keys.length <= 1) {\r\n        return;\r\n    }\r\n    const currentKey = secrets.api_key_makersuite;\r\n    let firstKeyApi = \"\";\r\n    if (api_keys.includes(currentKey)) {\r\n        api_keys.splice(api_keys.indexOf(currentKey), 1);\r\n        api_keys.push(currentKey);\r\n    }\r\n    firstKeyApi = api_keys[0];\r\n    writeSecret(\"api_key_makersuite\", firstKeyApi);\r\n    saveKey(CUSTOM_KEY, api_keys.join(\"\\n\"));\r\n    const textarea = $(\"#api_key_makersuite_custom\")[0] as HTMLTextAreaElement;\r\n\r\n    const currentKeyElement = $(\"#current_key_maker_suite\")[0] as HTMLSpanElement;\r\n    const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\r\n    console.log(\"textarea\", textarea);\r\n    console.log(\"api_keys\", api_keys);\r\n    if (!textarea) {\r\n        return;\r\n    }\r\n    currentKeyElement.textContent = `: ${firstKeyApi}`;\r\n    lastKeyElement.textContent = `: ${currentKey}`;\r\n\r\n    textarea.value = api_keys.join(\"\\n\");\r\n}\r\n\r\n\r\nexport async function saveKey(key: string, value: string, isUpdateSecretDisplay = true) {\r\n    // \r\n    await writeSecret(key, value);\r\n    // \r\n    if (isUpdateSecretDisplay) {\r\n        updateSecretDisplay();\r\n    }\r\n    updateSecretDisplay();\r\n    // \r\n    saveSettingsDebounced();\r\n}\r\n","import { oai_settings } from \"@silly-tavern/scripts/openai.js\";\r\nimport { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup.js\";\r\nimport { saveKey } from \"./utils\";\r\ninterface GeminiModel {\r\n\tdescription: string;\r\n\tdisplayName: string;\r\n\tinputTokenLimit: number;\r\n\tmaxTemperature: number;\r\n\tname: string;\r\n\toutputTokenLimit: number;\r\n\tsupportedGenerationMethods: string[];\r\n\ttemperature: number;\r\n\ttopK: number;\r\n\ttopP: number;\r\n\tversion: string;\r\n}\r\ninterface GeminiResponse {\r\n\tmodels: GeminiModel[];\r\n}\r\ninterface Model {\r\n\tname: string;\r\n\tmodel: string;\r\n}\r\n\r\nexport async function getGeminiModel(key: string) {\r\n\ttry {\r\n\t\tconst result = await fetch(\r\n\t\t\t`https://generativelanguage.googleapis.com/v1beta/models/?key=${key}`,\r\n\t\t);\r\n\t\tconst data = (await result.json()) as GeminiResponse;\r\n\t\tif (!data?.models) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\treturn data.models\r\n\t\t\t.filter((model) => model.name.includes(\"gemini\"))\r\n\t\t\t.map((modelData) => {\r\n\t\t\t\tconst model = modelData.name.replace(\"models/\", \"\");\r\n\t\t\t\tconst name = modelData.displayName;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tmodel,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t\treturn [];\r\n\t}\r\n}\r\n\r\nexport const GEMINI_SOURCES = [\"makersuite\", \"aistudio\"];\r\n\r\nexport const isGeminiSource = () =>\r\n\tGEMINI_SOURCES.includes(oai_settings.chat_completion_source);\r\n\r\nexport function throwGeminiError(text = \"\") {\r\n\r\n\tcallGenericPopup(`\r\n\t\t\t\t${text}\r\n\t\t\t\t<table class=\"responsiveTable\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>429/Resource has been exhausted</td>\r\n\t\t\t\t\t\t\t<td> 50k </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Internal Server Error</td>\r\n\t\t\t\t\t\t\t<td> clash**VPN** pc  tun -</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>User location is not supported for the API use.</td>\r\n\t\t\t\t\t\t\t<td>()</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Too Many Requests</td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Bad request</td>\r\n\t\t\t\t\t\t\t<td> API </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>API key expired. Please renew the API key</td>\r\n\t\t\t\t\t\t\t<td>API key </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>The model is overloaded. Please try later</td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Please use a valid role: user, model.</td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>User location is not supported for the API use without a billing account linked.</td>\r\n\t\t\t\t\t\t\t<td> Google ()</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>API key not valid. Please pass a valid API key</td>\r\n\t\t\t\t\t\t\t<td>API  API </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Permission denied: Consumer has been suspended.</td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>MakerSuite API returned no candidate</td>\r\n\t\t\t\t\t\t\t<td>Prompt was blocked due to : OTHER </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Not Found</td>\r\n\t\t\t\t\t\t\t<td> Gemini  Gemini Ultra</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>MakerSuite Candidate text empty</td>\r\n\t\t\t\t\t\t\t<td>//</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>403/Forbidden</td>\r\n\t\t\t\t\t\t\t<td>API key </td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t`, POPUP_TYPE.TEXT, \"\", {\r\n\t\tlarge: true,\r\n\t\twide: true,\r\n\t\tallowVerticalScrolling: true,\r\n\t});\r\n}\r\n\r\nexport async function initGeminiModels(secrets: Record<string, string> = {}) {\r\n\tif (!secrets) {\r\n\t\treturn;\r\n\t}\r\n\tconst modelStr = JSON.parse(secrets.models_makersuite ?? \"[]\") as Model[];\r\n\tconst api_key = secrets.api_key_makersuite ?? \"\";\r\n\tconsole.log(\"ZerxzLib init\");\r\n\tconst optgroup = $(\"#model_google_select > optgroup\");\r\n\tconsole.log(\"optgroup\", optgroup);\r\n\tconst primaryVersions = optgroup[0];\r\n\tconst subVersions = optgroup[1];\r\n\tconsole.log(\"subVersions\", subVersions);\r\n\tconst subVersionsArray = Array.from(\r\n\t\tsubVersions.children,\r\n\t) as HTMLOptionElement[];\r\n\tconst primaryVersionsArray = Array.from(\r\n\t\tprimaryVersions.children,\r\n\t) as HTMLOptionElement[];\r\n\tconsole.log(\"subVersionsArray\", subVersionsArray);\r\n\tconst subVersionsValues = subVersionsArray.map((el) => el.value);\r\n\tconst primaryVersionsValues = primaryVersionsArray.map((el) => el.value);\r\n\tconst originalVersions = [\r\n\t\t...primaryVersionsValues,\r\n\t\t...subVersionsValues,\r\n\t].flat();\r\n\tconst cachedVersions = modelStr.map((model) => model.model);\r\n\t// \r\n\tif (modelStr.length > 0) {\r\n\t\tfor (const model of modelStr) {\r\n\t\t\tif (originalVersions.includes(model.model)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst option = document.createElement(\"option\");\r\n\t\t\toption.value = model.model;\r\n\t\t\toption.text = `${model.name}(${model.model})`;\r\n\t\t\tsubVersions.appendChild(option);\r\n\t\t}\r\n\t}\r\n\tconst geminiModels = await getGeminiModel(api_key);\r\n\tconsole.log(\"geminiModels\", geminiModels);\r\n\tconst geminiModelOptions = geminiModels.filter(\r\n\t\t(model) =>\r\n\t\t\t!originalVersions.includes(model.model) &&\r\n\t\t\t!cachedVersions.includes(model.model),\r\n\t);\r\n\r\n\tif (geminiModelOptions.length === 0) {\r\n\t\tconsole.log(\"\");\r\n\t} else {\r\n\t\tconsole.log(\"geminiModelOptions\", geminiModelOptions);\r\n\t\tfor (const model of geminiModelOptions) {\r\n\t\t\tconst option = document.createElement(\"option\");\r\n\t\t\toption.value = model.model;\r\n\t\t\toption.text = `${model.name}(${model.model})`;\r\n\t\t\tsubVersions.appendChild(option);\r\n\t\t}\r\n\t\tsaveKey(\"models_makersuite\", JSON.stringify(geminiModelOptions));\r\n\t}\r\n\tconst uniqueModels = new Set([...originalVersions, ...cachedVersions, ...geminiModelOptions.map((model) => model.model)]);\r\n\tif (isGeminiSource() && !!secrets.api_key_makersuite_model) {\r\n\t\tif (!uniqueModels.has(secrets.api_key_makersuite_model)) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\toai_settings.google_model = secrets.api_key_makersuite_model;\r\n\t\t$('#model_google_select').val(oai_settings.google_model);\r\n\t\t$(`#model_google_select option[value=\"${oai_settings.google_model}\"`)\r\n\t\t\t// @ts-ignore\r\n\t\t\t.attr('selected', true);\r\n\t}\r\n\r\n}\r\n","import { STATE } from \"./constants\";\r\nimport { isGeminiSource, throwGeminiError } from \"./gemini\";\r\n\r\n// @ts-ignore\r\nconst oldError = toastr.error;\r\nexport function initToastr() {\r\n    // @ts-ignore\r\n    toastr.error = (/** @type { any[]} */ ...args) => {\r\n        oldError(...args);\r\n        console.log(args);\r\n        console.error(...args);\r\n        if (!isGeminiSource() || !STATE.throwGeminiErrorState) {\r\n            return;\r\n        }\r\n        const [message, type] = args;\r\n\r\n        if (!type) {\r\n            return;\r\n        }\r\n        if (type === \"Chat Completion API\") {\r\n            const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\r\n            throwGeminiError(`<h3>Chat Completion API </h3>\r\n\t\t\t\t<p>${message}</p>\r\n\t\t\t\t<p> ${lastKeyElement.textContent}</p>`);\r\n        }\r\n    };\r\n}\r\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){const e=this.constructor,h=this[t];if(i??=e.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(e._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach((t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.1\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.3.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.1\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{I:t}=o,i=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2,MATHML:3},e=(o,t)=>void 0===t?void 0!==o?._$litType$:o?._$litType$===t,l=o=>null!=o?._$litType$?.h,d=o=>void 0!==o?._$litDirective$,c=o=>o?._$litDirective$,f=o=>void 0===o.strings,r=()=>document.createComment(\"\"),s=(o,i,n)=>{const e=o._$AA.parentNode,l=void 0===i?o._$AB:i._$AA;if(void 0===n){const i=e.insertBefore(r(),l),d=e.insertBefore(r(),l);n=new t(i,d,o,o.options)}else{const t=n._$AB.nextSibling,i=n._$AM,d=i!==o;if(d){let t;n._$AQ?.(o),n._$AM=o,void 0!==n._$AP&&(t=o._$AU)!==i._$AU&&n._$AP(t)}if(t!==l||d){let o=n._$AA;for(;o!==t;){const t=o.nextSibling;e.insertBefore(o,l),o=t}}}return n},v=(o,t,i=o)=>(o._$AI(t,i),o),u={},m=(o,t=u)=>o._$AH=t,p=o=>o._$AH,M=o=>{o._$AR(),o._$AA.remove()},h=o=>{o._$AR()};export{n as TemplateResultType,h as clearPart,p as getCommittedValue,c as getDirectiveClass,s as insertPart,l as isCompiledTemplateResult,d as isDirectiveResult,i as isPrimitive,f as isSingleExpression,e as isTemplateResult,M as removePart,v as setChildPartValue,m as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const d=l(s),{values:p,keys:a}=this.dt(t,r,c);if(!Array.isArray(d))return this.ut=a,p;const h=this.ut??=[],v=[];let m,y,x=0,j=d.length-1,k=0,w=p.length-1;for(;x<=j&&k<=w;)if(null===d[x])x++;else if(null===d[j])j--;else if(h[x]===a[k])v[k]=o(d[x],p[k]),x++,k++;else if(h[j]===a[w])v[w]=o(d[j],p[w]),j--,w--;else if(h[x]===a[w])v[w]=o(d[x],p[w]),i(s,v[w+1],d[x]),x++,w--;else if(h[j]===a[k])v[k]=o(d[j],p[k]),i(s,d[x],d[j]),j--,k++;else if(void 0===m&&(m=u(a,k,w),y=u(h,x,j)),m.has(h[x]))if(m.has(h[j])){const e=y.get(a[k]),t=void 0!==e?d[e]:null;if(null===t){const e=i(s,d[x]);o(e,p[k]),v[k]=e}else v[k]=o(t,p[k]),i(s,d[x],t),d[e]=null;k++}else n(d[j]),j--;else n(d[x]),x++;for(;k<=w;){const e=i(s,v[w+1]);o(e,p[k]),v[k++]=e}for(;x<=j;){const e=d[x++];null!==e&&n(e)}return this.ut=a,f(s,v),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","import { LitElement, css, html } from 'lit';\r\nimport { repeat } from 'lit/directives/repeat.js';\r\nimport { CUSTOM_KEY, getSecrets, initGeminiModels, saveKey, STATE, throwGeminiError, } from '../utils';\r\nimport {\r\n    writeSecret,\r\n} from \"@silly-tavern/scripts/secrets.js\";\r\ninterface GeminiLayoutsOption {\r\n    currentKey: string;\r\n    lastKey: string;\r\n    throwGeminiErrorState: boolean;\r\n    switchKeyMakerSuite: boolean;\r\n    apiKeys: string;\r\n}\r\n// `\r\n// <div class=\"menu_button menu_button_icon interactable\" title=\"\" @click=\"${this.handleSaveKey}\"><span></span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"\" @click=\"${this.handleGetNewModel}\"><span></span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"\" @click=\"${this.handleSwitchKeyMakerSuite}\"><span></span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"\" @click=\"${this.handleThrowGeminiError}\"><span></span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"\" @click=\"${this.handleSwitchGeminiError}\"><span></span></div>\r\n// `\r\nclass GeminiLayouts extends LitElement {\r\n    static properties = {\r\n        currentKey: { type: String, reflect: true },\r\n        lastKey: { type: String, reflect: true },\r\n        throwGeminiErrorState: { type: Boolean, reflect: true },\r\n        switchKeyMakerSuite: { type: Boolean, reflect: true },\r\n        apiKeys: { type: String, reflect: true },\r\n        apiCallCount: { type: Number, reflect: true },\r\n    }\r\n    declare currentKey: string;\r\n    declare lastKey: string;\r\n    declare throwGeminiErrorState: boolean;\r\n    declare switchKeyMakerSuite: boolean;\r\n    declare apiKeys: string;\r\n    declare apiCallCount: number;\r\n    constructor() {\r\n        super();\r\n        this.currentKey = \"\";\r\n        this.lastKey = \"\";\r\n        this.throwGeminiErrorState = false;\r\n        this.switchKeyMakerSuite = false;\r\n        this.apiKeys = \"\";\r\n        this.apiCallCount = Number(localStorage.getItem(\"gemini_api_call_count\") || 0);\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        window.addEventListener('gemini-api-call-updated', this.updateApiCount.bind(this));\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        window.removeEventListener('gemini-api-call-updated', this.updateApiCount.bind(this));\r\n    }\r\n\r\n    updateApiCount() {\r\n        this.apiCallCount = Number(localStorage.getItem(\"gemini_api_call_count\") || 0);\r\n    }\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n    render() {\r\n        console.log('GeminiLayouts render');\r\n        console.log(\"this\", this);\r\n        const buttons = [\r\n            {\r\n                name: \"\",\r\n                handle: this.handleSaveKey\r\n            },\r\n            {\r\n                name: \"\",\r\n                handle: this.handleGetNewModel\r\n            },\r\n            {\r\n                name: \"\",\r\n                handle: this.handleSwitchKeyMakerSuite\r\n            },\r\n            {\r\n                name: \"\",\r\n                handle: this.handleThrowGeminiError\r\n            },\r\n            {\r\n                name: \"\",\r\n                handle: this.handleSwitchGeminiError\r\n            },\r\n            {\r\n                name: \"\",\r\n                handle: this.handleClearCount\r\n            }\r\n        ]\r\n        return html`\r\n        <div>\r\n            <h4>:</h4>\r\n            <div id=\"current_key_maker_suite\">: ${this.currentKey}</div>\r\n            <div id=\"last_key_maker_suite\">: ${this.lastKey}</div>\r\n            <div id=\"switch_key_maker_suite\">:${this.switchKeyMakerSuite ? \"\" : \"\"}</div>\r\n            <div id=\"throw_gemini_error\">:${this.throwGeminiErrorState ? \"\" : \"\"}</div>\r\n            <div id=\"gemini_api_call_count\">API: ${this.apiCallCount}</div>\r\n        </div>\r\n        <div class=\"flex-container flex\">\r\n            <h4>Google AI Studio API </h4>\r\n            <textarea class=\"text_pole textarea_compact autoSetHeight\" placeholder=\"API\"\r\n            id=\"api_key_makersuite_custom\" style=\"height: 100px;\" @change=${this.handleTextareaInput} .value=${this.apiKeys}></textarea>\r\n        </div>\r\n        <div class=\"flex-container flex\">\r\n        ${repeat(\r\n            buttons,\r\n            ({ name }) => name,\r\n            ({ name, handle }) => html`\r\n                                    <div class=\"menu_button menu_button_icon interactable\" title=\"${name}\" @click=\"${handle}\"><span>${name}</span></div>`,\r\n        )}\r\n        </div>\r\n        <hr>\r\n        `;\r\n    }\r\n    handleTextareaInput(event: Event) {\r\n        console.log('handleTextareaInput', event);\r\n        const textarea = event.target as HTMLTextAreaElement;\r\n\r\n        const value = textarea.value\r\n            .split(/[\\n;]/)\r\n            .map((v) => v.trim())\r\n            .filter((v) => v.length > 0 && v.startsWith(\"AIzaSy\"));\r\n\r\n        this.apiKeys = value.join(\"\\n\");\r\n        textarea.value = this.apiKeys;\r\n        if (value.length === 0) {\r\n            saveKey(CUSTOM_KEY, this.apiKeys);\r\n            return;\r\n        }\r\n        const fistValue = value[0];\r\n        writeSecret(\"api_key_makersuite\", fistValue);\r\n        saveKey(CUSTOM_KEY, this.apiKeys);\r\n        // this.requestUpdate();\r\n    }\r\n    handleThrowGeminiError() {\r\n        console.log('handleThrowGeminiError');\r\n        throwGeminiError();\r\n    }\r\n\r\n    async handleGetNewModel() {\r\n        console.log('handleGetNewModel');\r\n        const secrets = await getSecrets();\r\n        await initGeminiModels(secrets);\r\n    }\r\n    handleSaveKey() {\r\n        console.log('handleSaveKey');\r\n        const value = this.apiKeys\r\n        if (value.length === 0) {\r\n            saveKey(CUSTOM_KEY, value);\r\n            return;\r\n        }\r\n        const fistValue = value[0];\r\n        writeSecret(\"api_key_makersuite\", fistValue);\r\n        saveKey(CUSTOM_KEY, this.apiKeys);\r\n\r\n    }\r\n    handleSwitchKeyMakerSuite() {\r\n        console.log('handleSwitchKeyMakerSuite');\r\n        STATE.switchState = !STATE.switchState;\r\n        localStorage.setItem(\"switch_key_maker_suite\", STATE.switchState.toString());\r\n        this.switchKeyMakerSuite = STATE.switchState;\r\n    }\r\n    handleSwitchGeminiError() {\r\n        console.log('handleSwitchGeminiError');\r\n        STATE.throwGeminiErrorState = !STATE.throwGeminiErrorState;\r\n        localStorage.setItem(\"throw_gemini_error\", STATE.throwGeminiErrorState.toString());\r\n        this.throwGeminiErrorState = STATE.throwGeminiErrorState;\r\n    }\r\n    handleClearCount() {\r\n        this.apiCallCount = 0;\r\n        localStorage.setItem(\"gemini_api_call_count\", \"0\");\r\n    }\r\n}\r\n\r\ncustomElements.define('gemini-layouts', GeminiLayouts);\r\nexport { GeminiLayouts };\r\n","import{isSingleExpression as i}from\"./directive-helpers.js\";import{Directive as t,PartType as e}from\"./directive.js\";export{directive}from\"./directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=(i,t)=>{const e=i._$AN;if(void 0===e)return!1;for(const i of e)i._$AO?.(t,!1),s(i,t);return!0},o=i=>{let t,e;do{if(void 0===(t=i._$AM))break;e=t._$AN,e.delete(i),i=t}while(0===e?.size)},r=i=>{for(let t;t=i._$AM;i=t){let e=t._$AN;if(void 0===e)t._$AN=e=new Set;else if(e.has(i))break;e.add(i),c(t)}};function h(i){void 0!==this._$AN?(o(this),this._$AM=i,r(this)):this._$AM=i}function n(i,t=!1,e=0){const r=this._$AH,h=this._$AN;if(void 0!==h&&0!==h.size)if(t)if(Array.isArray(r))for(let i=e;i<r.length;i++)s(r[i],!1),o(r[i]);else null!=r&&(s(r,!1),o(r));else s(this,i)}const c=i=>{i.type==e.CHILD&&(i._$AP??=n,i._$AQ??=h)};class f extends t{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,t,e){super._$AT(i,t,e),r(this),this.isConnected=i._$AU}_$AO(i,t=!0){i!==this.isConnected&&(this.isConnected=i,i?this.reconnected?.():this.disconnected?.()),t&&(s(this,i),o(this))}setValue(t){if(i(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}export{f as AsyncDirective,t as Directive,e as PartType};\n//# sourceMappingURL=async-directive.js.map\n","import{nothing as t}from\"../lit-html.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{directive as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=()=>new h;class h{}const o=new WeakMap,n=s(class extends i{render(i){return t}update(i,[s]){const e=s!==this.G;return e&&void 0!==this.G&&this.rt(void 0),(e||this.lt!==this.ct)&&(this.G=s,this.ht=i.options?.host,this.rt(this.ct=i.element)),t}rt(t){if(this.isConnected||(t=void 0),\"function\"==typeof this.G){const i=this.ht??globalThis;let s=o.get(i);void 0===s&&(s=new WeakMap,o.set(i,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,t),void 0!==t&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return\"function\"==typeof this.G?o.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});export{e as createRef,n as ref};\n//# sourceMappingURL=ref.js.map\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateIn = (member, obj) => {\n  if (Object(obj) !== obj)\n    throw TypeError('Cannot use the \"in\" operator on this value');\n  return member.has(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultEquals(a, b) {\n  return Object.is(a, b);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nlet activeConsumer = null;\nlet inNotificationPhase = false;\nlet epoch = 1;\nconst SIGNAL = /* @__PURE__ */ Symbol(\"SIGNAL\");\nfunction setActiveConsumer(consumer) {\n  const prev = activeConsumer;\n  activeConsumer = consumer;\n  return prev;\n}\nfunction getActiveConsumer() {\n  return activeConsumer;\n}\nfunction isInNotificationPhase() {\n  return inNotificationPhase;\n}\nconst REACTIVE_NODE = {\n  version: 0,\n  lastCleanEpoch: 0,\n  dirty: false,\n  producerNode: void 0,\n  producerLastReadVersion: void 0,\n  producerIndexOfThis: void 0,\n  nextProducerIndex: 0,\n  liveConsumerNode: void 0,\n  liveConsumerIndexOfThis: void 0,\n  consumerAllowSignalWrites: false,\n  consumerIsAlwaysLive: false,\n  producerMustRecompute: () => false,\n  producerRecomputeValue: () => {\n  },\n  consumerMarkedDirty: () => {\n  },\n  consumerOnSignalRead: () => {\n  }\n};\nfunction producerAccessed(node) {\n  if (inNotificationPhase) {\n    throw new Error(\n      typeof ngDevMode !== \"undefined\" && ngDevMode ? `Assertion error: signal read during notification phase` : \"\"\n    );\n  }\n  if (activeConsumer === null) {\n    return;\n  }\n  activeConsumer.consumerOnSignalRead(node);\n  const idx = activeConsumer.nextProducerIndex++;\n  assertConsumerNode(activeConsumer);\n  if (idx < activeConsumer.producerNode.length && activeConsumer.producerNode[idx] !== node) {\n    if (consumerIsLive(activeConsumer)) {\n      const staleProducer = activeConsumer.producerNode[idx];\n      producerRemoveLiveConsumerAtIndex(staleProducer, activeConsumer.producerIndexOfThis[idx]);\n    }\n  }\n  if (activeConsumer.producerNode[idx] !== node) {\n    activeConsumer.producerNode[idx] = node;\n    activeConsumer.producerIndexOfThis[idx] = consumerIsLive(activeConsumer) ? producerAddLiveConsumer(node, activeConsumer, idx) : 0;\n  }\n  activeConsumer.producerLastReadVersion[idx] = node.version;\n}\nfunction producerIncrementEpoch() {\n  epoch++;\n}\nfunction producerUpdateValueVersion(node) {\n  if (!node.dirty && node.lastCleanEpoch === epoch) {\n    return;\n  }\n  if (!node.producerMustRecompute(node) && !consumerPollProducersForChange(node)) {\n    node.dirty = false;\n    node.lastCleanEpoch = epoch;\n    return;\n  }\n  node.producerRecomputeValue(node);\n  node.dirty = false;\n  node.lastCleanEpoch = epoch;\n}\nfunction producerNotifyConsumers(node) {\n  if (node.liveConsumerNode === void 0) {\n    return;\n  }\n  const prev = inNotificationPhase;\n  inNotificationPhase = true;\n  try {\n    for (const consumer of node.liveConsumerNode) {\n      if (!consumer.dirty) {\n        consumerMarkDirty(consumer);\n      }\n    }\n  } finally {\n    inNotificationPhase = prev;\n  }\n}\nfunction producerUpdatesAllowed() {\n  return (activeConsumer == null ? void 0 : activeConsumer.consumerAllowSignalWrites) !== false;\n}\nfunction consumerMarkDirty(node) {\n  var _a;\n  node.dirty = true;\n  producerNotifyConsumers(node);\n  (_a = node.consumerMarkedDirty) == null ? void 0 : _a.call(node.wrapper ?? node);\n}\nfunction consumerBeforeComputation(node) {\n  node && (node.nextProducerIndex = 0);\n  return setActiveConsumer(node);\n}\nfunction consumerAfterComputation(node, prevConsumer) {\n  setActiveConsumer(prevConsumer);\n  if (!node || node.producerNode === void 0 || node.producerIndexOfThis === void 0 || node.producerLastReadVersion === void 0) {\n    return;\n  }\n  if (consumerIsLive(node)) {\n    for (let i = node.nextProducerIndex; i < node.producerNode.length; i++) {\n      producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n    }\n  }\n  while (node.producerNode.length > node.nextProducerIndex) {\n    node.producerNode.pop();\n    node.producerLastReadVersion.pop();\n    node.producerIndexOfThis.pop();\n  }\n}\nfunction consumerPollProducersForChange(node) {\n  assertConsumerNode(node);\n  for (let i = 0; i < node.producerNode.length; i++) {\n    const producer = node.producerNode[i];\n    const seenVersion = node.producerLastReadVersion[i];\n    if (seenVersion !== producer.version) {\n      return true;\n    }\n    producerUpdateValueVersion(producer);\n    if (seenVersion !== producer.version) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction producerAddLiveConsumer(node, consumer, indexOfThis) {\n  var _a;\n  assertProducerNode(node);\n  assertConsumerNode(node);\n  if (node.liveConsumerNode.length === 0) {\n    (_a = node.watched) == null ? void 0 : _a.call(node.wrapper);\n    for (let i = 0; i < node.producerNode.length; i++) {\n      node.producerIndexOfThis[i] = producerAddLiveConsumer(node.producerNode[i], node, i);\n    }\n  }\n  node.liveConsumerIndexOfThis.push(indexOfThis);\n  return node.liveConsumerNode.push(consumer) - 1;\n}\nfunction producerRemoveLiveConsumerAtIndex(node, idx) {\n  var _a;\n  assertProducerNode(node);\n  assertConsumerNode(node);\n  if (typeof ngDevMode !== \"undefined\" && ngDevMode && idx >= node.liveConsumerNode.length) {\n    throw new Error(\n      `Assertion error: active consumer index ${idx} is out of bounds of ${node.liveConsumerNode.length} consumers)`\n    );\n  }\n  if (node.liveConsumerNode.length === 1) {\n    (_a = node.unwatched) == null ? void 0 : _a.call(node.wrapper);\n    for (let i = 0; i < node.producerNode.length; i++) {\n      producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n    }\n  }\n  const lastIdx = node.liveConsumerNode.length - 1;\n  node.liveConsumerNode[idx] = node.liveConsumerNode[lastIdx];\n  node.liveConsumerIndexOfThis[idx] = node.liveConsumerIndexOfThis[lastIdx];\n  node.liveConsumerNode.length--;\n  node.liveConsumerIndexOfThis.length--;\n  if (idx < node.liveConsumerNode.length) {\n    const idxProducer = node.liveConsumerIndexOfThis[idx];\n    const consumer = node.liveConsumerNode[idx];\n    assertConsumerNode(consumer);\n    consumer.producerIndexOfThis[idxProducer] = idx;\n  }\n}\nfunction consumerIsLive(node) {\n  var _a;\n  return node.consumerIsAlwaysLive || (((_a = node == null ? void 0 : node.liveConsumerNode) == null ? void 0 : _a.length) ?? 0) > 0;\n}\nfunction assertConsumerNode(node) {\n  node.producerNode ?? (node.producerNode = []);\n  node.producerIndexOfThis ?? (node.producerIndexOfThis = []);\n  node.producerLastReadVersion ?? (node.producerLastReadVersion = []);\n}\nfunction assertProducerNode(node) {\n  node.liveConsumerNode ?? (node.liveConsumerNode = []);\n  node.liveConsumerIndexOfThis ?? (node.liveConsumerIndexOfThis = []);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction computedGet(node) {\n  producerUpdateValueVersion(node);\n  producerAccessed(node);\n  if (node.value === ERRORED) {\n    throw node.error;\n  }\n  return node.value;\n}\nfunction createComputed(computation) {\n  const node = Object.create(COMPUTED_NODE);\n  node.computation = computation;\n  const computed = () => computedGet(node);\n  computed[SIGNAL] = node;\n  return computed;\n}\nconst UNSET = /* @__PURE__ */ Symbol(\"UNSET\");\nconst COMPUTING = /* @__PURE__ */ Symbol(\"COMPUTING\");\nconst ERRORED = /* @__PURE__ */ Symbol(\"ERRORED\");\nconst COMPUTED_NODE = /* @__PURE__ */ (() => {\n  return {\n    ...REACTIVE_NODE,\n    value: UNSET,\n    dirty: true,\n    error: null,\n    equal: defaultEquals,\n    producerMustRecompute(node) {\n      return node.value === UNSET || node.value === COMPUTING;\n    },\n    producerRecomputeValue(node) {\n      if (node.value === COMPUTING) {\n        throw new Error(\"Detected cycle in computations.\");\n      }\n      const oldValue = node.value;\n      node.value = COMPUTING;\n      const prevConsumer = consumerBeforeComputation(node);\n      let newValue;\n      let wasEqual = false;\n      try {\n        newValue = node.computation.call(node.wrapper);\n        const oldOk = oldValue !== UNSET && oldValue !== ERRORED;\n        wasEqual = oldOk && node.equal.call(node.wrapper, oldValue, newValue);\n      } catch (err) {\n        newValue = ERRORED;\n        node.error = err;\n      } finally {\n        consumerAfterComputation(node, prevConsumer);\n      }\n      if (wasEqual) {\n        node.value = oldValue;\n        return;\n      }\n      node.value = newValue;\n      node.version++;\n    }\n  };\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultThrowError() {\n  throw new Error();\n}\nlet throwInvalidWriteToSignalErrorFn = defaultThrowError;\nfunction throwInvalidWriteToSignalError() {\n  throwInvalidWriteToSignalErrorFn();\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createSignal(initialValue) {\n  const node = Object.create(SIGNAL_NODE);\n  node.value = initialValue;\n  const getter = () => {\n    producerAccessed(node);\n    return node.value;\n  };\n  getter[SIGNAL] = node;\n  return getter;\n}\nfunction signalGetFn() {\n  producerAccessed(this);\n  return this.value;\n}\nfunction signalSetFn(node, newValue) {\n  if (!producerUpdatesAllowed()) {\n    throwInvalidWriteToSignalError();\n  }\n  if (!node.equal.call(node.wrapper, node.value, newValue)) {\n    node.value = newValue;\n    signalValueChanged(node);\n  }\n}\nconst SIGNAL_NODE = /* @__PURE__ */ (() => {\n  return {\n    ...REACTIVE_NODE,\n    equal: defaultEquals,\n    value: void 0\n  };\n})();\nfunction signalValueChanged(node) {\n  node.version++;\n  producerIncrementEpoch();\n  producerNotifyConsumers(node);\n}\n/**\n * @license\n * Copyright 2024 Bloomberg Finance L.P.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst NODE = Symbol(\"node\");\nvar Signal;\n((Signal2) => {\n  var _a, _brand, brand_fn, _b, _brand2, brand_fn2;\n  class State {\n    constructor(initialValue, options = {}) {\n      __privateAdd(this, _brand);\n      __publicField(this, _a);\n      const ref = createSignal(initialValue);\n      const node = ref[SIGNAL];\n      this[NODE] = node;\n      node.wrapper = this;\n      if (options) {\n        const equals = options.equals;\n        if (equals) {\n          node.equal = equals;\n        }\n        node.watched = options[Signal2.subtle.watched];\n        node.unwatched = options[Signal2.subtle.unwatched];\n      }\n    }\n    get() {\n      if (!(0, Signal2.isState)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.State.prototype.get\");\n      return signalGetFn.call(this[NODE]);\n    }\n    set(newValue) {\n      if (!(0, Signal2.isState)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.State.prototype.set\");\n      if (isInNotificationPhase()) {\n        throw new Error(\"Writes to signals not permitted during Watcher callback\");\n      }\n      const ref = this[NODE];\n      signalSetFn(ref, newValue);\n    }\n  }\n  _a = NODE;\n  _brand = new WeakSet();\n  brand_fn = function() {\n  };\n  Signal2.isState = (s) => typeof s === \"object\" && __privateIn(_brand, s);\n  Signal2.State = State;\n  class Computed {\n    // Create a Signal which evaluates to the value returned by the callback.\n    // Callback is called with this signal as the parameter.\n    constructor(computation, options) {\n      __privateAdd(this, _brand2);\n      __publicField(this, _b);\n      const ref = createComputed(computation);\n      const node = ref[SIGNAL];\n      node.consumerAllowSignalWrites = true;\n      this[NODE] = node;\n      node.wrapper = this;\n      if (options) {\n        const equals = options.equals;\n        if (equals) {\n          node.equal = equals;\n        }\n        node.watched = options[Signal2.subtle.watched];\n        node.unwatched = options[Signal2.subtle.unwatched];\n      }\n    }\n    get() {\n      if (!(0, Signal2.isComputed)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.Computed.prototype.get\");\n      return computedGet(this[NODE]);\n    }\n  }\n  _b = NODE;\n  _brand2 = new WeakSet();\n  brand_fn2 = function() {\n  };\n  Signal2.isComputed = (c) => typeof c === \"object\" && __privateIn(_brand2, c);\n  Signal2.Computed = Computed;\n  ((subtle2) => {\n    var _a2, _brand3, brand_fn3, _assertSignals, assertSignals_fn;\n    function untrack(cb) {\n      let output;\n      let prevActiveConsumer = null;\n      try {\n        prevActiveConsumer = setActiveConsumer(null);\n        output = cb();\n      } finally {\n        setActiveConsumer(prevActiveConsumer);\n      }\n      return output;\n    }\n    subtle2.untrack = untrack;\n    function introspectSources(sink) {\n      var _a3;\n      if (!(0, Signal2.isComputed)(sink) && !(0, Signal2.isWatcher)(sink)) {\n        throw new TypeError(\"Called introspectSources without a Computed or Watcher argument\");\n      }\n      return ((_a3 = sink[NODE].producerNode) == null ? void 0 : _a3.map((n) => n.wrapper)) ?? [];\n    }\n    subtle2.introspectSources = introspectSources;\n    function introspectSinks(signal) {\n      var _a3;\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n        throw new TypeError(\"Called introspectSinks without a Signal argument\");\n      }\n      return ((_a3 = signal[NODE].liveConsumerNode) == null ? void 0 : _a3.map((n) => n.wrapper)) ?? [];\n    }\n    subtle2.introspectSinks = introspectSinks;\n    function hasSinks(signal) {\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n        throw new TypeError(\"Called hasSinks without a Signal argument\");\n      }\n      const liveConsumerNode = signal[NODE].liveConsumerNode;\n      if (!liveConsumerNode)\n        return false;\n      return liveConsumerNode.length > 0;\n    }\n    subtle2.hasSinks = hasSinks;\n    function hasSources(signal) {\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isWatcher)(signal)) {\n        throw new TypeError(\"Called hasSources without a Computed or Watcher argument\");\n      }\n      const producerNode = signal[NODE].producerNode;\n      if (!producerNode)\n        return false;\n      return producerNode.length > 0;\n    }\n    subtle2.hasSources = hasSources;\n    class Watcher {\n      // When a (recursive) source of Watcher is written to, call this callback,\n      // if it hasn't already been called since the last `watch` call.\n      // No signals may be read or written during the notify.\n      constructor(notify) {\n        __privateAdd(this, _brand3);\n        __privateAdd(this, _assertSignals);\n        __publicField(this, _a2);\n        let node = Object.create(REACTIVE_NODE);\n        node.wrapper = this;\n        node.consumerMarkedDirty = notify;\n        node.consumerIsAlwaysLive = true;\n        node.consumerAllowSignalWrites = false;\n        node.producerNode = [];\n        this[NODE] = node;\n      }\n      // Add these signals to the Watcher's set, and set the watcher to run its\n      // notify callback next time any signal in the set (or one of its dependencies) changes.\n      // Can be called with no arguments just to reset the \"notified\" state, so that\n      // the notify callback will be invoked again.\n      watch(...signals) {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called unwatch without Watcher receiver\");\n        }\n        __privateMethod(this, _assertSignals, assertSignals_fn).call(this, signals);\n        const node = this[NODE];\n        node.dirty = false;\n        const prev = setActiveConsumer(node);\n        for (const signal of signals) {\n          producerAccessed(signal[NODE]);\n        }\n        setActiveConsumer(prev);\n      }\n      // Remove these signals from the watched set (e.g., for an effect which is disposed)\n      unwatch(...signals) {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called unwatch without Watcher receiver\");\n        }\n        __privateMethod(this, _assertSignals, assertSignals_fn).call(this, signals);\n        const node = this[NODE];\n        assertConsumerNode(node);\n        for (let i = node.producerNode.length - 1; i >= 0; i--) {\n          if (signals.includes(node.producerNode[i].wrapper)) {\n            producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n            const lastIdx = node.producerNode.length - 1;\n            node.producerNode[i] = node.producerNode[lastIdx];\n            node.producerIndexOfThis[i] = node.producerIndexOfThis[lastIdx];\n            node.producerNode.length--;\n            node.producerIndexOfThis.length--;\n            node.nextProducerIndex--;\n            if (i < node.producerNode.length) {\n              const idxConsumer = node.producerIndexOfThis[i];\n              const producer = node.producerNode[i];\n              assertProducerNode(producer);\n              producer.liveConsumerIndexOfThis[idxConsumer] = i;\n            }\n          }\n        }\n      }\n      // Returns the set of computeds in the Watcher's set which are still yet\n      // to be re-evaluated\n      getPending() {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called getPending without Watcher receiver\");\n        }\n        const node = this[NODE];\n        return node.producerNode.filter((n) => n.dirty).map((n) => n.wrapper);\n      }\n    }\n    _a2 = NODE;\n    _brand3 = new WeakSet();\n    brand_fn3 = function() {\n    };\n    _assertSignals = new WeakSet();\n    assertSignals_fn = function(signals) {\n      for (const signal of signals) {\n        if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n          throw new TypeError(\"Called watch/unwatch without a Computed or State argument\");\n        }\n      }\n    };\n    Signal2.isWatcher = (w) => __privateIn(_brand3, w);\n    subtle2.Watcher = Watcher;\n    function currentComputed() {\n      var _a3;\n      return (_a3 = getActiveConsumer()) == null ? void 0 : _a3.wrapper;\n    }\n    subtle2.currentComputed = currentComputed;\n    subtle2.watched = Symbol(\"watched\");\n    subtle2.unwatched = Symbol(\"unwatched\");\n  })(Signal2.subtle || (Signal2.subtle = {}));\n})(Signal || (Signal = {}));\nexport {\n  Signal\n};\n","import{Signal as t}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const i=Symbol(\"SignalWatcherBrand\"),s=new FinalizationRegistry((({watcher:t,signal:i})=>{t.unwatch(i)})),h=new WeakMap;function e(e){return!0===e[i]?(console.warn(\"SignalWatcher should not be applied to the same class more than once.\"),e):class extends e{constructor(){super(...arguments),this._$St=new t.State(0),this._$Si=!1,this._$So=!0,this._$Sh=new Set}_$Sl(){if(void 0!==this._$Su)return;this._$Sv=new t.Computed((()=>{this._$St.get(),super.performUpdate()}));const i=this._$Su=new t.subtle.Watcher((function(){const t=h.get(this);void 0!==t&&(!1===t._$Si&&t.requestUpdate(),this.watch())}));h.set(i,this),s.register(this,{watcher:i,signal:this._$Sv}),i.watch(this._$Sv)}_$Sp(){void 0!==this._$Su&&(this._$Su.unwatch(this._$Sv),this._$Sv=void 0,this._$Su=void 0)}performUpdate(){this.isUpdatePending&&(this._$Sl(),this._$Si=!0,this._$St.set(this._$St.get()+1),this._$Si=!1,this._$Sv.get())}update(t){try{this._$So?(this._$So=!1,super.update(t)):this._$Sh.forEach((t=>t.commit()))}finally{this.isUpdatePending=!1,this._$Sh.clear()}}requestUpdate(t,i,s){this._$So=!0,super.requestUpdate(t,i,s)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),queueMicrotask((()=>{!1===this.isConnected&&this._$Sp()}))}_(t){this._$Sh.add(t);const i=this._$So;this.requestUpdate(),this._$So=i}m(t){this._$Sh.delete(t)}}}export{e as SignalWatcher};\n//# sourceMappingURL=signal-watcher.js.map\n","import{directive as i}from\"lit/directive.js\";import{AsyncDirective as t}from\"lit/async-directive.js\";import{Signal as s}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class h extends t{_$Sl(){if(void 0!==this._$Su)return;this._$SW=new s.Computed((()=>{var i;return null===(i=this._$Sj)||void 0===i?void 0:i.get()}));const i=this._$Su=new s.subtle.Watcher((()=>{var t;null===(t=this._$SO)||void 0===t||t._(this),i.watch()}));i.watch(this._$SW)}_$Sp(){var i;void 0!==this._$Su&&(this._$Su.unwatch(this._$SW),this._$SW=void 0,this._$Su=void 0,null===(i=this._$SO)||void 0===i||i.m(this))}commit(){this.setValue(s.subtle.untrack((()=>{var i;return null===(i=this._$SW)||void 0===i?void 0:i.get()})))}render(i){return s.subtle.untrack((()=>i.get()))}update(i,[t]){var h,o;return null!==(h=this._$SO)&&void 0!==h||(this._$SO=null===(o=i.options)||void 0===o?void 0:o.host),t!==this._$Sj&&void 0!==this._$Sj&&this._$Sp(),this._$Sj=t,this._$Sl(),s.subtle.untrack((()=>this._$SW.get()))}disconnected(){this._$Sp()}reconnected(){this._$Sl()}}const o=i(h);export{h as WatchDirective,o as watch};\n//# sourceMappingURL=watch.js.map\n","import{html as o,svg as t}from\"lit/html.js\";import{watch as s}from\"./watch.js\";import{Signal as i}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const m=o=>(t,...m)=>o(t,...m.map((o=>o instanceof i.State||o instanceof i.Computed?s(o):o))),l=m(o),r=m(t);export{l as html,r as svg,m as withWatch};\n//# sourceMappingURL=html-tag.js.map\n","import{Signal as t}from\"signal-polyfill\";export*from\"signal-polyfill\";export{SignalWatcher}from\"./lib/signal-watcher.js\";export{WatchDirective,watch}from\"./lib/watch.js\";export{html,svg,withWatch}from\"./lib/html-tag.js\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const l=t.State,o=t.Computed,r=(l,o)=>new t.State(l,o),i=(l,o)=>new t.Computed(l,o);export{o as Computed,l as State,i as computed,r as signal};\n//# sourceMappingURL=index.js.map\n","import{noChange as t}from\"../lit-html.js\";import{directive as e,Directive as r,PartType as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const n=\"important\",i=\" !\"+n,o=e(class extends r{constructor(t){if(super(t),t.type!==s.ATTRIBUTE||\"style\"!==t.name||t.strings?.length>2)throw Error(\"The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.\")}render(t){return Object.keys(t).reduce(((e,r)=>{const s=t[r];return null==s?e:e+`${r=r.includes(\"-\")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,\"-$&\").toLowerCase()}:${s};`}),\"\")}update(e,[r]){const{style:s}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(r)),this.render(r);for(const t of this.ft)null==r[t]&&(this.ft.delete(t),t.includes(\"-\")?s.removeProperty(t):s[t]=null);for(const t in r){const e=r[t];if(null!=e){this.ft.add(t);const r=\"string\"==typeof e&&e.endsWith(i);t.includes(\"-\")||r?s.setProperty(t,r?e.slice(0,-11):e,r?n:\"\"):s[t]=e}}return t}});export{o as styleMap};\n//# sourceMappingURL=style-map.js.map\n","import {\r\n    saveSettingsDebounced,\r\n} from \"@silly-tavern/script.js\";\r\nimport { extension_settings } from '@silly-tavern/scripts/extensions.js';\r\nimport { signal, type Signal } from '@lit-labs/signals';\r\ninterface SignalState<T> {\r\n    rawSignal: Signal.State<T>;\r\n    get: () => T;\r\n    set: (value: T) => void;\r\n}\r\ntype SignalStateMap<T> = {\r\n    [K in keyof T]: SignalState<T[K]>\r\n};\r\nconst extensionName = \"extension-zerxz-lib\";\r\nconst extensionFolderPath = `scripts/extensions/third-party/${extensionName}`;\r\n//@ts-ignore\r\nextension_settings[extensionName] ??= {};\r\nconst signals: Record<string, Record<string, SignalState<any>>> = {};\r\n// @ts-ignore\r\n// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\nconst extensionSettings: Record<string, any> = extension_settings[extensionName];\r\nconst getExtensionSettings = () => extension_settings;\r\nexport function useExtensionSetting<T extends Record<string, any>>(path: string = \"default\", _defaultSettings: T | (() => T) | undefined = undefined) {\r\n    if (path) {\r\n        extensionSettings[path] ??= {};\r\n        signals[path] ??= {};\r\n    }\r\n    const _extensionSettings = path ? extensionSettings[path] : extensionSettings;\r\n    if (_defaultSettings) {\r\n        const settings = typeof _defaultSettings === \"function\" ? _defaultSettings() : _defaultSettings;\r\n        for (const key in settings) {\r\n            _extensionSettings[key] ??= settings[key];\r\n        }\r\n        saveSettingsDebounced();\r\n    }\r\n    const _signals = (path ? signals[path] : signals) as Record<string, SignalState<any>>;\r\n    for (const key in _extensionSettings) {\r\n        _signals[key] ??= createSignal(key, _extensionSettings[key]);\r\n    }\r\n\r\n    saveSettingsDebounced();\r\n    // @ts-ignore\r\n    function setSetting(path: string, value: any) {\r\n        _extensionSettings[path] = value;\r\n        saveSettingsDebounced();\r\n    }\r\n    function setSettings(settings: Record<string, any>) {\r\n        Object.assign(_extensionSettings, settings);\r\n        saveSettingsDebounced();\r\n    }\r\n    function getSettings() {\r\n        return _extensionSettings;\r\n    }\r\n    function getSetting(path: string) {\r\n        return _extensionSettings[path];\r\n    }\r\n    function getSignal<K extends keyof T>(path: K): SignalState<T[K]> {\r\n        _signals[path as string] ??= createSignal(path as string, _extensionSettings[path as string]);\r\n        return _signals[path as string] as SignalState<T[K]>;\r\n    }\r\n    function createSignal<T>(path: string, value: T, options?: Signal.Options<T>) {\r\n        return {\r\n            rawSignal: signal(value, options),\r\n            get() {\r\n                return this.rawSignal.get();\r\n            },\r\n            set(value: T) {\r\n                this.rawSignal.set(value);\r\n                setSetting(path, value);\r\n            },\r\n        } as SignalState<T>;\r\n    }\r\n    // getSignals\r\n    function getSignals(): SignalStateMap<T> {\r\n        return _signals as SignalStateMap<T>;\r\n    }\r\n\r\n    return {\r\n        getExtensionSettings,\r\n        extensionSettings: _extensionSettings,\r\n        setSetting,\r\n        getSetting,\r\n        setSettings,\r\n        getSettings,\r\n        saveSettingsDebounced,\r\n        extensionFolderPath,\r\n        getSignal,\r\n        getSignals,\r\n    }\r\n}\r\n","import { useExtensionSetting } from \"./extension\";\r\n\r\nexport const htmlInjectorSettings = useExtensionSetting(\"HtmlInjector\", () => {\r\n    return {\r\n        lastMesTextContent: (localStorage.getItem('lastMesTextContent') || ''),\r\n        isInjectionEnabled: JSON.parse(localStorage.getItem('isInjectionEnabled') || \"true\") as boolean,\r\n        displayMode: Number.parseInt(localStorage.getItem('displayMode') || '1'),\r\n        activationMode: (localStorage.getItem('activationMode') || 'all'),\r\n        customStartFloor: Number.parseInt(localStorage.getItem('customStartFloor') || '1'),\r\n        customEndFloor: Number.parseInt(localStorage.getItem('customEndFloor') || '-1'),\r\n        savedPosition: (localStorage.getItem('edgeControlsPosition') || 'top-right'),\r\n        isEdgeControlsCollapsed: (JSON.parse(localStorage.getItem('isEdgeControlsCollapsed') || \"true\")) as boolean,\r\n        isVisibleSettingsPanel: JSON.parse(localStorage.getItem('isVisibleSettingsPanel') || \"true\") as boolean,\r\n        saveTopPosition: (localStorage.getItem('saveTopPosition') || ''),\r\n        hiddenEdgeControls: false,\r\n    };\r\n});\r\n","import { LitElement, html, type PropertyDeclarations } from 'lit';\r\nimport { ref, createRef } from 'lit/directives/ref.js';\r\nimport { SignalWatcher, signal, watch } from '@lit-labs/signals';\r\nimport { type StyleInfo, styleMap } from 'lit/directives/style-map.js';\r\nimport { useExtensionSetting } from '../utils/extension';\r\nimport { htmlInjectorSettings } from 'utils/setting';\r\nconst { saveSettingsDebounced, extensionSettings, setSetting, getSettings, getSignals } = htmlInjectorSettings\r\n// This function is called when the extension settings are changed in the UI\r\nfunction onExampleInput() {\r\n    extensionSettings.example_setting = \"\";\r\n    saveSettingsDebounced();\r\n    setSetting('example_setting2', '');\r\n}\r\nconst {\r\n    lastMesTextContent,\r\n    isInjectionEnabled,\r\n    displayMode,\r\n    activationMode,\r\n    customStartFloor,\r\n    customEndFloor,\r\n    savedPosition,\r\n    isEdgeControlsCollapsed,\r\n    isVisibleSettingsPanel,\r\n    saveTopPosition,\r\n    hiddenEdgeControls,\r\n} = getSignals();\r\n// ----------------------------------------  --------------------------------\r\nconst chatElement = $<HTMLDivElement>('#chat');\r\nconst observer = new MutationObserver((mutations) => {\r\n    let canInject = false;\r\n    for (const mutation of mutations) {\r\n        if (mutation.type !== 'childList') {\r\n            continue;\r\n        }\r\n        const hasNewMesText = Array.from(mutation.addedNodes).some(node => {\r\n            if (node.nodeType !== Node.ELEMENT_NODE || !(node instanceof HTMLElement)) {\r\n                return false;\r\n            }\r\n            return node.classList.contains('mes_text') || node.querySelector('.mes_text');\r\n        });\r\n\r\n        if (hasNewMesText) {\r\n\r\n            if (isInjectionEnabled.get()) {\r\n                canInject = true;\r\n\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    if (canInject) {\r\n        removeInjectedIframes();\r\n        injectHtmlCode();\r\n    }\r\n});\r\n// ----------------------------------------  ----------------------------------------\r\nclass IFrameManager {\r\n    private static instance: IFrameManager;\r\n    private resizeObservers: Map<HTMLIFrameElement, ResizeObserver> = new Map();\r\n\r\n    private constructor() { }\r\n\r\n    public static getInstance(): IFrameManager {\r\n        if (!IFrameManager.instance) {\r\n            IFrameManager.instance = new IFrameManager();\r\n        }\r\n        return IFrameManager.instance;\r\n    }\r\n\r\n    public createIframe(htmlContent: string): HTMLIFrameElement {\r\n        const iframe = document.createElement('iframe');\r\n        this.setupIframeAttributes(iframe);\r\n        iframe.srcdoc = this.getIframeSrcContent(htmlContent);\r\n\r\n        this.setupIframeEventListeners(iframe);\r\n        return iframe;\r\n    }\r\n\r\n    private setupIframeAttributes(iframe: HTMLIFrameElement): void {\r\n        Object.assign(iframe.style, {\r\n            width: '100%',\r\n            border: 'none',\r\n            marginTop: '10px',\r\n            transition: 'height 0.3s ease' // \r\n        });\r\n    }\r\n\r\n    private setupIframeEventListeners(iframe: HTMLIFrameElement): void {\r\n        iframe.onload = () => {\r\n            this.adjustIframeHeight(iframe);\r\n            // \r\n            setTimeout(() => this.adjustIframeHeight(iframe), 500);\r\n\r\n            // \r\n            this.updateIframeTheme(iframe, getSystemTheme());\r\n        };\r\n\r\n        //  ResizeObserver\r\n        if (iframe.contentWindow) {\r\n            const resizeObserver = new ResizeObserver(() => this.adjustIframeHeight(iframe));\r\n            this.resizeObservers.set(iframe, resizeObserver);\r\n\r\n            iframe.addEventListener('load', () => {\r\n                if (iframe.contentWindow?.document.body) {\r\n                    resizeObserver.observe(iframe.contentWindow.document.body);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public adjustIframeHeight(iframe: HTMLIFrameElement): void {\r\n        try {\r\n            if (iframe.contentWindow?.document.body) {\r\n                const height = Math.max(\r\n                    iframe.contentWindow.document.documentElement.scrollHeight,\r\n                    iframe.contentWindow.document.body.scrollHeight\r\n                );\r\n                iframe.style.height = `${height + 5}px`;\r\n            }\r\n        } catch (error) {\r\n            console.error('iframe:', error);\r\n        }\r\n    }\r\n\r\n    public updateIframeTheme(iframe: HTMLIFrameElement, theme: string): void {\r\n        try {\r\n            iframe.contentWindow?.postMessage({ type: 'themeChange', theme }, '*');\r\n        } catch (error) {\r\n            console.error('iframe:', error);\r\n        }\r\n    }\r\n\r\n    public removeIframe(iframe: HTMLIFrameElement): void {\r\n        //  ResizeObserver\r\n        const observer = this.resizeObservers.get(iframe);\r\n        if (observer) {\r\n            observer.disconnect();\r\n            this.resizeObservers.delete(iframe);\r\n        }\r\n        iframe.remove();\r\n    }\r\n\r\n    private getIframeSrcContent(htmlContent: string): string {\r\n        return `\r\n            <html>\r\n    <head>\r\n        <style>\r\n            /*  */\r\n            ::-webkit-scrollbar {\r\n                width: 8px;\r\n                height: 8px;\r\n            }\r\n            ::-webkit-scrollbar-track {\r\n                background: rgba(0, 0, 0, 0.1);\r\n                border-radius: 4px;\r\n            }\r\n            ::-webkit-scrollbar-thumb {\r\n                background: rgba(0, 0, 0, 0.3);\r\n                border-radius: 4px;\r\n            }\r\n            ::-webkit-scrollbar-thumb:hover {\r\n                background: rgba(0, 0, 0, 0.5);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-track {\r\n                background: rgba(255, 255, 255, 0.1);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-thumb {\r\n                background: rgba(255, 255, 255, 0.3);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-thumb:hover {\r\n                background: rgba(255, 255, 255, 0.5);\r\n            }\r\n            .container[data-theme=\"light\"] {\r\n                --bg-color: rgba(240, 240, 255, 0.1);\r\n                --text-color: #1e1e1e;\r\n                --border-color: rgba(139,226,115,0.3);\r\n                --nav-bg-color: rgba(240,240,255,0.4);\r\n            }\r\n            .container[data-theme=\"dark\"] {\r\n                --bg-color: rgba(40, 40, 40, 0.2);\r\n                --text-color: #e0e0e0;\r\n                --border-color: rgba(74,74,74,0.3);\r\n                --nav-bg-color: rgba(30,30,30,0.4);\r\n            }\r\n            .container {\r\n                background-color: var(--bg-color);\r\n                color: var(--text-color);\r\n            }\r\n            .container .left-nav {\r\n                background-color: var(--nav-bg-color);\r\n            }\r\n            .container .button, .container .left-nav .section {\r\n                border: 1px solid var(--border-color);\r\n            }\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <div class=\"theme-content\">\r\n            ${htmlContent}\r\n        </div>\r\n        <script>\r\n            window.addEventListener('load', function() {\r\n                window.parent.postMessage('loaded', '*');\r\n                const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n                function handleThemeChange(e) {\r\n                    document.body.setAttribute('data-theme', e.matches ? 'dark' : 'light');\r\n                    window.parent.postMessage({type: 'themeChange', theme: e.matches ? 'dark' : 'light'}, '*');\r\n                }\r\n                darkModeMediaQuery.addListener(handleThemeChange);\r\n                handleThemeChange(darkModeMediaQuery);\r\n                document.querySelectorAll('.qr-button').forEach(button => {\r\n                    button.addEventListener('click', function() {\r\n                        const buttonName = this.textContent.trim();\r\n                        window.parent.postMessage({type: 'buttonClick', name: buttonName}, '*');\r\n                    });\r\n                });\r\n                document.querySelectorAll('.st-text').forEach(textarea => {\r\n                    textarea.addEventListener('input', function() {\r\n                        window.parent.postMessage({type: 'textInput', text: this.value}, '*');\r\n                    });\r\n                    textarea.addEventListener('change', function() {\r\n                        window.parent.postMessage({type: 'textInput', text: this.value}, '*');\r\n                    });\r\n                    const observer = new MutationObserver((mutations) => {\r\n                        mutations.forEach((mutation) => {\r\n                            if (mutation.type === 'attributes' && mutation.attributeName === 'value') {\r\n                                window.parent.postMessage({type: 'textInput', text: textarea.value}, '*');\r\n                            }\r\n                        });\r\n                    });\r\n                    observer.observe(textarea, { attributes: true });\r\n                });\r\n                document.querySelectorAll('.st-send-button').forEach(button => {\r\n                    button.addEventListener('click', function() {\r\n                        window.parent.postMessage({type: 'sendClick'}, '*');\r\n                    });\r\n                });\r\n            });\r\n            window.addEventListener('message', function(event) {\r\n                if (event.data.type === 'themeChange') {\r\n                    document.body.setAttribute('data-theme', event.data.theme);\r\n                }\r\n            });\r\n        </script>\r\n    </body>\r\n</html>\r\n        `;\r\n    }\r\n}\r\n\r\n\r\n\r\n//  removeInjectedIframes \r\nfunction removeInjectedIframes() {\r\n    const iframeManager = IFrameManager.getInstance();\r\n    const iframes = document.querySelectorAll<HTMLIFrameElement>('.mes_text iframe');\r\n    for (const iframe of Array.from(iframes)) {\r\n        iframeManager.removeIframe(iframe);\r\n    }\r\n    const codeElements = document.querySelectorAll<HTMLDivElement>('.mes_text code');\r\n    for (const code of Array.from(codeElements)) {\r\n        code.style.display = '';\r\n        const details = code.closest('details');\r\n        if (details) {\r\n            details.parentNode?.insertBefore(code, details);\r\n            details.remove();\r\n        }\r\n    }\r\n}\r\nfunction injectHtmlCode(specificMesText = null as Element | null) {\r\n    console.log('injectHtmlCode');\r\n    try {\r\n        const mesTextElements = specificMesText ? [specificMesText] : Array.from(chatElement.find('.mes_text'));\r\n        let targetElements: Element[];\r\n        const iframeManager = IFrameManager.getInstance();\r\n        switch (activationMode.get()) {\r\n            case 'first':\r\n                targetElements = mesTextElements.slice(0, 1);\r\n                break;\r\n            case 'last':\r\n                targetElements = mesTextElements.slice(-1);\r\n                break;\r\n            case 'lastN':\r\n                targetElements = mesTextElements.slice(-customEndFloor);\r\n                break;\r\n            case 'custom': {\r\n                const start = customStartFloor.get() - 1;\r\n                const end = customEndFloor.get() === -1 ? undefined : customEndFloor.get();\r\n                targetElements = mesTextElements.slice(start, end);\r\n                break;\r\n            }\r\n            default: // 'all'\r\n                targetElements = mesTextElements;\r\n        }\r\n        for (let i = 0; i < targetElements.length; i++) {\r\n            const mesText = targetElements[i];\r\n            const codeElement = mesText.querySelector('code');\r\n            if (!codeElement) {\r\n                continue;\r\n            }\r\n            const htmlContent = codeElement.innerText.trim();\r\n            if (!htmlContent.startsWith(\"<\") || !htmlContent.endsWith(\">\")) {\r\n                continue;\r\n            }\r\n            const iframe = iframeManager.createIframe(htmlContent);\r\n            if (displayMode.get() === 2) {\r\n                const details = document.createElement('details');\r\n                const summary = document.createElement('summary');\r\n                summary.textContent = '[]';\r\n                details.appendChild(summary);\r\n                codeElement.parentNode?.insertBefore(details, codeElement);\r\n                details.appendChild(codeElement);\r\n            } else if (displayMode.get() === 3) {\r\n                codeElement.style.display = 'none';\r\n            }\r\n            codeElement.parentNode?.insertBefore(iframe, codeElement.nextSibling);\r\n\r\n            mesText.appendChild(iframe);\r\n        }\r\n    } catch (error) {\r\n        console.error('HTML:', error);\r\n    }\r\n}\r\n\r\n// ----------------------------------------  ----------------------------------------\r\nfunction adjustIframeHeight(iframe: HTMLIFrameElement) {\r\n    try {\r\n        if (iframe.contentWindow?.document.body) {\r\n            const height = iframe.contentWindow.document.documentElement.scrollHeight;\r\n            iframe.style.height = `${height + 5}px`;\r\n        }\r\n    } catch (error) {\r\n        console.error('iframe:', error);\r\n    }\r\n}\r\nfunction getSystemTheme() {\r\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\nfunction updateAllIframesTheme() {\r\n    const iframes = document.querySelectorAll('.mes_text iframe');\r\n    // biome-ignore lint/complexity/noForEach: <explanation>\r\n    iframes.forEach(iframe => {\r\n        try {\r\n            // @ts-ignore\r\n            if (iframe.contentWindow) {\r\n                // @ts-ignore\r\n                iframe.contentWindow.postMessage({ type: 'themeChange', theme: getSystemTheme() }, '*');\r\n            }\r\n        } catch (error) {\r\n            console.error('iframe:', error);\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleMessage(event: MessageEvent) {\r\n    try {\r\n        if (event.data === 'loaded') {\r\n            const iframes = document.querySelectorAll<HTMLIFrameElement>('.mes_text iframe');\r\n            // biome-ignore lint/complexity/noForEach: <explanation>\r\n            iframes.forEach(iframe => {\r\n                // @ts-ignore\r\n                if (iframe.contentWindow === event.source) {\r\n                    adjustIframeHeight(iframe);\r\n                }\r\n            });\r\n        } else if (event.data.type === 'buttonClick') {\r\n            const buttonName = event.data.name;\r\n            jQuery('.qr--button.menu_button').each(function () {\r\n                if (jQuery(this).find('.qr--button-label').text().trim() === buttonName) {\r\n                    jQuery(this).trigger('click');\r\n                    return false;\r\n                }\r\n            });\r\n        } else if (event.data.type === 'textInput') {\r\n            const sendTextarea = document.getElementById('send_textarea');\r\n            if (sendTextarea) {\r\n                // @ts-ignore\r\n                sendTextarea.value = event.data.text;\r\n                sendTextarea.dispatchEvent(new Event('input', { bubbles: true }));\r\n                sendTextarea.dispatchEvent(new Event('change', { bubbles: true }));\r\n            }\r\n        } else if (event.data.type === 'sendClick') {\r\n            const sendButton = document.getElementById('send_but');\r\n            if (sendButton) {\r\n                sendButton.click();\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error(':', error);\r\n    }\r\n}\r\nclass SettingsPanel extends SignalWatcher(LitElement) {\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n    public customFloorSettingsRef = createRef<HTMLDivElement>();\r\n    public LastSettingsRef = createRef<HTMLDivElement>();\r\n    declare edgeControls: EdgeControls\r\n    render() {\r\n        this.style.display = isVisibleSettingsPanel.get() ? 'none' : 'block';\r\n        this.classList.add('drawer');\r\n        return html`\r\n        <div id=\"html-injector-settings-header\" class=\"inline-drawer-header\">\r\n                <span class=\"inline-drawer-title\">HTML</span>\r\n                <div id=\"html-injector-close-settings\" class=\"inline-drawer-icon fa-solid fa-circle-xmark\" @click=${this.toggleSettingsPanel}></div>\r\n            </div>\r\n            <div id=\"settings-content\">\r\n                <div class=\"settings-section\">\r\n                    <h3 class=\"settings-subtitle\"></h3>\r\n                <select id=\"edge-controls-position\" class=\"settings-select theme-element\" @change=${this.handleSavePositionChange}>\r\n                    <option value=\"top-right\"            .selected=${savedPosition.get() === \"top-right\"}></option>\r\n                    <option value=\"right-three-quarters\" .selected=${savedPosition.get() === \"right-three-quarters\"}>3/4</option>\r\n                    <option value=\"right-middle\"         .selected=${savedPosition.get() === \"right-middle\"}></option>\r\n                    <option value=\"top-left\"             .selected=${savedPosition.get() === \"top-left\"}></option>\r\n                    <option value=\"left-three-quarters\"  .selected=${savedPosition.get() === \"left-three-quarters\"}>3/4</option>\r\n                    <option value=\"left-middle\"          .selected=${savedPosition.get() === \"left-middle\"}></option>\r\n                    <option value=\"custom\"               .selected=${savedPosition.get() === \"custom\"}></option>\r\n                    <option value=\"hidden\"               .selected=${savedPosition.get() === \"hidden\"}></option>\r\n\r\n                </select>\r\n                </div>\r\n                <div class=\"settings-section\">\r\n                <h3 class=\"settings-subtitle\"></h3>\r\n                <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"1\" .checked=${displayMode.get() === 1} @change=${this.handleDisplayModeChange}> </label>\r\n                <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"2\" .checked=${displayMode.get() === 2} @change=${this.handleDisplayModeChange}> </label>\r\n                <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"3\" .checked=${displayMode.get() === 3} @change=${this.handleDisplayModeChange}> </label>\r\n            </div>\r\n                <div class=\"settings-section\">\r\n                    <h3 class=\"settings-subtitle\"></h3>\r\n                    <select id=\"activation-mode\" class=\"settings-select theme-element\" @change=${this.handleActivationModeChange} >\r\n                        <option value=\"all\"    .selected=${activationMode.get() === \"all\"}></option>\r\n                        <option value=\"first\"  .selected=${activationMode.get() === \"first\"}></option>\r\n                        <option value=\"last\"   .selected=${activationMode.get() === \"last\"}></option>\r\n                        <option value=\"lastN\"  .selected=${activationMode.get() === \"lastN\"}>N</option>\r\n                        <option value=\"custom\" .selected=${activationMode.get() === \"custom\"}></option>\r\n                    </select>\r\n                    <div id=\"custom-floor-settings\" class=\"settings-subsection\" style=${styleMap({\r\n            display: activationMode.get() === 'custom' ? 'block' : 'none'\r\n        })} ${ref(this.customFloorSettingsRef)}>\r\n                        <label class=\"settings-option\">: <input type=\"number\" id=\"custom-start-floor\" min=\"1\" .value=${customStartFloor.get().toString()} @change=${this.handleCustomStartFloorChange}></label>\r\n                        <label class=\"settings-option\">: <input type=\"number\" id=\"custom-end-floor\" min=\"-1\" .value=${customEndFloor.get().toString()} @change=${this.handleCustomEndFloorChange}></label>\r\n                        <p class=\"settings-note\">-1 </p>\r\n                    </div>\r\n                    <div id=\"last-n-settings\" class=\"settings-subsection\" style=${styleMap({\r\n            display: activationMode.get() === 'lastN' ? 'block' : 'none'\r\n        })} ${ref(this.LastSettingsRef)} >\r\n                        <label class=\"settings-option\"> <input type=\"number\" id=\"last-n-floors\" min=\"1\" .value=${customEndFloor.get().toString()}  @change=${this.handleLastNFloorsChange}> </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"settings-footer\">\r\n                <p></p>\r\n                <p> HTML  \\`\\`\\` </p>\r\n                <pre class=\"code-example\">\r\n\\`\\`\\`\r\n&lt;h1&gt;Hello, World!&lt;/h1&gt;\r\n&lt;p&gt;This is an example.&lt;/p&gt;\r\n\\`\\`\\`\r\n        </pre>\r\n        <p>ST</p>\r\n        <pre class=\"code-example\">\r\n\\`\\`\\`\r\n&lt;button class=\"qr-button\"&gt;(QR)&lt;/button&gt;\r\n&lt;textarea class=\"st-text\"&gt;()&lt;/textarea&gt;\r\n&lt;button class=\"st-send-button\"&gt;()&lt;/button&gt;\r\n\\`\\`\\`\r\n                </pre>\r\n                <p>JavaScriptst-textst.</p>\r\n                <a href=\"https://discord.com/channels/1134557553011998840/1271783456690409554\" target=\"_blank\"> Discord gal </a>\r\n            </div>\r\n        `\r\n    }\r\n    handleActivationModeChange(event: Event) {\r\n        const target = event.target as HTMLSelectElement;\r\n        const value = target.value;\r\n        activationMode.set(value);\r\n        this.updateInjection();\r\n    }\r\n    handleSavePositionChange(event: Event) {\r\n        const target = event.target as HTMLSelectElement;\r\n        const value = target.value;\r\n        savedPosition.set(value);\r\n        isEdgeControlsCollapsed.set(false);\r\n        this.edgeControls.updateEdgeControlsPosition(value);\r\n    }\r\n    handleCustomStartFloorChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customStartFloor.set(value);\r\n        this.updateInjection();\r\n    }\r\n\r\n    handleCustomEndFloorChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customEndFloor.set(value);\r\n        this.updateInjection();\r\n    }\r\n    handleLastNFloorsChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customEndFloor.set(value);\r\n        this.updateInjection();\r\n    }\r\n    handleDisplayModeChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        displayMode.set(value);\r\n        this.updateInjection();\r\n    }\r\n    toggleSettingsPanel(event: Event) {\r\n        const isVisible = this.style.display === 'block';\r\n        this.style.display = isVisible ? 'block' : 'node';\r\n        isVisibleSettingsPanel.set(isVisible);\r\n    }\r\n    updateInjection() {\r\n        if (!isInjectionEnabled.get()) {\r\n            return\r\n        }\r\n        removeInjectedIframes();\r\n        injectHtmlCode();\r\n    }\r\n}\r\nclass EdgeControls extends SignalWatcher(LitElement) {\r\n    static properties: PropertyDeclarations = {\r\n        settingsPanel: { type: Object },\r\n        toggleEdgeButtonStyle: { type: Object },\r\n        isDragging: { type: Boolean },\r\n        startY: { type: Number },\r\n        startTop: { type: Number },\r\n        newTop: { type: Number }\r\n    }\r\n    public declare settingsPanel: SettingsPanel;\r\n    public declare toggleEdgeButtonStyle: StyleInfo;\r\n    public declare isDragging: boolean;\r\n    public declare startY: number;\r\n    public declare startTop: number;\r\n    public newTop: number\r\n    constructor() {\r\n        super();\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n        this.toggleEdgeButtonStyle = {\r\n            position: 'absolute',\r\n            top: '50%',\r\n            transform: 'translateY(-50%)',\r\n            backgroundColor: 'var(--SmartThemeBlurTintColor, rgba(22, 11, 18, 0.73))',\r\n            color: 'var(--SmartThemeBodyColor, rgba(220, 220, 210, 1))',\r\n            border: '1px solid var(--SmartThemeBorderColor, rgba(217, 90, 157, 0.5))',\r\n            cursor: 'pointer',\r\n            padding: '5px',\r\n            userSelect: 'none',\r\n            fontSize: '12px',\r\n            height: '60px',\r\n            width: '20px',\r\n            textAlign: 'center',\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        }\r\n        this.isDragging = false;\r\n        this.startY = 0;\r\n        this.startTop = 0;\r\n        this.newTop = 0;\r\n\r\n\r\n    }\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        document.addEventListener('mousemove', this.handleDragMove.bind(this));\r\n        // @ts-ignore\r\n        document.addEventListener('mouseup', this.handleDragEnd.bind(this));\r\n        document.addEventListener('touchmove', this.handleDragMove.bind(this));\r\n        // @ts-ignore\r\n        document.addEventListener('touchend', this.handleDragEnd.bind(this));\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        document.removeEventListener('mousemove', this.handleDragMove.bind(this));\r\n        // @ts-ignore\r\n        document.removeEventListener('mouseup', this.handleDragEnd.bind(this));\r\n        document.removeEventListener('touchmove', this.handleDragMove.bind(this));\r\n        // @ts-ignore\r\n        document.removeEventListener('touchend', this.handleDragEnd.bind(this));\r\n    }\r\n    protected render(): unknown {\r\n        console.log('render edge controls');\r\n        console.log('isInjectionEnabled', isInjectionEnabled.get());\r\n        console.log('isVisibleSettingsPanel', isVisibleSettingsPanel.get());\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n        if (isLeft) {\r\n            this.style.left = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n        } else {\r\n            this.style.right = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n        }\r\n        this.style.display = hiddenEdgeControls.get() ? 'none' : 'block';\r\n        return html`\r\n            <div id=\"html-injector-drag-handle\" @mousedown=${this.handleDragStart} @touchstart=${this.handleDragStart}>\r\n                <div class=\"drag-dots\">\r\n                ${Array.from({ length: 3 }).map(() => html`\r\n                    <div style=\"display: flex; flex-direction: column; justify-content: space-between; height: 15px;\">\r\n                        ${Array.from({ length: 2 }).map(() => html`\r\n                            <div style=\"width: 4px; height: 4px; border-radius: 50%; background-color: var(--smart-theme-body-color);\"></div>\r\n                        `)}\r\n                    </div>\r\n                `)}\r\n                </div>\r\n            </div>\r\n            <label class=\"html-injector-switch\">\r\n                <input type=\"checkbox\" id=\"edge-injection-toggle\" @change=${this.handleToggleChange} .checked=${isInjectionEnabled.get()}>\r\n                <span class=\"html-injector-slider\"></span>\r\n            </label>\r\n            <button id=\"html-injector-toggle-panel\" class=\"html-injector-button menu_button\" @click=${this.toggleSettingsPanel}>${isVisibleSettingsPanel.get() ? \"\" : \"\"}</button>\r\n            <button id=\"toggle-edge-controls\" style=${styleMap(this.toggleEdgeButtonStyle)}\r\n            @click=${this.handleToggleEdgeControls}\r\n            >\r\n            ${isEdgeControlsCollapsed.get() ? '<<' : '>>'}\r\n            </button>\r\n`\r\n    }\r\n    handleDragStart(e: DragEvent | MouseEvent | TouchEvent) {\r\n        this.isDragging = true;\r\n        this.startY = e.type.includes('mouse') ? (e as MouseEvent).clientY : (e as unknown as TouchEvent).touches[0].clientY;\r\n        this.startTop = this.getBoundingClientRect().top;\r\n        e.preventDefault();\r\n    }\r\n    handleDragMove(event: DragEvent | MouseEvent | TouchEvent) {\r\n        if (!this.isDragging) {\r\n            return;\r\n        }\r\n        const clientY = event.type.includes('mouse') ? (event as MouseEvent).clientY : (event as unknown as TouchEvent).touches[0].clientY;\r\n        let newTop = this.startTop + (clientY - this.startY);\r\n        newTop = Math.max(0, Math.min(newTop, window.innerHeight - this.offsetHeight));\r\n        this.newTop = newTop;\r\n        this.style.top = `${newTop}px`;\r\n\r\n    }\r\n    handleDragEnd(event: DragEvent) {\r\n        this.isDragging = false;\r\n        if (activationMode.get() === 'custom') {\r\n            saveTopPosition.set(this.newTop.toString());\r\n        }\r\n    }\r\n\r\n\r\n\r\n    handleToggleEdgeControls(event: Event) {\r\n        isEdgeControlsCollapsed.set(!isEdgeControlsCollapsed.get());\r\n        const value = isEdgeControlsCollapsed.get();\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n        // \r\n        const toggleButton = event.target as HTMLElement;\r\n        if (isLeft) {\r\n            this.style.left = value ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n            toggleButton.textContent = value ? '>>' : '<<';\r\n        } else {\r\n            this.style.right = value ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n            toggleButton.textContent = value ? '<<' : '>>';\r\n        }\r\n        // \r\n        this.toggleEdgeButtonStyle = {\r\n            ...this.toggleEdgeButtonStyle,\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        };\r\n    }\r\n    handleToggleChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const isEnabled = target.checked;\r\n        console.log('isEnabled', isEnabled);\r\n        isInjectionEnabled.set(isEnabled);\r\n        if (isEnabled) {\r\n            injectHtmlCode();\r\n        } else {\r\n            removeInjectedIframes();\r\n        }\r\n\r\n    }\r\n    toggleSettingsPanel(event: Event) {\r\n        this.settingsPanel.toggleSettingsPanel(event);\r\n    }\r\n    updatePosition() {\r\n        this.updateEdgeControlsPosition(savedPosition.get());\r\n    }\r\n    updateEdgeControlsPosition(position: string) {\r\n        // \r\n        const isLeft = position.includes('left');\r\n        // \r\n        if (isLeft) {\r\n            this.classList.add('left-side');\r\n        } else {\r\n            this.classList.remove('left-side');\r\n        }\r\n        // \r\n        switch (position) {\r\n            case 'top-right':\r\n            case 'top-left':\r\n                this.style.top = '20vh';\r\n                this.style.transform = 'none';\r\n                break;\r\n            case 'right-three-quarters':\r\n            case 'left-three-quarters':\r\n                this.style.top = '75vh';\r\n                this.style.transform = 'none';\r\n                break;\r\n            case 'right-middle':\r\n            case 'left-middle':\r\n                this.style.top = '50%';\r\n                this.style.transform = 'translateY(-50%)';\r\n                break;\r\n            case 'custom':\r\n                this.style.top = saveTopPosition.get() ? `${saveTopPosition.get()}px` : \"20vh\";\r\n                this.style.transform = 'none';\r\n                break;\r\n\r\n        }\r\n        // \r\n        if (isLeft) {\r\n            this.style.left = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n        } else {\r\n            this.style.right = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n        }\r\n        // \r\n        this.toggleEdgeButtonStyle = {\r\n            ...this.toggleEdgeButtonStyle,\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        };\r\n        this.requestUpdate(); // \r\n    }\r\n}\r\n\r\n\r\ncustomElements.define('settings-panel', SettingsPanel);\r\ncustomElements.define('edge-controls', EdgeControls);\r\nexport function initInjector() {\r\n    const settingsPanel = document.createElement('settings-panel') as SettingsPanel;\r\n    const edgeControls = document.createElement('edge-controls') as EdgeControls;\r\n    settingsPanel.id = 'html-injector-settings';\r\n    edgeControls.id = 'html-injector-edge-controls';\r\n    settingsPanel.edgeControls = edgeControls;\r\n    edgeControls.settingsPanel = settingsPanel;\r\n    const position = savedPosition.get();\r\n    if (position.includes('left')) {\r\n        edgeControls.classList.add('left-side');\r\n    }\r\n    document.body.appendChild(settingsPanel);\r\n    document.body.appendChild(edgeControls);\r\n    // \r\n    edgeControls.updateEdgeControlsPosition(position);\r\n    window.addEventListener(\"resize\", () => {\r\n        edgeControls.updatePosition();\r\n    })\r\n    window.addEventListener('message', handleMessage);\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateAllIframesTheme);\r\n    observer.observe(document.body, {\r\n        childList: true,\r\n        subtree: true\r\n    })\r\n}\r\n\r\n","import{noChange as t}from\"../lit-html.js\";import{directive as s,Directive as i,PartType as r}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=s(class extends i{constructor(t){if(super(t),t.type!==r.ATTRIBUTE||\"class\"!==t.name||t.strings?.length>2)throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\")}render(t){return\" \"+Object.keys(t).filter((s=>t[s])).join(\" \")+\" \"}update(s,[i]){if(void 0===this.st){this.st=new Set,void 0!==s.strings&&(this.nt=new Set(s.strings.join(\" \").split(/\\s/).filter((t=>\"\"!==t))));for(const t in i)i[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(i)}const r=s.element.classList;for(const t of this.st)t in i||(r.remove(t),this.st.delete(t));for(const t in i){const s=!!i[t];s===this.st.has(t)||this.nt?.has(t)||(s?(r.add(t),this.st.add(t)):(r.remove(t),this.st.delete(t)))}return t}});export{e as classMap};\n//# sourceMappingURL=class-map.js.map\n","import { LitElement, html, type PropertyDeclarations } from 'lit';\r\nimport { classMap } from 'lit/directives/class-map.js';\r\nimport { htmlInjectorSettings } from 'utils/setting';\r\nconst { hiddenEdgeControls } = htmlInjectorSettings.getSignals();\r\nclass ZerxzLibContainer extends LitElement {\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n    render() {\r\n        return html`\r\n    <div class=\"zerxz-lib-settings\">\r\n        <div class=\"inline-drawer\">\r\n            <div class=\"inline-drawer-toggle inline-drawer-header\">\r\n                <b>ZerxzLib</b>\r\n                <div class=\"inline-drawer-icon fa-solid fa-circle-chevron-down down\"></div>\r\n            </div>\r\n            <div class=\"inline-drawer-content\" >\r\n    <div class=\"flex-container\" >\r\n        <div class=\"menu_button menu_button_icon interactable\" @click=${this.handlerHiddenEdgeControl}>\r\n            <i class=${classMap({\r\n            \"fa-solid\": true,\r\n            \"fa-bug\": hiddenEdgeControls.get(),\r\n            \"fa-bug-slash\": !hiddenEdgeControls.get(),\r\n        })} ></i>\r\n            <small >${!hiddenEdgeControls.get() ? \"\" : \"\"}</small>\r\n        </div>\r\n    </div>\r\n    <hr>\r\n</div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    }\r\n    handlerHiddenEdgeControl() {\r\n        hiddenEdgeControls.set(!hiddenEdgeControls.get());\r\n        this.requestUpdate();\r\n    }\r\n}\r\n\r\n\r\n\r\ncustomElements.define('zerxz-lib-container', ZerxzLibContainer);\r\nexport function initContainer() {\r\n    const container = document.createElement('zerxz-lib-container');\r\n    container.className = \"extension_container\";\r\n    container.id = \"zerxzlib_container\";\r\n    const root = document.getElementById(\"extensions_settings2\");\r\n    if (!root) {\r\n        return;\r\n    }\r\n    root.appendChild(container);\r\n}\r\n","import {\r\n\teventSource,\r\n\tevent_types,\r\n} from \"@silly-tavern/script.js\";\r\nimport { getGeminiModel, getSecrets, isGeminiSource, saveKey, switchSecretsFromArray, throwGeminiError, STATE, CUSTOM_KEY, initGeminiModels, initToastr } from \"./utils\";\r\n\r\nimport \"./layouts/GeminiLayouts\";\r\nimport { initInjector } from \"./layouts/HtmlInjector\";\r\nimport type { GeminiLayouts } from \"./layouts/GeminiLayouts\";\r\nimport { initContainer } from \"layouts/ExtensionContainer\";\r\n\r\n; (async () => {\r\n\tinitToastr();\r\n\tinitInjector();\r\n\tinitContainer();\r\n\t// form id\"makersuite_form\" jquery\r\n\tconst secrets = (await getSecrets()) ?? {};\r\n\tawait initGeminiModels(secrets);\r\n\tconst form = $(\"#makersuite_form\")[0];\r\n\tconsole.log(\"secrets\", secrets);\r\n\tconst geminiLayout = document.createElement(\"gemini-layouts\") as GeminiLayouts;\r\n\tgeminiLayout.currentKey = secrets.api_key_makersuite\r\n\tgeminiLayout.lastKey = secrets[CUSTOM_KEY]?.split(\"\\n\").pop() || \"\"\r\n\tgeminiLayout.throwGeminiErrorState = STATE.throwGeminiErrorState\r\n\tgeminiLayout.switchKeyMakerSuite = STATE.switchState\r\n\tgeminiLayout.apiKeys = secrets[CUSTOM_KEY] || \"\"\r\n\r\n\tform.appendChild(geminiLayout);\r\n\r\n\teventSource.on(\r\n\t\tevent_types.CHAT_COMPLETION_SETTINGS_READY,\r\n\t\tswitchSecretsFromArray,\r\n\t);\r\n\teventSource.on(event_types.CHATCOMPLETION_MODEL_CHANGED, async (model: string) => {\r\n\t\tif (isGeminiSource()) await saveKey(\"api_key_makersuite_model\", model);\r\n\t});\r\n\teventSource.on(event_types.MESSAGE_SENT, () => {\r\n\t\tif (isGeminiSource()) {\r\n\t\t\tconst currentCount = Number(localStorage.getItem(\"gemini_api_call_count\") || 0);\r\n\t\t\tlocalStorage.setItem(\"gemini_api_call_count\", (currentCount + 1).toString());\r\n\t\t\twindow.dispatchEvent(new CustomEvent('gemini-api-call-updated'));\r\n\t\t}\r\n\t});\r\n})();\r\n"],"names":["CUSTOM_KEY","STATE","switchState","localStorage","getItem","throwGeminiErrorState","async","getSecrets","response","fetch","method","headers","getRequestHeaders","status","callGenericPopup","POPUP_TYPE","TEXT","ok","json","switchSecretsFromArray","_secrets$CUSTOM_KEY","secrets","api_keys","split","map","v","trim","filter","startsWith","length","currentKey","api_key_makersuite","firstKeyApi","includes","splice","indexOf","push","writeSecret","saveKey","join","textarea","$","currentKeyElement","lastKeyElement","console","log","textContent","concat","value","key","isUpdateSecretDisplay","arguments","undefined","updateSecretDisplay","saveSettingsDebounced","GEMINI_SOURCES","isGeminiSource","oai_settings","chat_completion_source","throwGeminiError","large","wide","allowVerticalScrolling","initGeminiModels","_secrets$models_maker","_secrets$api_key_make","modelStr","JSON","parse","models_makersuite","api_key","optgroup","primaryVersions","subVersions","subVersionsArray","Array","from","children","primaryVersionsArray","subVersionsValues","el","originalVersions","flat","cachedVersions","model","option","document","createElement","text","name","appendChild","geminiModels","result","data","models","modelData","replace","displayName","e","error","getGeminiModel","geminiModelOptions","stringify","uniqueModels","Set","api_key_makersuite_model","has","google_model","val","attr","oldError","toastr","globalThis","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","o","WeakMap","n","constructor","t","this","_$cssResult$","Error","cssText","styleSheet","get","replaceSync","set","toString","c","cssRules","r","is","defineProperty","getOwnPropertyDescriptor","h","getOwnPropertyNames","getOwnPropertySymbols","getPrototypeOf","Object","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","d","u","toAttribute","Boolean","fromAttribute","i","Number","f","b","attribute","type","String","converter","reflect","useDefault","hasChanged","metadata","litPropertyMetadata","y","HTMLElement","addInitializer","_$Ei","observedAttributes","finalize","_$Eh","keys","createProperty","state","hasOwnProperty","create","wrapped","elementProperties","noAccessor","getPropertyDescriptor","call","requestUpdate","configurable","enumerable","getPropertyOptions","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","litNonce","setAttribute","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$ET","removeAttribute","_$Ej","hasAttribute","C","_$EP","_$Eq","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$EM","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","iterator","_","m","RegExp","g","_$litType$","strings","values","x","T","for","E","A","createTreeWalker","P","V","lastIndex","exec","test","N","parts","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","index","ctor","H","I","L","k","tagName","append","innerHTML","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","M","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","R","nextSibling","z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","O","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","element","fill","j","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","Z","D","U","B","F","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","_$Ct","_$Ci","_$AQ","dt","ut","w","GeminiLayouts","lastKey","switchKeyMakerSuite","apiKeys","apiCallCount","window","updateApiCount","bind","buttons","handle","handleSaveKey","handleGetNewModel","handleSwitchKeyMakerSuite","handleThrowGeminiError","handleSwitchGeminiError","handleClearCount","html","_templateObject","_taggedTemplateLiteral","handleTextareaInput","repeat","_ref","_ref2","_templateObject2","event","target","fistValue","setItem","_defineProperty","customElements","define","reconnected","disconnected","setValue","G","rt","lt","ct","ht","__defProp","__publicField","obj","writable","__defNormalProp","__privateIn","member","TypeError","__privateAdd","WeakSet","__privateMethod","msg","__accessCheck","defaultEquals","activeConsumer","inNotificationPhase","epoch","SIGNAL","setActiveConsumer","consumer","prev","REACTIVE_NODE","version","lastCleanEpoch","dirty","producerNode","producerLastReadVersion","producerIndexOfThis","nextProducerIndex","liveConsumerNode","liveConsumerIndexOfThis","consumerAllowSignalWrites","consumerIsAlwaysLive","producerMustRecompute","producerRecomputeValue","consumerMarkedDirty","consumerOnSignalRead","producerAccessed","node","ngDevMode","idx","assertConsumerNode","consumerIsLive","producerRemoveLiveConsumerAtIndex","producerAddLiveConsumer","producerUpdateValueVersion","producer","seenVersion","consumerPollProducersForChange","producerNotifyConsumers","consumerMarkDirty","_a","wrapper","indexOfThis","assertProducerNode","watched","unwatched","lastIdx","idxProducer","computedGet","ERRORED","UNSET","COMPUTING","COMPUTED_NODE","equal","oldValue","prevConsumer","consumerBeforeComputation","newValue","wasEqual","computation","err","pop","consumerAfterComputation","throwInvalidWriteToSignalErrorFn","signalGetFn","signalSetFn","signalValueChanged","SIGNAL_NODE","NODE","Signal","Signal2","_brand","_b","_brand2","isState","State","initialValue","ref","getter","createSignal","equals","subtle","isComputed","Computed","computed","createComputed","subtle2","_a2","_brand3","_assertSignals","assertSignals_fn","untrack","cb","output","prevActiveConsumer","introspectSources","sink","_a3","isWatcher","introspectSinks","signal","hasSinks","hasSources","signals","Watcher","notify","watch","unwatch","idxConsumer","getPending","currentComputed","FinalizationRegistry","watcher","warn","_$St","_$Si","_$So","_$Sh","_$Sl","_$Su","_$Sv","register","_$Sp","commit","clear","queueMicrotask","_$SW","_$Sj","_$SO","reduce","style","ft","removeProperty","setProperty","extensionName","extensionFolderPath","_extension_settings$e","extension_settings","extensionSettings","getExtensionSettings","htmlInjectorSettings","path","_defaultSettings","_extensionSettings$pa","_signals$path","_extensionSettings","settings","_extensionSettings$ke","_signals","_signals$key","setSetting","rawSignal","getSetting","setSettings","assign","getSettings","getSignal","_signals$_ref","getSignals","useExtensionSetting","lastMesTextContent","isInjectionEnabled","displayMode","parseInt","activationMode","customStartFloor","customEndFloor","savedPosition","isEdgeControlsCollapsed","isVisibleSettingsPanel","saveTopPosition","hiddenEdgeControls","chatElement","observer","MutationObserver","mutations","canInject","mutation","addedNodes","some","Node","ELEMENT_NODE","classList","contains","querySelector","removeInjectedIframes","injectHtmlCode","IFrameManager","getInstance","instance","createIframe","htmlContent","iframe","setupIframeAttributes","srcdoc","getIframeSrcContent","setupIframeEventListeners","width","border","marginTop","transition","onload","adjustIframeHeight","setTimeout","updateIframeTheme","getSystemTheme","contentWindow","resizeObserver","ResizeObserver","resizeObservers","_iframe$contentWindow","body","observe","_iframe$contentWindow2","height","max","documentElement","scrollHeight","theme","_iframe$contentWindow3","postMessage","removeIframe","disconnect","iframeManager","iframes","querySelectorAll","codeElements","code","display","details","closest","_details$parentNode","specificMesText","mesTextElements","find","targetElements","start","end","_codeElement$parentNo2","mesText","codeElement","innerText","_codeElement$parentNo","summary","matchMedia","matches","updateAllIframesTheme","handleMessage","source","_iframe$contentWindow4","buttonName","jQuery","each","trigger","sendTextarea","getElementById","dispatchEvent","Event","bubbles","sendButton","click","SettingsPanel","SignalWatcher","createRef","toggleSettingsPanel","handleSavePositionChange","handleDisplayModeChange","handleActivationModeChange","styleMap","customFloorSettingsRef","handleCustomStartFloorChange","handleCustomEndFloorChange","LastSettingsRef","handleLastNFloorsChange","updateInjection","edgeControls","updateEdgeControlsPosition","isVisible","EdgeControls","isLeft","toggleEdgeButtonStyle","_objectSpread","position","top","transform","backgroundColor","color","cursor","padding","userSelect","fontSize","textAlign","right","left","borderRadius","isDragging","startY","startTop","newTop","handleDragMove","handleDragEnd","handleDragStart","_templateObject3","_templateObject4","handleToggleChange","handleToggleEdgeControls","clientY","touches","getBoundingClientRect","preventDefault","min","innerHeight","offsetHeight","toggleButton","isEnabled","checked","settingsPanel","updatePosition","st","nt","handlerHiddenEdgeControl","classMap","_await$getSecrets","_len","args","_key","message","id","childList","subtree","initInjector","container","className","root","initContainer","form","geminiLayout","eventSource","on","event_types","CHAT_COMPLETION_SETTINGS_READY","CHATCOMPLETION_MODEL_CHANGED","MESSAGE_SENT","currentCount","CustomEvent"],"sourceRoot":""}